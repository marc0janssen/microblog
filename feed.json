{
	"version": "https://jsonfeed.org/version/1",
	"title": "The Attic",
	"icon": "https://micro.blog/marc0janssen/avatar.jpg",
	"home_page_url": "https://micro.mjanssen.nl/",
	"feed_url": "https://micro.mjanssen.nl/feed.json",
	"items": [
		
			{
				"id": "http://marc0janssen.micro.blog/2025/03/25/escaping-usa-tech-bye-bye.html",
				"title": "ğŸ“Ÿ Escaping USA Tech, Bye Bye Dropbox, Hello! Jottacloud",
				"content_html": "<p>I recently got more concerned about what is happening in the US since a certain president He-Who-Must-Not-Be-Named and what this does in the world and my personal life. I was already on a streak, cutting loose from BIG-TECH social media like METAâ€™s â€œsuiteâ€ and Google. This was also for privacy concerns.</p>\n<p>I got concern about having all my data, partly client side encrypted but partly not, stored in the USA with Dropbox. I really liked Dropbox because it has a great adoption rate in other apps and products. But I did not like it that all my data was in the US. And with the recent presidency of He-Who-Must-Not-Be-Named, I got more concerned about my data with Dropbox.</p>\n<p>Finding a European alternative with the same level of integration in software and services as Dropbox is a challenging task. Not that these services are inferior, but integrating them can sometimes be difficult. My goal was to achieve incremental backups of my shared folders on a Synology NAS and have the sync folder from my cloud storage synchronised with the Synology NAS.</p>\n<p>This would be typically done with Hyperbackup for incremental backups and Cloud Sync for your sync folder. Most of the services listed there are either US-based, expensive, no up to the job, etc. A least for me.</p>\n<p>After looking around and comparing European-based cloud providers, I got my eye on <a href=\"https://www.jottacloud.com/\" title=\"Home Jottacloud\">Jottacloud</a>. This is a Norwegian cloud provider which is fast, in Europe of course, nice supporting clients for iOS and macOS (Yes, also US BIG-TECH, but I love Apple, there is nothing that compares with Apple Products. And I think Apple is doing a better job on privacy), has a great deal on â€œunlimitedâ€ storage space. The only downside Jottacloud has, they donâ€™t (like Dropbox) have zero-knowledge encryption. If they had it, would enhance privacy a lotâ€¦ But since they are in Europe with strict privacy laws, I took that as a step forward compared to the US-based Dropbox. Plus, the unlimited storage deal at JottaCloud is the same price as the 2Â TB deal I had at Dropbox. <code>Just a hint: if you look around on the internet you can find Jottacloud deals. I got a deal with 15% off for the first year.</code></p>\n<p>Jottacloud also runs on 100% renewable energy, if you care for such a thing (I do).</p>\n<p>Jottacloud is not one of the default services supported by Synology in their backup suite and other software. This is a shame, but there is a way to still create nice incremental backups of your shared folders to Jottacloud directly from your Synology.</p>\n<p>This is achieved using a brilliant free application called Restic. <a href=\"https://restic.readthedocs.io/en/stable/\" title=\"Read The Docs Restic\">Restic</a> is a free, open-source backup tool offering secure, efficient, and flexible data protection. It supports multiple storage backends, including cloud services, and features encryption, deduplication, and compression. Restic is user-friendly and suitable for various operating systems, making it ideal for both personal and professional backup needs.</p>\n<p>To access Jottacloud with Restic, I used Rclone. <a href=\"https://rclone.org\" title=\"The home of Rclone\">Rclone</a> is a versatile command-line tool for managing cloud storage, offering features such as file syncing, encryption, and compression. It supports over 70 cloud services, including Jottacloud, Google Drive, and Amazon S3, and is ideal for automating backups and data transfers across various platforms with ease and reliability.</p>\n<p>Rclone and Restic are not natively available on your Synology. There are scripts and methods to install them via the NAS shell. However, I am a fan of Docker. Since I own a Synology that supports Docker, which Synology refers to as &ldquo;Container Manager&rdquo; in their DSM, I implemented Restic and Rclone using Docker.</p>\n<p><a href=\"https://www.docker.com\" title=\"The home of Docker\">Docker</a> is a containerisation platform that enables efficient deployment and management of applications. It allows developers to package software into portable containers, ensuring consistent performance across environments. Docker streamlines development, testing, and deployment processes, enhancing flexibility and scalability for a wide range of applications and services.</p>\n<p>If your Synology does not support Docker, you can still achieve what is described below by using a <a href=\"https://www.raspberrypi.com\" title=\"Home of the Raspberry PI (Not the cakes though)\">Raspberry Pi</a>. You can in install your favourite OS (mine is Ubuntu on the PI) and <a href=\"https://docs.docker.com/engine/install/ubuntu/\" title=\"Installing Docker on Ubuntu\">install Docker within Ubuntu</a> on this beautiful device. If you have done so, you can connect your shared folders using NFS to the Ubuntu installation you can use the method that is described below.</p>\n<p>Okay, how is this done? Five years ago, I came a cross of a nice five-year-old (at that time) project on GitHub. This already made a docker container including Restic and Rclone. At the time It was not recently maintained (older Restic version, not build with the latest package) I decided to fork this project and update and enhance it. My GitHub repository can be found <a href=\"https://github.com/marc0janssen/restic-backup-helper\" title=\"Repository Restic Backup Helper\">here</a>. The pre-build docker images for ARM and AMD can be found <a href=\"https://hub.docker.com/repository/docker/marc0janssen/restic-backup-helper/general\" title=\"Docker Hub Images Restic Backup Helper\">here</a>.</p>\n<p>I recently added an option to set up a sync with your sync-folder, supported by your cloud provider. I will explain that later. First, we set up the container in Docker.</p>\n<p>Below you find a template docker-compose.yml file. This uses the stable build for the image. If you like the development tree, use the <code>marc0janssen/restic-backup-helper:develop</code> as an image reference.</p>\n<pre><code>version: '3'\n\nservices:\n  restic-remote:\n    container_name: restic-remote\n    image: marc0janssen/restic-backup-helper:latest\n    restart: always\n    hostname: supernode\n    cap_add:\n      - DAC_READ_SEARCH\n      - SYS_ADMIN\n    devices:\n      - /dev/fuse\n    environment:\n      - RESTIC_PASSWORD=YOUR_PASSWORD_HERE\n      - RESTIC_TAG=YOUR_TAGS_HERE\n      - RESTIC_FORGET_ARGS=--prune --keep-hourly 24 --keep-daily 7 --keep-weekly 5 --keep-monthly 12 --keep-yearly 10\n      - RESTIC_REPOSITORY=rclone:jottacloud:backups\n      - RESTIC_JOB_ARGS=--exclude-file /config/exclude_files.txt\n      - BACKUP_CRON=0 1,13 * * *\n      - BACKUP_ROOT_DIR=/volume1/data\n      - MAILX_RCPT=your_mail@here.tld\n      - MAILX_ON_ERROR=OFF\n      - CHECK_CRON=37 1 1 * *\n      - RCLONE_CONFIG=/config/rclone.conf\n      - SYNC_JOB_FILE=/config/sync_jobs.txt\n      - SYNC_JOB_ARGS=--exclude-from exclude_sync.txt\n      - SYNC_CRON=*/10 * * * *\n      - TZ=Europe/Amsterdam\n    volumes:\n      - /etc/localtime:/etc/localtime:ro\n      - /path/to/your/hooks:/hooks\n      - /path/to/your/log:/var/log\n      - /path/to/your/data:/data\n      - /path/to/your/config/:/config\n      - /path/to/your/config/msmtprc:/etc/msmtprc\n      - /volume1/data:/volume1/data\n</code></pre>\n<p>Set up the following tree for your installation:</p>\n<pre><code>./\nâ”œâ”€â”€ config\nâ”‚Â Â  â”œâ”€â”€ exclude_files.txt\nâ”‚Â Â  â”œâ”€â”€ exclude_sync.txt\nâ”‚Â Â  â”œâ”€â”€ include_files.txt\nâ”‚Â Â  â”œâ”€â”€ msmtprc\nâ”‚Â Â  â”œâ”€â”€ rclone.conf\nâ”‚Â Â  â””â”€â”€ sync_jobs.txt\nâ”œâ”€â”€ hooks\nâ”œâ”€â”€ log\nâ”‚Â Â  â”œâ”€â”€ backup-error-last.log\nâ”‚Â Â  â”œâ”€â”€ backup-last.log\nâ”‚Â Â  â”œâ”€â”€ check-error-last.log\nâ”‚Â Â  â”œâ”€â”€ check-last.log\nâ”‚Â Â  â””â”€â”€ cron.log\nâ””â”€â”€ scripts\n    â””â”€â”€ docker-compose.yml\n</code></pre>\n<ul>\n<li>\n<p>config</p>\n<ul>\n<li><code>exclude_files.txt</code> - files/folders to exclude from your Restic backups</li>\n<li><code>exclude_sync.txt</code> - files/folders to exclude from your Rclone bisync</li>\n<li><code>include_files.txt</code> - files/folders to include from your Restic backups</li>\n<li><code>msmtprc</code> - configuration file for the msmtp-client</li>\n<li><code>rclone.conf</code> - configuration file for your rclone client</li>\n<li><code>sync_jobs.txt</code> - configuration file with sync jobs for rclone</li>\n</ul>\n</li>\n<li>\n<p>hooks</p>\n<ul>\n<li><code>pre-backup.sh</code> - script started before backup</li>\n<li><code>post-backup.sh</code> - script started after backup</li>\n<li><code>pre-check.sh</code> - script started before checking the repository</li>\n<li><code>post-check.sh</code> - script started after checking the repository</li>\n<li><code>pre-sync.sh</code> - script started before sync of sync folder</li>\n<li><code>post-sync.sh</code> - script started after sync of sync folder</li>\n</ul>\n</li>\n<li>\n<p>log</p>\n<ul>\n<li><code>backup-error-last.log</code> - Most recent backup error log</li>\n<li><code>backup-last.log</code> - Most recent backup log</li>\n<li><code>check-error-last.log</code> - Most recent repository check error log</li>\n<li><code>check-last.log</code> - Most recent repository check log</li>\n<li><code>cron.log</code> - Active cron log</li>\n<li><code>sync-error-last.log</code> - Most recent sync error log</li>\n<li><code>sync-last.log</code> - Most recent sync log</li>\n</ul>\n</li>\n<li>\n<p>scripts</p>\n<ul>\n<li><code>docker-compose.yml</code> - Container Configuration file</li>\n</ul>\n</li>\n</ul>\n<p>The first thing to do is run create a rclone config file. I, personally, do this within Ubuntu on a Raspberry Pi, where I installed rclone. Run the follow command and follow its instructions:</p>\n<pre><code>rclone config\n</code></pre>\n<p>To choose the following option, <code>n) New remote</code>. Enter a name for your new remote. Since I use Jottacloud, I entered <code>Jottacloud</code>. A list of cloud providers is shown. Jottacloud is number <code>25</code>. Enter this number on the CLI. The next question is if you have an advanced configuration, for me, this answer is the default <code>no</code>. After this, you have to select an authentication type. Choose <code>1 Standard authentication</code>. Now you have to generate a <code>Personal login token</code>. This can be generated <a href=\"https://www.jottacloud.com/web/secure\" title=\"Generate a Personal login token\">here</a>. Paste this token in the CLI and press enter. The next question is if you use a non-standard device or mountpoint. For a backup is <code>n) No (default)</code> but if you want to use the sync option of this image I advise you to select <code>y) Yes</code> and pick the <code>Sync</code> mount point. For now, select <code>n) No (default)</code>. Confirm your config. Your new created <code>rclone.conf</code> can be found in:</p>\n<pre><code>~/.config/rclone/rclone.conf\n</code></pre>\n<p>Copy this file to the <code>/config/</code> directory of the tree shown above.</p>\n<p><strong>NOTE: If you plan to back up multiple nodes with their containers. And you decide to have a rclone and Restic package on your client desktop or laptop. And also connect to the repository, <em>ALWAYS</em> have a new separate rclone.conf file. Your token will get invalid if you connect with multiple nodes to use the same token.</strong></p>\n<p><strong>NOTE: Also make sure the rclone.conf file is writable for the restic-helper-container, since Rclone will update the expiration date for the token. If it fails to do so, your token will get invalid.</strong></p>\n<p>If the token gets invalid, you can update your token with:</p>\n<pre><code>rclone config reconnect jottacloud:\n</code></pre>\n<p>Where <code>jottacloud:</code> is the name of your remote.</p>\n<p>The next stop is to create a configuration file for the mail option in the container. This file should look like the following example.</p>\n<pre><code>account default\nfrom _mail_from@here.tld_\nhost _smtp_host.here.tld_\nport 587\ntls on\nauth on\nuser _login@here.tld_\npassword _Pa55w0rd_h3r3_\n</code></pre>\n<p>Next stop is to create a configuration file for the files you would rather not back up from your source. A basic file for a Synology would be something like the following example. Of course, you can add your exclusions to the file <code>exclude_files.txt</code>.</p>\n<pre><code>*@eaDir*\n.DS_Store\n**/#recycle\n</code></pre>\n<p>Setting the <code>BACKUP_ROOT_DIR</code> environment variable in the <code>docker-compose.yml</code> file to a shared directory of your Synology would only back up that directory, <code>ex.: BACKUP_ROOT_DIR=/volume1/data</code>. That is probably not what you want. You most likely want to back up more shared directories. If you choose <code>BACKUP_ROOT_DIR=/volume1</code> to do so, I would back up <strong><em>ALL</em></strong> the stuff in <code>/volume1</code> and that is also not what we want.</p>\n<p>To come around this, you leave <code>BACKUP_ROOT_DIR=</code> empty and set up <code>include_files.txt</code>. This file holds the files and directories you would like to back up.</p>\n<pre><code>/volume1/content\n/volume1/docker\n/volume1/documents\n/volume1/homes\n/volume1/homevideo\n/volume1/inbox\n/volume1/logging\n/volume1/photo\n/volume1/progrmamming\n/volume1/software\n</code></pre>\n<p>Edit your <code>docker-compose.yml</code> with the following line.</p>\n<pre><code>- RESTIC_JOB_ARGS=--exclude-file /config/exclude_files.txt --files-from /config/include_files.txt\n</code></pre>\n<p>Now set up the rest of the <code>docker-compose.yml</code> file and start your container. The following command will get you started to start the container.</p>\n<pre><code>docker-compose -p &quot;restic-backup-helper&quot; -f /path/to/your/docker-compose.yml up -d --remove-orphans\n</code></pre>\n<p>Of course, if you use Portainer. You can create a stack and past the content of the <code>docker-compose.yml</code> in the editor and start your container like so.</p>\n<p><a href=\"https://www.portainer.io\" title=\"Home of Portainer\">Portainer</a> is an open-source container management platform offering a user-friendly graphical interface for managing Docker and Kubernetes environments. It simplifies deployment, monitoring, and maintenance of containerised applications, providing a unified dashboard for multiple environments and supporting various container technologies like Docker Swarm and Azure ACI.</p>\n<p>If you set up the container correctly, you would see something like this.</p>\n<pre><code>ğŸŒŸ *************************************************\nğŸŒŸ ***           Restic Backup Helper            ***\nğŸŒŸ *************************************************\nğŸš€ Starting container Restic Backup Helper 'kish' on: 2025-03-25 19:03:16...\nğŸ“¦ Release: 1.6.52-0.17.3-dev\nğŸ” Checking repository status...\nâ„¹ï¸ Repository check status: 0\nâœ… Restic repository 'rclone:jottacloud:backups' attached and accessible.\nâ° Setting up backup cron job with expression: 30 17 * * 6\nâ° Setting up sync cron job with expression: */5 * * * *\nâœ… Container started successfully.\n</code></pre>\n<p>In this example, the backup will be executed every Saturday at 17:30. The repository can be found on <code>rclone:jottacloud:backups</code>. This will back it up to the archive part of Jottacloud.</p>\n<p>If there is a successful backup, you will see output like this.</p>\n<pre><code>â„¹ï¸ Pre-backup script not found...\nğŸ”„ Starting Backup at 2025-03-25 17:30:00\nğŸ“¦ Performing backup of /volume1/inbox...\nâœ… Backup Successful\nğŸ Finished backup at 2025-03-25 17:30:38 after 0m 38s\nâ„¹ï¸ Post-backup script not found...\n</code></pre>\n<p>So your backup is nice and running. In the example above, there a second CRON with runs every 5 minutes. This is the sync folder the connects to the Jottacloud synchronisation part of the cloud.</p>\n<p>The setting this up runs <code>rclone config</code> again, runs through the same steps as shown above but <strong>if the question comes for a non-standard device or mountpoint. Choose YES</strong> and choose the option <code>Sync</code>. This gives Rclone access to the synchronisation part of Jottacloud. The advantage is that whatever you sync from your Synology to Jottacloud, the Jottacloud software will pick this up and sync this to your other devices. If you have the Jottacloud software installed.</p>\n<p><strong>Donâ€™t forget to pick a new TOKEN, and after you generate that new config file (with two remotes) copy it to <code>/config/</code> of your container. Also pick a new name for that remote like <code>jottasync</code>.</strong></p>\n<p>Set up the following environment variables in the <code>docker-compose.yml</code> file.</p>\n<pre><code>      - SYNC_JOB_FILE=/config/sync_jobs.txt\n      - SYNC_JOB_ARGS=--exclude-from exclude_sync.txt\n      - SYNC_CRON=*/10 * * * *\n</code></pre>\n<p>The <code>sync_jobs.txt</code> should contain something like this.</p>\n<pre><code># SYNC JOBS\n# SOURCE;DESTINATION\n\n/volume1/inbox;jottasync:/inbox\n/volume1/photo;jottasync:/photo\n/volume1/documents;jottasync:/documents\n</code></pre>\n<p>It is the source and destination of the data you like to sync.</p>\n<p>The <code>exclude_sync.txt</code> should contain the files and directories you donâ€™t like to sync.</p>\n<pre><code># Exclude system directories\n@eaDir/**\n\\#recycle/**\n\n# Exclude macOS system files\n.DS_Store\n</code></pre>\n<p>And set your <code>SYNC_CRON</code> with the desired interval of your sync.</p>\n<p>If all is well set up, you will see output for the <strong>first run only</strong> like the following example.</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"><code class=\"language-bash\" data-lang=\"bash\">ğŸ”€ Performing sync of /volume1/inbox &lt;-&gt; jottasync:/inbox...\nâŒ Sync Failed with Status <span style=\"color:#ae81ff\">2</span>\nğŸš¨ Starting recovery procedure...\nğŸ”„ Step 1: Updating from /volume1/inbox to jottasync:/inbox\nğŸ”„ Step 2: Updating from jottasync:/inbox to /volume1/inbox\nğŸ”„ Step 3: Performing full resync between /volume1/inbox and jottasync:/inbox\nâœ… Recovery Successful - All steps completed\nğŸ“Š Recovery Exitcode Summary: Sourceâ†’Dest<span style=\"color:#f92672\">=</span>0, Destâ†’Source<span style=\"color:#f92672\">=</span>0, Resync<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">0</span>\nğŸ Finished sync at 2025-03-25 19:25:00 after 0m 20s\nğŸ”€ Performing sync of /volume1/photo &lt;-&gt; jottasync:/photo...\nâŒ Sync Failed with Status <span style=\"color:#ae81ff\">2</span>\nğŸš¨ Starting recovery procedure...\nğŸ”„ Step 1: Updating from /volume1/photo to jottasync:/photo\nğŸ”„ Step 2: Updating from jottasync:/photo to /volume1/photo\nğŸ”„ Step 3: Performing full resync between /volume1/photo and jottasync:/photo\nâœ… Recovery Successful - All steps completed\nğŸ“Š Recovery Exitcode Summary: Sourceâ†’Dest<span style=\"color:#f92672\">=</span>0, Destâ†’Source<span style=\"color:#f92672\">=</span>0, Resync<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">0</span>\nğŸ Finished sync at 2025-03-25 19:25:20 after 0m 20s\nğŸ”€ Performing sync of /volume1/documents &lt;-&gt; jottasync:/documents...\nâŒ Sync Failed with Status <span style=\"color:#ae81ff\">2</span>\nğŸš¨ Starting recovery procedure...\nğŸ”„ Step 1: Updating from /volume1/documents to jottasync:/documents\nğŸ”„ Step 2: Updating from jottasync:/documents to /volume1/documents\nğŸ”„ Step 3: Performing full resync between /volume1/documents and jottasync:/documents\nâœ… Recovery Successful - All steps completed\nğŸ“Š Recovery Exitcode Summary: Sourceâ†’Dest<span style=\"color:#f92672\">=</span>0, Destâ†’Source<span style=\"color:#f92672\">=</span>0, Resync<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">0</span>\nğŸ Finished sync at 2025-03-25 19:25:40 after 0m 20s\n</code></pre></div><p>The first sync will â€œfailâ€ because the caches are not yet up to date. The script will handle this correctly for the second run of your sync. Like you see below.</p>\n<p>If all is well set up, you will see output like the following example.</p>\n<pre><code>â„¹ï¸ Pre-sync script not found...\nğŸ”€ Performing sync of /volume1/inbox &lt;-&gt; jottasync:/inbox...\nâœ… Sync Successful\nğŸ Finished sync at 2025-03-25 19:30:11 after 0m 11s\nğŸ”€ Performing sync of /volume1/photo &lt;-&gt; jottasync:/photo...\nâœ… Sync Successful\nğŸ Finished sync at 2025-03-25 19:30:24 after 0m 24s\nğŸ”€ Performing sync of /volume1/documents &lt;-&gt; jottasync:/documents...\nâœ… Sync Successful\nğŸ Finished sync at 2025-03-25 19:30:33 after 0m 33s\nâ„¹ï¸ Post-sync script not found...\n</code></pre>\n<p><strong>Note: The default for Rclone bisync is that is 50% more difference between the source and the destination are found, Rclone will fail and exit. The script syncing your data will then try to copy all data back from the source to the destination and from destination to source. This will look like all syncs did not work, but actually, it is a safety measure. If you donâ€™t want this, add <code>--force</code> to your <code>SYNC_JOB_ARGS</code>.</strong></p>\n<p>If this blog was any help to you, give away a free Lucky Four-Leaf Clover \n    <button class=\"tinylytics_kudos\" data-path=\"/2025/03/25/escaping-usa-tech-bye-bye.html\"></button></p>\n<p>ğŸ“âœï¸</p>\n",
				"content_text": "I recently got more concerned about what is happening in the US since a certain president He-Who-Must-Not-Be-Named and what this does in the world and my personal life. I was already on a streak, cutting loose from BIG-TECH social media like METAâ€™s â€œsuiteâ€ and Google. This was also for privacy concerns. \n\nI got concern about having all my data, partly client side encrypted but partly not, stored in the USA with Dropbox. I really liked Dropbox because it has a great adoption rate in other apps and products. But I did not like it that all my data was in the US. And with the recent presidency of He-Who-Must-Not-Be-Named, I got more concerned about my data with Dropbox.\n\nFinding a European alternative with the same level of integration in software and services as Dropbox is a challenging task. Not that these services are inferior, but integrating them can sometimes be difficult. My goal was to achieve incremental backups of my shared folders on a Synology NAS and have the sync folder from my cloud storage synchronised with the Synology NAS.\n\nThis would be typically done with Hyperbackup for incremental backups and Cloud Sync for your sync folder. Most of the services listed there are either US-based, expensive, no up to the job, etc. A least for me.\n\nAfter looking around and comparing European-based cloud providers, I got my eye on [Jottacloud](https://www.jottacloud.com/ \"Home Jottacloud\"). This is a Norwegian cloud provider which is fast, in Europe of course, nice supporting clients for iOS and macOS (Yes, also US BIG-TECH, but I love Apple, there is nothing that compares with Apple Products. And I think Apple is doing a better job on privacy), has a great deal on â€œunlimitedâ€ storage space. The only downside Jottacloud has, they donâ€™t (like Dropbox) have zero-knowledge encryption. If they had it, would enhance privacy a lotâ€¦ But since they are in Europe with strict privacy laws, I took that as a step forward compared to the US-based Dropbox. Plus, the unlimited storage deal at JottaCloud is the same price as the 2Â TB deal I had at Dropbox. `Just a hint: if you look around on the internet you can find Jottacloud deals. I got a deal with 15% off for the first year.`\n\nJottacloud also runs on 100% renewable energy, if you care for such a thing (I do).\n\nJottacloud is not one of the default services supported by Synology in their backup suite and other software. This is a shame, but there is a way to still create nice incremental backups of your shared folders to Jottacloud directly from your Synology.\n\nThis is achieved using a brilliant free application called Restic. [Restic](https://restic.readthedocs.io/en/stable/ \"Read The Docs Restic\") is a free, open-source backup tool offering secure, efficient, and flexible data protection. It supports multiple storage backends, including cloud services, and features encryption, deduplication, and compression. Restic is user-friendly and suitable for various operating systems, making it ideal for both personal and professional backup needs.\n\nTo access Jottacloud with Restic, I used Rclone. [Rclone](https://rclone.org \"The home of Rclone\") is a versatile command-line tool for managing cloud storage, offering features such as file syncing, encryption, and compression. It supports over 70 cloud services, including Jottacloud, Google Drive, and Amazon S3, and is ideal for automating backups and data transfers across various platforms with ease and reliability.\n\nRclone and Restic are not natively available on your Synology. There are scripts and methods to install them via the NAS shell. However, I am a fan of Docker. Since I own a Synology that supports Docker, which Synology refers to as \"Container Manager\" in their DSM, I implemented Restic and Rclone using Docker. \n\n[Docker](https://www.docker.com \"The home of Docker\") is a containerisation platform that enables efficient deployment and management of applications. It allows developers to package software into portable containers, ensuring consistent performance across environments. Docker streamlines development, testing, and deployment processes, enhancing flexibility and scalability for a wide range of applications and services.\n\nIf your Synology does not support Docker, you can still achieve what is described below by using a [Raspberry Pi](https://www.raspberrypi.com \"Home of the Raspberry PI (Not the cakes though)\"). You can in install your favourite OS (mine is Ubuntu on the PI) and [install Docker within Ubuntu](https://docs.docker.com/engine/install/ubuntu/ \"Installing Docker on Ubuntu\") on this beautiful device. If you have done so, you can connect your shared folders using NFS to the Ubuntu installation you can use the method that is described below.\n\nOkay, how is this done? Five years ago, I came a cross of a nice five-year-old (at that time) project on GitHub. This already made a docker container including Restic and Rclone. At the time It was not recently maintained (older Restic version, not build with the latest package) I decided to fork this project and update and enhance it. My GitHub repository can be found [here](https://github.com/marc0janssen/restic-backup-helper \"Repository Restic Backup Helper\"). The pre-build docker images for ARM and AMD can be found [here](https://hub.docker.com/repository/docker/marc0janssen/restic-backup-helper/general \"Docker Hub Images Restic Backup Helper\").\n\nI recently added an option to set up a sync with your sync-folder, supported by your cloud provider. I will explain that later. First, we set up the container in Docker.\n\nBelow you find a template docker-compose.yml file. This uses the stable build for the image. If you like the development tree, use the `marc0janssen/restic-backup-helper:develop` as an image reference.\n\n\tversion: '3'\n\t\n\tservices:\n\t  restic-remote:\n\t    container_name: restic-remote\n\t    image: marc0janssen/restic-backup-helper:latest\n\t    restart: always\n\t    hostname: supernode\n\t    cap_add:\n\t      - DAC_READ_SEARCH\n\t      - SYS_ADMIN\n\t    devices:\n\t      - /dev/fuse\n\t    environment:\n\t      - RESTIC_PASSWORD=YOUR_PASSWORD_HERE\n\t      - RESTIC_TAG=YOUR_TAGS_HERE\n\t      - RESTIC_FORGET_ARGS=--prune --keep-hourly 24 --keep-daily 7 --keep-weekly 5 --keep-monthly 12 --keep-yearly 10\n\t      - RESTIC_REPOSITORY=rclone:jottacloud:backups\n\t      - RESTIC_JOB_ARGS=--exclude-file /config/exclude_files.txt\n\t      - BACKUP_CRON=0 1,13 * * *\n\t      - BACKUP_ROOT_DIR=/volume1/data\n\t      - MAILX_RCPT=your_mail@here.tld\n\t      - MAILX_ON_ERROR=OFF\n\t      - CHECK_CRON=37 1 1 * *\n\t      - RCLONE_CONFIG=/config/rclone.conf\n\t      - SYNC_JOB_FILE=/config/sync_jobs.txt\n\t      - SYNC_JOB_ARGS=--exclude-from exclude_sync.txt\n\t      - SYNC_CRON=*/10 * * * *\n\t      - TZ=Europe/Amsterdam\n\t    volumes:\n\t      - /etc/localtime:/etc/localtime:ro\n\t      - /path/to/your/hooks:/hooks\n\t      - /path/to/your/log:/var/log\n\t      - /path/to/your/data:/data\n\t      - /path/to/your/config/:/config\n\t      - /path/to/your/config/msmtprc:/etc/msmtprc\n\t      - /volume1/data:/volume1/data\n\t\n\nSet up the following tree for your installation:\n\n\t./\n\tâ”œâ”€â”€ config\n\tâ”‚Â Â  â”œâ”€â”€ exclude_files.txt\n\tâ”‚Â Â  â”œâ”€â”€ exclude_sync.txt\n\tâ”‚Â Â  â”œâ”€â”€ include_files.txt\n\tâ”‚Â Â  â”œâ”€â”€ msmtprc\n\tâ”‚Â Â  â”œâ”€â”€ rclone.conf\n\tâ”‚Â Â  â””â”€â”€ sync_jobs.txt\n\tâ”œâ”€â”€ hooks\n\tâ”œâ”€â”€ log\n\tâ”‚Â Â  â”œâ”€â”€ backup-error-last.log\n\tâ”‚Â Â  â”œâ”€â”€ backup-last.log\n\tâ”‚Â Â  â”œâ”€â”€ check-error-last.log\n\tâ”‚Â Â  â”œâ”€â”€ check-last.log\n\tâ”‚Â Â  â””â”€â”€ cron.log\n\tâ””â”€â”€ scripts\n\t    â””â”€â”€ docker-compose.yml\n\n* config\n\t* `exclude_files.txt` - files/folders to exclude from your Restic backups\n\t* `exclude_sync.txt` - files/folders to exclude from your Rclone bisync \n\t* `include_files.txt` - files/folders to include from your Restic backups\n\t* `msmtprc` - configuration file for the msmtp-client\n\t* `rclone.conf` - configuration file for your rclone client\n\t* `sync_jobs.txt` - configuration file with sync jobs for rclone  \n\n* hooks\n\t* `pre-backup.sh` - script started before backup\n\t* `post-backup.sh` - script started after backup\n\t* `pre-check.sh` - script started before checking the repository\n\t* `post-check.sh` - script started after checking the repository\n\t* `pre-sync.sh` - script started before sync of sync folder\n\t* `post-sync.sh` - script started after sync of sync folder  \n\n* log\n\t*  `backup-error-last.log` - Most recent backup error log\n\t* `backup-last.log` - Most recent backup log\n\t* `check-error-last.log` - Most recent repository check error log\n\t* `check-last.log` - Most recent repository check log\n\t* `cron.log` - Active cron log\n\t* `sync-error-last.log` - Most recent sync error log\n\t* `sync-last.log` - Most recent sync log  \n\n* scripts\n\t* `docker-compose.yml` - Container Configuration file\n\nThe first thing to do is run create a rclone config file. I, personally, do this within Ubuntu on a Raspberry Pi, where I installed rclone. Run the follow command and follow its instructions:\n\n\trclone config\n\nTo choose the following option, `n) New remote`. Enter a name for your new remote. Since I use Jottacloud, I entered `Jottacloud`. A list of cloud providers is shown. Jottacloud is number `25`. Enter this number on the CLI. The next question is if you have an advanced configuration, for me, this answer is the default `no`. After this, you have to select an authentication type. Choose `1 Standard authentication`. Now you have to generate a `Personal login token`. This can be generated [here](https://www.jottacloud.com/web/secure \"Generate a Personal login token\"). Paste this token in the CLI and press enter. The next question is if you use a non-standard device or mountpoint. For a backup is `n) No (default)` but if you want to use the sync option of this image I advise you to select `y) Yes` and pick the `Sync` mount point. For now, select `n) No (default)`. Confirm your config. Your new created `rclone.conf` can be found in:\n\n\t~/.config/rclone/rclone.conf\n\nCopy this file to the `/config/` directory of the tree shown above.\n\n**NOTE: If you plan to back up multiple nodes with their containers. And you decide to have a rclone and Restic package on your client desktop or laptop. And also connect to the repository, _ALWAYS_ have a new separate rclone.conf file. Your token will get invalid if you connect with multiple nodes to use the same token.**\n\n**NOTE: Also make sure the rclone.conf file is writable for the restic-helper-container, since Rclone will update the expiration date for the token. If it fails to do so, your token will get invalid.** \n\nIf the token gets invalid, you can update your token with:\n\n\trclone config reconnect jottacloud:\n\nWhere `jottacloud:` is the name of your remote.\n\nThe next stop is to create a configuration file for the mail option in the container. This file should look like the following example.\n\n\taccount default\n\tfrom _mail_from@here.tld_\n\thost _smtp_host.here.tld_\n\tport 587\n\ttls on\n\tauth on\n\tuser _login@here.tld_\n\tpassword _Pa55w0rd_h3r3_\n\nNext stop is to create a configuration file for the files you would rather not back up from your source. A basic file for a Synology would be something like the following example. Of course, you can add your exclusions to the file `exclude_files.txt`.\n\n\t*@eaDir*\n\t.DS_Store\n\t**/#recycle\n\nSetting the `BACKUP_ROOT_DIR` environment variable in the `docker-compose.yml` file to a shared directory of your Synology would only back up that directory, `ex.: BACKUP_ROOT_DIR=/volume1/data`. That is probably not what you want. You most likely want to back up more shared directories. If you choose `BACKUP_ROOT_DIR=/volume1` to do so, I would back up **_ALL_** the stuff in `/volume1` and that is also not what we want.\n\nTo come around this, you leave `BACKUP_ROOT_DIR=` empty and set up `include_files.txt`. This file holds the files and directories you would like to back up.\n\n\t/volume1/content\n\t/volume1/docker\n\t/volume1/documents\n\t/volume1/homes\n\t/volume1/homevideo\n\t/volume1/inbox\n\t/volume1/logging\n\t/volume1/photo\n\t/volume1/progrmamming\n\t/volume1/software\n\nEdit your `docker-compose.yml` with the following line.\n\n\t- RESTIC_JOB_ARGS=--exclude-file /config/exclude_files.txt --files-from /config/include_files.txt\n\nNow set up the rest of the `docker-compose.yml` file and start your container. The following command will get you started to start the container.\n\n\tdocker-compose -p \"restic-backup-helper\" -f /path/to/your/docker-compose.yml up -d --remove-orphans\n\nOf course, if you use Portainer. You can create a stack and past the content of the `docker-compose.yml` in the editor and start your container like so.\n\n[Portainer](https://www.portainer.io \"Home of Portainer\") is an open-source container management platform offering a user-friendly graphical interface for managing Docker and Kubernetes environments. It simplifies deployment, monitoring, and maintenance of containerised applications, providing a unified dashboard for multiple environments and supporting various container technologies like Docker Swarm and Azure ACI.\n\nIf you set up the container correctly, you would see something like this.\n\n\tğŸŒŸ *************************************************\n\tğŸŒŸ ***           Restic Backup Helper            ***\n\tğŸŒŸ *************************************************\n\tğŸš€ Starting container Restic Backup Helper 'kish' on: 2025-03-25 19:03:16...\n\tğŸ“¦ Release: 1.6.52-0.17.3-dev\n\tğŸ” Checking repository status...\n\tâ„¹ï¸ Repository check status: 0\n\tâœ… Restic repository 'rclone:jottacloud:backups' attached and accessible.\n\tâ° Setting up backup cron job with expression: 30 17 * * 6\n\tâ° Setting up sync cron job with expression: */5 * * * *\n\tâœ… Container started successfully.\n\nIn this example, the backup will be executed every Saturday at 17:30. The repository can be found on `rclone:jottacloud:backups`. This will back it up to the archive part of Jottacloud. \n\nIf there is a successful backup, you will see output like this.\n\n\tâ„¹ï¸ Pre-backup script not found...\n\tğŸ”„ Starting Backup at 2025-03-25 17:30:00\n\tğŸ“¦ Performing backup of /volume1/inbox...\n\tâœ… Backup Successful\n\tğŸ Finished backup at 2025-03-25 17:30:38 after 0m 38s\n\tâ„¹ï¸ Post-backup script not found...\n\nSo your backup is nice and running. In the example above, there a second CRON with runs every 5 minutes. This is the sync folder the connects to the Jottacloud synchronisation part of the cloud. \n\nThe setting this up runs `rclone config` again, runs through the same steps as shown above but **if the question comes for a non-standard device or mountpoint. Choose YES** and choose the option `Sync`. This gives Rclone access to the synchronisation part of Jottacloud. The advantage is that whatever you sync from your Synology to Jottacloud, the Jottacloud software will pick this up and sync this to your other devices. If you have the Jottacloud software installed. \n\n**Donâ€™t forget to pick a new TOKEN, and after you generate that new config file (with two remotes) copy it to `/config/` of your container. Also pick a new name for that remote like `jottasync`.** \n\nSet up the following environment variables in the `docker-compose.yml` file.\n\n\t      - SYNC_JOB_FILE=/config/sync_jobs.txt\n\t      - SYNC_JOB_ARGS=--exclude-from exclude_sync.txt\n\t      - SYNC_CRON=*/10 * * * *\n\nThe `sync_jobs.txt` should contain something like this.\n\n\t# SYNC JOBS\n\t# SOURCE;DESTINATION\n\t\n\t/volume1/inbox;jottasync:/inbox\n\t/volume1/photo;jottasync:/photo\n\t/volume1/documents;jottasync:/documents\n\nIt is the source and destination of the data you like to sync.\n\nThe `exclude_sync.txt` should contain the files and directories you donâ€™t like to sync.\n\n\t# Exclude system directories\n\t@eaDir/**\n\t\\#recycle/**\n\t\n\t# Exclude macOS system files\n\t.DS_Store\n\t\n\nAnd set your `SYNC_CRON` with the desired interval of your sync.\n\nIf all is well set up, you will see output for the **first run only** like the following example.\n\n```bash\nğŸ”€ Performing sync of /volume1/inbox <-> jottasync:/inbox...\nâŒ Sync Failed with Status 2\nğŸš¨ Starting recovery procedure...\nğŸ”„ Step 1: Updating from /volume1/inbox to jottasync:/inbox\nğŸ”„ Step 2: Updating from jottasync:/inbox to /volume1/inbox\nğŸ”„ Step 3: Performing full resync between /volume1/inbox and jottasync:/inbox\nâœ… Recovery Successful - All steps completed\nğŸ“Š Recovery Exitcode Summary: Sourceâ†’Dest=0, Destâ†’Source=0, Resync=0\nğŸ Finished sync at 2025-03-25 19:25:00 after 0m 20s\nğŸ”€ Performing sync of /volume1/photo <-> jottasync:/photo...\nâŒ Sync Failed with Status 2\nğŸš¨ Starting recovery procedure...\nğŸ”„ Step 1: Updating from /volume1/photo to jottasync:/photo\nğŸ”„ Step 2: Updating from jottasync:/photo to /volume1/photo\nğŸ”„ Step 3: Performing full resync between /volume1/photo and jottasync:/photo\nâœ… Recovery Successful - All steps completed\nğŸ“Š Recovery Exitcode Summary: Sourceâ†’Dest=0, Destâ†’Source=0, Resync=0\nğŸ Finished sync at 2025-03-25 19:25:20 after 0m 20s\nğŸ”€ Performing sync of /volume1/documents <-> jottasync:/documents...\nâŒ Sync Failed with Status 2\nğŸš¨ Starting recovery procedure...\nğŸ”„ Step 1: Updating from /volume1/documents to jottasync:/documents\nğŸ”„ Step 2: Updating from jottasync:/documents to /volume1/documents\nğŸ”„ Step 3: Performing full resync between /volume1/documents and jottasync:/documents\nâœ… Recovery Successful - All steps completed\nğŸ“Š Recovery Exitcode Summary: Sourceâ†’Dest=0, Destâ†’Source=0, Resync=0\nğŸ Finished sync at 2025-03-25 19:25:40 after 0m 20s\n```\nThe first sync will â€œfailâ€ because the caches are not yet up to date. The script will handle this correctly for the second run of your sync. Like you see below.\n\nIf all is well set up, you will see output like the following example.\n\n\tâ„¹ï¸ Pre-sync script not found...\n\tğŸ”€ Performing sync of /volume1/inbox <-> jottasync:/inbox...\n\tâœ… Sync Successful\n\tğŸ Finished sync at 2025-03-25 19:30:11 after 0m 11s\n\tğŸ”€ Performing sync of /volume1/photo <-> jottasync:/photo...\n\tâœ… Sync Successful\n\tğŸ Finished sync at 2025-03-25 19:30:24 after 0m 24s\n\tğŸ”€ Performing sync of /volume1/documents <-> jottasync:/documents...\n\tâœ… Sync Successful\n\tğŸ Finished sync at 2025-03-25 19:30:33 after 0m 33s\n\tâ„¹ï¸ Post-sync script not found...\n\n**Note: The default for Rclone bisync is that is 50% more difference between the source and the destination are found, Rclone will fail and exit. The script syncing your data will then try to copy all data back from the source to the destination and from destination to source. This will look like all syncs did not work, but actually, it is a safety measure. If you donâ€™t want this, add `--force` to your `SYNC_JOB_ARGS`.**\n\nIf this blog was any help to you, give away a free Lucky Four-Leaf Clover {{< tinykudos >}}\n\nğŸ“âœï¸\n\n",
				"date_published": "2025-03-25T12:50:36+01:00",
				"url": "https://micro.mjanssen.nl/2025/03/25/escaping-usa-tech-bye-bye.html",
				"tags": ["Technology","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2025/03/20/does-anyone-know-if-there.html",
				
				"content_html": "<p>Does anyone know if there is a good alternative to Dropbox on the European continent?</p>\n",
				"content_text": "Does anyone know if there is a good alternative to Dropbox on the European continent?\n",
				"date_published": "2025-03-20T15:46:11+01:00",
				"url": "https://micro.mjanssen.nl/2025/03/20/does-anyone-know-if-there.html",
				"tags": ["Microposts"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2025/03/20/last-day-of-the-week.html",
				
				"content_html": "<p>â˜€ï¸Last day of the week&hellip;. A nice workout on the end of the day&hellip;. Hello weekend, here I come&hellip;..</p>\n",
				"content_text": "â˜€ï¸Last day of the week.... A nice workout on the end of the day.... Hello weekend, here I come.....\n",
				"date_published": "2025-03-20T08:51:16+01:00",
				"url": "https://micro.mjanssen.nl/2025/03/20/last-day-of-the-week.html",
				"tags": ["Microposts"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2025/03/19/setting-up-wireguard-on-your.html",
				"title": "ğŸ›œSetting up Wireguard on Your Ubiquiti Edge Router",
				"content_html": "<p>I aimed to create a VPN router using my Ubiquiti Edge Router ER-12 and utilise the configuration files from NordVPN. Initially, I attempted this with OpenVPN configuration files, which worked flawlessly, but unfortunately, OpenVPN resulted in poor throughput. (I have written another blog post about setting this up with OpenVPN if you need it, but I recommend using WireGuard instead.)</p>\n<p>NordVPN&rsquo;s implementation of WireGuard is known as NordLynx. However, NordVPN does not make these profiles easily accessible like Mullvad VPN does. On the NordVPN website, only OpenVPN configurations are readily available for download.</p>\n<p>To obtain the NordLynx configuration files, I discovered two methods online.</p>\n<ol>\n<li>One approach is to use the method described by Daniel Rosenberg. You can find more details in his article on using WireGuard with NordVPN on an EdgeRouter <a href=\"https://medium.com/@daniel-rosenberg/how-to-selectively-tunnel-an-apple-tv-or-whatever-via-nordvpn-over-wireguard-using-an-edgerouter-df77a8afcac2\" title=\"The Daniel Rosenberg Method\">here</a>.</li>\n<li>The other method I found is a more practical solution from â€œMyShittyCodeâ€, which provides a straightforward script to extract WireGuard configurations. You can read about it <a href=\"https://myshittycode.com/2024/06/08/nordvpn-extracting-wireguard-configuration/\" title=\"The MyShityCode Method\">here</a>.</li>\n</ol>\n<p>I initially used the Daniel Rosenberg method in a Linux VM on my MacBook, which worked, but after discovering the second option from MyShittyCode, I found their script to be quite useful and decided to modify it slightly, as you can see below.</p>\n<p>The primary step in the MyShittyCode method involves setting up NordVPN to generate an ACCESS TOKEN for use in the script. This is relatively straightforward; simply follow the steps outlined in <a href=\"https://myshittycode.com/2024/06/08/nordvpn-extracting-wireguard-configuration/\" title=\"The MyShittyCode Method\">the original blog post</a>.</p>\n<p><strong>What You Need to Set in the Script</strong></p>\n<p>To use the script, you need to configure the following variables:</p>\n<pre><code># --- Configuration Variables ---\nACCESS_TOKEN=&quot;**YOUR TOKEN HERE!!**&quot;\nTOTAL_CONFIGS=1\nDNS_SERVER=&quot;103.86.96.100&quot;\nCOUNTRY_NAME=&quot;Netherlands&quot;\n</code></pre>\n<ul>\n<li>ACCESS_TOKEN: This can be obtained by following the steps in the original post.</li>\n<li>TOTAL_CONFIGS: You can set this to any number of configurations you wish to generate.</li>\n<li>DNS_SERVER: You can use any DNS server, but to avoid DNS leak complaints from NordVPN, use 103.86.96.100 or 103.86.99.100.</li>\n<li>COUNTRY_NAME: Set this to any country where NordVPN has endpoints; you might prefer to use your current location.</li>\n</ul>\n<pre tabindex=\"0\"><code>\t#!/usr/bin/env bash\n\t\n\t# NordVPN WireGuard Configuration Generator\n\t# Checks prerequisites and generates WireGuard configuration files.\n\t\n\t# --- Configuration Variables ---\n\tACCESS_TOKEN=&quot;&lt;&lt;YOUR TOKEN HERE!!&gt;&gt;&quot;\n\tTOTAL_CONFIGS=1\n\tDNS_SERVER=&quot;103.86.96.100&quot;\n\tCOUNTRY_NAME=&quot;Netherlands&quot;\n\t\n\t# --- Functions for Prerequisite Checks ---\n\tcheck_command() {\n\t  if ! command -v &quot;$1&quot; &gt;/dev/null 2&gt;&amp;1; then\n\t    echo &quot;âŒ ERROR: Required command '$1' is not installed.&quot;\n\t    MISSING_DEPENDENCIES=true\n\t  else\n\t    echo &quot;âœ… '$1' is installed.&quot;\n\t  fi\n\t}\n\t\n\tcheck_internet_connection() {\n\t  if ! curl -s --head https://api.nordvpn.com &gt;/dev/null; then\n\t    echo &quot;âŒ ERROR: Unable to connect to NordVPN API. Please check your internet connection.&quot;\n\t    exit 1\n\t  else\n\t    echo &quot;âœ… Internet connection is working.&quot;\n\t  fi\n\t}\n\t\n\tcheck_access_token() {\n\t  RESPONSE=$(curl -s -u token:&quot;$ACCESS_TOKEN&quot; &quot;https://api.nordvpn.com/v1/users/services/credentials&quot;)\n\t  if [[ $(echo &quot;$RESPONSE&quot; | jq -r '.nordlynx_private_key') == &quot;null&quot; ]]; then\n\t    echo &quot;âŒ ERROR: Invalid or expired ACCESS_TOKEN.&quot;\n\t    exit 1\n\t  else\n\t    echo &quot;âœ… ACCESS_TOKEN is valid.&quot;\n\t  fi\n\t}\n\t\n\t# --- Perform Prerequisite Checks ---\n\techo &quot;ğŸ” Checking prerequisites...&quot;\n\tMISSING_DEPENDENCIES=false\n\t\n\tcheck_command curl\n\tcheck_command jq\n\t\n\tif [ &quot;$MISSING_DEPENDENCIES&quot; = true ]; then\n\t  echo &quot;ğŸš¨ Please install the missing dependencies before running this script again.&quot;\n\t  exit 1\n\tfi\n\t\n\tcheck_internet_connection\n\tcheck_access_token\n\t\n\techo &quot;ğŸš€ All prerequisites satisfied. Proceeding...&quot;\n\t\n\t# --- Fetch Country ID ---\n\tCOUNTRY_ID=$(curl -s &quot;https://api.nordvpn.com/v1/servers/countries&quot; | \\\n\tjq -r &quot;.[] | select(.name==\\&quot;$COUNTRY_NAME\\&quot;) | .id&quot;)\n\t\n\tif [ -z &quot;$COUNTRY_ID&quot; ]; then\n\t  echo &quot;âŒ ERROR: Country '$COUNTRY_NAME' not found or invalid.&quot;\n\t  exit 1\n\tfi\n\t\n\t# --- Fetch Private Key ---\n\tPRIVATE_KEY=$(curl -s -u token:&quot;$ACCESS_TOKEN&quot; \\\n\t&quot;https://api.nordvpn.com/v1/users/services/credentials&quot; | jq -r '.nordlynx_private_key')\n\t\n\t# --- Fetch Recommended Servers and Generate Configurations ---\n\tSERVER_RECOMMENDATIONS_URL=&quot;https://api.nordvpn.com/v1/servers/recommendations?&amp;filters\\[country_id\\]=$COUNTRY_ID&amp;filters\\[servers_technologies\\]\\[identifier\\]=wireguard_udp&amp;limit=$TOTAL_CONFIGS&quot;\n\t\n\tcurl -s &quot;$SERVER_RECOMMENDATIONS_URL&quot; | jq -r --arg private_key &quot;$PRIVATE_KEY&quot; --arg dns &quot;$DNS_SERVER&quot; '\n\t.[] |\n\t{\n\t  filename: (.locations[0].country.name + &quot; - &quot; + .locations[0].country.city.name + &quot; - &quot; + .hostname + &quot;.conf&quot;),\n\t  ip: .station,\n\t  publicKey: (.technologies[] | select(.identifier==&quot;wireguard_udp&quot;) | .metadata[] | select(.name==&quot;public_key&quot;).value)\n\t} |\n\t{\n\t  filename: .filename,\n\t  config: [\n\t    &quot;# &quot; + .filename,\n\t    &quot;&quot;,\n\t    &quot;[Interface]&quot;,\n\t    &quot;PrivateKey = \\($private_key)&quot;,\n\t    &quot;Address = 10.5.0.2/32&quot;,\n\t    &quot;DNS = \\($dns)&quot;,\n\t    &quot;&quot;,\n\t    &quot;[Peer]&quot;,\n\t    &quot;PublicKey = &quot; + .publicKey,\n\t    &quot;AllowedIPs = 0.0.0.0/0, ::/0&quot;,\n\t    &quot;Endpoint = &quot; + .ip + &quot;:51820&quot;\n\t  ] | join(&quot;\\n&quot;)\n\t} |\n\t&quot;echo \\&quot;&quot; + .config + &quot;\\&quot; &gt; \\&quot;&quot; + .filename + &quot;\\&quot;&quot;\n\t' | sh\n\t\n\techo &quot;ğŸ‰ WireGuard configuration file(s) successfully generated!&quot;\n</code></pre><p><strong>Running the Script</strong></p>\n<p>When you run the script, you should see a smooth output like this:</p>\n<pre><code>âœ… 'curl' is installed.\nâœ… 'jq' is installed.\nâœ… Internet connection is working.\nâœ… ACCESS_TOKEN is valid.\nğŸš€ All prerequisites satisfied. Proceeding...\nğŸ‰ WireGuard configuration file(s) successfully generated! \n</code></pre>\n<p>You will find one or more configuration files generated, depending on your settings, similar to this:</p>\n<pre><code>-rw-rw-r-- 1 admin admin  290 Mar 19 20:58 'Netherlands - Amsterdam - nl729.nordvpn.com.conf' \n</code></pre>\n<p>The content of the file will resemble the following:</p>\n<pre><code># Netherlands - Amsterdam - nl729.nordvpn.com.conf\n\n[Interface]\nPrivateKey = ** YOUR_PRIVATE_KEY_HERE **\nAddress = 10.5.0.2/32\nDNS = 103.86.96.100\n\n[Peer]\nPublicKey = **Â YOUR_PUBLIC_KEY_HEREÂ **\nAllowedIPs = 0.0.0.0/0, ::/0\nEndpoint = 213.232.87.204:51820\n</code></pre>\n<p><strong>Installing Wireguard package on your Edgerouter</strong></p>\n<p>The EdgeRouter does not come with WireGuard pre-installed. You will need to install it manually. There is a <a href=\"https://github.com/WireGuard/wireguard-vyatta-ubnt?source=post_page-----df77a8afcac2---------------------------------------\" title=\"Package library\">helpful individual on GitHub</a>  who maintains the WireGuard packages for EdgeOS. You can find the current release <a href=\"https://github.com/WireGuard/wireguard-vyatta-ubnt/releases\" title=\"Current release\">here</a>.</p>\n<p>For my router, the ER-12, the correct package can be found <a href=\"https://github.com/WireGuard/wireguard-vyatta-ubnt/releases/download/1.0.20220627-1/e300-v2-v1.0.20220627-v1.0.20210914.deb\" title=\"Wireguard package Edgerouter ER-12\">here</a>.\nNow, open an SSH session to your Edge router and enter the following commands:</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"><code class=\"language-bash\" data-lang=\"bash\">curl -OL https://github.com/WireGuard/wireguard-vyatta-ubnt/releases/download/1.0.20211208-1/e300-v2-v1.0.20220627-v1.0.20210914.deb\n\nsudo dpkg -i e300-v2-v1.0.20220627-v1.0.20210914.deb\n</code></pre></div><ul>\n<li>The <code>curl</code> command will download the required package onto the router. Ensure you download the correct one; in my case, it is <code>e300-v2-v1.0.20220627-v1.0.20210914.deb</code>.</li>\n<li>The <code>dpkg</code> command will install the package on the router.</li>\n</ul>\n<p><strong>After Obtaining the Configuration Files and package installation</strong></p>\n<p>Once you have obtained the configuration files and installed the package, you are ready to proceed with the next step: setting up your Edge Router with a VPN connection.</p>\n<p><strong>Setting up your Edge Router with a VPN connection</strong></p>\n<p>The script below is an EdgeOS script designed to set up your VPN tunnel for your home LAN. In the example below, it is assumed that you have VLANs and that VLAN30 is the network for all clients that need to be routed through the WireGuard tunnel wg0.</p>\n<p><strong>Assumptions:</strong></p>\n<ul>\n<li>VLAN30 is configured with the IP range 192.168.30.0/24.</li>\n<li>You wish to exclude nodes 192.168.30.50, 192.168.30.51, and 192.168.30.52 from the tunnel (for example, these might be RING.COM devices that experience issues with VPNs).</li>\n<li>You need to exclude nodes 104.17.127.1 (Ring oath1) and 104.17.128.1 (Ring oath2) for clients that use the wg0 tunnel. This is necessary for clients that require access to RING.COM apps, as RING.COM does not support VPNs.</li>\n<li>You want to exclude subnets within RFC1918 in the wg0 VPN tunnel.</li>\n<li>You aim to exclude email services from Apple and Google, as they often have issues with VPNs.</li>\n</ul>\n<p><strong>Note: Ensure you set your Private Key and Public Key in the script below, which can be found in the configuration file named â€œNetherlands - Amsterdam - nl729.nordvpn.com.confâ€.</strong></p>\n<p><strong>Note: Set the correct IP address below, found in the same configuration file. In this example, the IP address is 213.232.87.204</strong></p>\n<pre><code>configure\n\n# Wireguard configuration\nset interfaces wireguard wg0 address 10.5.0.2/32\nset interfaces wireguard wg0 description 'NordVPN Wireguard'\nset interfaces wireguard wg0 listen-port 37728\nset interfaces wireguard wg0 mtu 1420\nset interfaces wireguard wg0 peer YOUR_PUBLIC_KEY_HERE allowed-ips 0.0.0.0/0\nset interfaces wireguard wg0 peer YOUR_PUBLIC_KEY_HERE description nl729.nordvpn.com.conf\nset interfaces wireguard wg0 peer YOUR_PUBLIC_KEY_HERE endpoint 213.232.87.204:51820\nset interfaces wireguard wg0 peer YOUR_PUBLIC_KEY_HERE persistent-keepalive 25\nset interfaces wireguard wg0 private-key YOUR_PRIVATE_KEY_HERE\nset interfaces wireguard wg0 route-allowed-ips false\ncommit\n\n\n# NAT-rule for traffic from 192.168.30.0/24 to VPN-tunnel\nset service nat rule 5020 description 'masquerade for wg0/NordVPN'\nset service nat rule 5020 log disable\nset service nat rule 5020 outbound-interface wg0\nset service nat rule 5020 protocol all\nset service nat rule 5020 type masquerade\ncommit\n\n# Allow incoming WireGuard protocol traffic on the WAN\nset firewall name WAN_LOCAL rule 15 action accept\nset firewall name WAN_LOCAL rule 15 description 'Allow incoming WireGuard'\nset firewall name WAN_LOCAL rule 15 destination port 37728\nset firewall name WAN_LOCAL rule 15 protocol udp\ncommit\n\n# Static route for traffic from 192.168.30.0/24 via de VPN-tunnel\nset protocols static table 1 description 'Route out via wg0/NordVPN'\nset protocols static table 1 interface-route 0.0.0.0/0 next-hop-interface wg0\nset protocols static table 1 route 0.0.0.0/0 blackhole distance 255\ncommit\n\n# Hosts in 192.168.30.0/24 we don't want through wg0/NordVPN \nset firewall group address-group Vlan30_Hosts_NordVPN_EXCLUDE description 'Hosts in VLAN30 we dont want through wg0/NordVPN'\nset firewall group address-group Vlan30_Hosts_NordVPN_EXCLUDE address 192.168.30.50\t# host50\nset firewall group address-group Vlan30_Hosts_NordVPN_EXCLUDE address 192.168.30.51 # host51\nset firewall group address-group Vlan30_Hosts_NordVPN_EXCLUDE address 192.168.30.52 # host52\ncommit\n\n# Sites on the Internet we dont want through wg0/NordVPN\nset firewall group address-group Internet_Hosts_NordVPN_EXCLUDE description 'Sites on the Internet we dont want through wg0/NordVPN'\nset firewall group address-group Internet_Hosts_NordVPN_EXCLUDE address 104.17.127.1 # Ring oath1\nset firewall group address-group Internet_Hosts_NordVPN_EXCLUDE address 104.17.128.1 # Ring oath2\ncommit\n\n# None routable subnets \nset firewall group address-group RFC1918 description 'Allow None routable subnets'\nset firewall group address-group RFC1918 address 192.168.0.0/16\nset firewall group address-group RFC1918 address 172.16.0.0/12\nset firewall group address-group RFC1918 address 10.0.0.0/8\ncommit\n\n# Mail ports (spoiler: Apple Mail and Google Mail don't like VPN's) \nset firewall group port-group Mail_ports description 'Mail poorten'\nset firewall group port-group Mail_ports port 993\nset firewall group port-group Mail_ports port 587\nset firewall group port-group Mail_ports port 465\nset firewall group port-group Mail_ports port 2525  \ncommit\n\n# traffic from 192.168.30.0/24 to RFC1918 not via wg0\nset firewall modify SOURCE_ROUTE rule 10 description 'traffic from 192.168.30.0/24 to RFC1918 not via wg0'\nset firewall modify SOURCE_ROUTE rule 10 source address 192.168.30.0/24\nset firewall modify SOURCE_ROUTE rule 10 destination group address-group RFC1918\nset firewall modify SOURCE_ROUTE rule 10 action accept\n\n# traffic from excluded hosts to 0.0.0.0/0 not via wg0\nset firewall modify SOURCE_ROUTE rule 20 description 'traffic from excluded hosts to 0.0.0.0/0 not via wg0'\nset firewall modify SOURCE_ROUTE rule 20 source group address-group Vlan30_Hosts_NordVPN_EXCLUDE\nset firewall modify SOURCE_ROUTE rule 20 destination address 0.0.0.0/0\nset firewall modify SOURCE_ROUTE rule 20 action accept\n\n# traffic for excluded sites on Internet not via wg0\nset firewall modify SOURCE_ROUTE rule 21 description 'traffic for excuded sites on Internet not via wg0'\nset firewall modify SOURCE_ROUTE rule 21 destination group address-group Internet_Hosts_NordVPN_EXCLUDE\nset firewall modify SOURCE_ROUTE rule 21 action accept\n\n# traffic from MAIL ports to 0.0.0.0/0 not via wg0  \nset firewall modify SOURCE_ROUTE rule 30 description 'traffic from MAIL ports to 0.0.0.0/0 not via wg0'  \nset firewall modify SOURCE_ROUTE rule 30 destination group port-group Mail_ports  \nset firewall modify SOURCE_ROUTE rule 30 action accept  \n\n# Firewall rule traffic from 192.168.30.0/24 through wg0\nset firewall modify SOURCE_ROUTE rule 100 description 'traffic from 192.168.30.0/24 through wg0'\nset firewall modify SOURCE_ROUTE rule 100 source address 192.168.30.0/24\nset firewall modify SOURCE_ROUTE rule 100 modify table 1\n\n# Apply firewall-modification to VLAN30\nset interfaces switch switch0 vif 30 firewall in modify SOURCE_ROUTE\n\ncommit\nsave\nexit\n</code></pre>\n<p>The interface specified in the script can be configured to any interface you need. In this example, it is VLAN30 on switch0, but you can easily use eth2 or any other interface that suits your requirements.</p>\n<pre tabindex=\"0\"><code># Apply firewall-modification to eth2\nset interfaces ethernet eth2 firewall in modify SOURCE_ROUTE\n</code></pre><p>Or If you want it to be applied to your complete switch0</p>\n<pre tabindex=\"0\"><code># Apply firewall-modification to switch0\nset interfaces switch switch0 firewall in modify SOURCE_ROUTE\n</code></pre><p><strong>Disabling a VPN</strong></p>\n<p>To disable a VPN, use the following commands:</p>\n<pre><code>configure\n\ndelete interfaces switch switch0 vif 30 firewall in modify SOURCE_ROUTE\n\ncommit\nsave\nexit\n</code></pre>\n<p><strong>Re-enabling a VPN</strong></p>\n<p>To re-enable a VPN after disabling it, use the following commands:</p>\n<pre><code>configure\n\nset interfaces switch switch0 vif 30 firewall in modify SOURCE_ROUTE\n\ncommit\nsave\nexit\n</code></pre>\n<p>If this blog was any help to you, give away a free Lucky Four-Leaf Clover \n    <button class=\"tinylytics_kudos\" data-path=\"/2025/03/19/setting-up-wireguard-on-your.html\"></button></p>\n<p>ğŸ“</p>\n",
				"content_text": "I aimed to create a VPN router using my Ubiquiti Edge Router ER-12 and utilise the configuration files from NordVPN. Initially, I attempted this with OpenVPN configuration files, which worked flawlessly, but unfortunately, OpenVPN resulted in poor throughput. (I have written another blog post about setting this up with OpenVPN if you need it, but I recommend using WireGuard instead.)\n\nNordVPN's implementation of WireGuard is known as NordLynx. However, NordVPN does not make these profiles easily accessible like Mullvad VPN does. On the NordVPN website, only OpenVPN configurations are readily available for download.\n\nTo obtain the NordLynx configuration files, I discovered two methods online.\n\n1. One approach is to use the method described by Daniel Rosenberg. You can find more details in his article on using WireGuard with NordVPN on an EdgeRouter [here](https://medium.com/@daniel-rosenberg/how-to-selectively-tunnel-an-apple-tv-or-whatever-via-nordvpn-over-wireguard-using-an-edgerouter-df77a8afcac2 \"The Daniel Rosenberg Method\").\n2. The other method I found is a more practical solution from â€œMyShittyCodeâ€, which provides a straightforward script to extract WireGuard configurations. You can read about it [here](https://myshittycode.com/2024/06/08/nordvpn-extracting-wireguard-configuration/ \"The MyShityCode Method\").\n\nI initially used the Daniel Rosenberg method in a Linux VM on my MacBook, which worked, but after discovering the second option from MyShittyCode, I found their script to be quite useful and decided to modify it slightly, as you can see below.\n\nThe primary step in the MyShittyCode method involves setting up NordVPN to generate an ACCESS TOKEN for use in the script. This is relatively straightforward; simply follow the steps outlined in [the original blog post](https://myshittycode.com/2024/06/08/nordvpn-extracting-wireguard-configuration/ \"The MyShittyCode Method\"). \n\n**What You Need to Set in the Script**\n\nTo use the script, you need to configure the following variables:\n\n\t\n\t# --- Configuration Variables ---\n\tACCESS_TOKEN=\"**YOUR TOKEN HERE!!**\"\n\tTOTAL_CONFIGS=1\n\tDNS_SERVER=\"103.86.96.100\"\n\tCOUNTRY_NAME=\"Netherlands\"\n\t\n\n- ACCESS\\_TOKEN: This can be obtained by following the steps in the original post.\n- TOTAL\\_CONFIGS: You can set this to any number of configurations you wish to generate.\n- DNS\\_SERVER: You can use any DNS server, but to avoid DNS leak complaints from NordVPN, use 103.86.96.100 or 103.86.99.100.\n- COUNTRY\\_NAME: Set this to any country where NordVPN has endpoints; you might prefer to use your current location.\n\n```\n\t#!/usr/bin/env bash\n\t\n\t# NordVPN WireGuard Configuration Generator\n\t# Checks prerequisites and generates WireGuard configuration files.\n\t\n\t# --- Configuration Variables ---\n\tACCESS_TOKEN=\"<<YOUR TOKEN HERE!!>>\"\n\tTOTAL_CONFIGS=1\n\tDNS_SERVER=\"103.86.96.100\"\n\tCOUNTRY_NAME=\"Netherlands\"\n\t\n\t# --- Functions for Prerequisite Checks ---\n\tcheck_command() {\n\t  if ! command -v \"$1\" >/dev/null 2>&1; then\n\t    echo \"âŒ ERROR: Required command '$1' is not installed.\"\n\t    MISSING_DEPENDENCIES=true\n\t  else\n\t    echo \"âœ… '$1' is installed.\"\n\t  fi\n\t}\n\t\n\tcheck_internet_connection() {\n\t  if ! curl -s --head https://api.nordvpn.com >/dev/null; then\n\t    echo \"âŒ ERROR: Unable to connect to NordVPN API. Please check your internet connection.\"\n\t    exit 1\n\t  else\n\t    echo \"âœ… Internet connection is working.\"\n\t  fi\n\t}\n\t\n\tcheck_access_token() {\n\t  RESPONSE=$(curl -s -u token:\"$ACCESS_TOKEN\" \"https://api.nordvpn.com/v1/users/services/credentials\")\n\t  if [[ $(echo \"$RESPONSE\" | jq -r '.nordlynx_private_key') == \"null\" ]]; then\n\t    echo \"âŒ ERROR: Invalid or expired ACCESS_TOKEN.\"\n\t    exit 1\n\t  else\n\t    echo \"âœ… ACCESS_TOKEN is valid.\"\n\t  fi\n\t}\n\t\n\t# --- Perform Prerequisite Checks ---\n\techo \"ğŸ” Checking prerequisites...\"\n\tMISSING_DEPENDENCIES=false\n\t\n\tcheck_command curl\n\tcheck_command jq\n\t\n\tif [ \"$MISSING_DEPENDENCIES\" = true ]; then\n\t  echo \"ğŸš¨ Please install the missing dependencies before running this script again.\"\n\t  exit 1\n\tfi\n\t\n\tcheck_internet_connection\n\tcheck_access_token\n\t\n\techo \"ğŸš€ All prerequisites satisfied. Proceeding...\"\n\t\n\t# --- Fetch Country ID ---\n\tCOUNTRY_ID=$(curl -s \"https://api.nordvpn.com/v1/servers/countries\" | \\\n\tjq -r \".[] | select(.name==\\\"$COUNTRY_NAME\\\") | .id\")\n\t\n\tif [ -z \"$COUNTRY_ID\" ]; then\n\t  echo \"âŒ ERROR: Country '$COUNTRY_NAME' not found or invalid.\"\n\t  exit 1\n\tfi\n\t\n\t# --- Fetch Private Key ---\n\tPRIVATE_KEY=$(curl -s -u token:\"$ACCESS_TOKEN\" \\\n\t\"https://api.nordvpn.com/v1/users/services/credentials\" | jq -r '.nordlynx_private_key')\n\t\n\t# --- Fetch Recommended Servers and Generate Configurations ---\n\tSERVER_RECOMMENDATIONS_URL=\"https://api.nordvpn.com/v1/servers/recommendations?&filters\\[country_id\\]=$COUNTRY_ID&filters\\[servers_technologies\\]\\[identifier\\]=wireguard_udp&limit=$TOTAL_CONFIGS\"\n\t\n\tcurl -s \"$SERVER_RECOMMENDATIONS_URL\" | jq -r --arg private_key \"$PRIVATE_KEY\" --arg dns \"$DNS_SERVER\" '\n\t.[] |\n\t{\n\t  filename: (.locations[0].country.name + \" - \" + .locations[0].country.city.name + \" - \" + .hostname + \".conf\"),\n\t  ip: .station,\n\t  publicKey: (.technologies[] | select(.identifier==\"wireguard_udp\") | .metadata[] | select(.name==\"public_key\").value)\n\t} |\n\t{\n\t  filename: .filename,\n\t  config: [\n\t    \"# \" + .filename,\n\t    \"\",\n\t    \"[Interface]\",\n\t    \"PrivateKey = \\($private_key)\",\n\t    \"Address = 10.5.0.2/32\",\n\t    \"DNS = \\($dns)\",\n\t    \"\",\n\t    \"[Peer]\",\n\t    \"PublicKey = \" + .publicKey,\n\t    \"AllowedIPs = 0.0.0.0/0, ::/0\",\n\t    \"Endpoint = \" + .ip + \":51820\"\n\t  ] | join(\"\\n\")\n\t} |\n\t\"echo \\\"\" + .config + \"\\\" > \\\"\" + .filename + \"\\\"\"\n\t' | sh\n\t\n\techo \"ğŸ‰ WireGuard configuration file(s) successfully generated!\"\n```\t\n\n**Running the Script**\n\nWhen you run the script, you should see a smooth output like this:\n\n\tâœ… 'curl' is installed.\n\tâœ… 'jq' is installed.\n\tâœ… Internet connection is working.\n\tâœ… ACCESS_TOKEN is valid.\n\tğŸš€ All prerequisites satisfied. Proceeding...\n\tğŸ‰ WireGuard configuration file(s) successfully generated! \n\nYou will find one or more configuration files generated, depending on your settings, similar to this:\n\n\t-rw-rw-r-- 1 admin admin  290 Mar 19 20:58 'Netherlands - Amsterdam - nl729.nordvpn.com.conf' \n\nThe content of the file will resemble the following:\n\n\t# Netherlands - Amsterdam - nl729.nordvpn.com.conf\n\t\n\t[Interface]\n\tPrivateKey = ** YOUR_PRIVATE_KEY_HERE **\n\tAddress = 10.5.0.2/32\n\tDNS = 103.86.96.100\n\t\n\t[Peer]\n\tPublicKey = **Â YOUR_PUBLIC_KEY_HEREÂ **\n\tAllowedIPs = 0.0.0.0/0, ::/0\n\tEndpoint = 213.232.87.204:51820\n\t\n**Installing Wireguard package on your Edgerouter**\n\nThe EdgeRouter does not come with WireGuard pre-installed. You will need to install it manually. There is a [helpful individual on GitHub](https://github.com/WireGuard/wireguard-vyatta-ubnt?source=post_page-----df77a8afcac2--------------------------------------- \"Package library\")  who maintains the WireGuard packages for EdgeOS. You can find the current release [here](https://github.com/WireGuard/wireguard-vyatta-ubnt/releases \"Current release\").\n\nFor my router, the ER-12, the correct package can be found [here](https://github.com/WireGuard/wireguard-vyatta-ubnt/releases/download/1.0.20220627-1/e300-v2-v1.0.20220627-v1.0.20210914.deb \"Wireguard package Edgerouter ER-12\").\nNow, open an SSH session to your Edge router and enter the following commands:\n\n```bash\ncurl -OL https://github.com/WireGuard/wireguard-vyatta-ubnt/releases/download/1.0.20211208-1/e300-v2-v1.0.20220627-v1.0.20210914.deb\n\nsudo dpkg -i e300-v2-v1.0.20220627-v1.0.20210914.deb\n```\n- The `curl` command will download the required package onto the router. Ensure you download the correct one; in my case, it is `e300-v2-v1.0.20220627-v1.0.20210914.deb`.\n- The `dpkg` command will install the package on the router.\n\n**After Obtaining the Configuration Files and package installation**\n\nOnce you have obtained the configuration files and installed the package, you are ready to proceed with the next step: setting up your Edge Router with a VPN connection.\n\n**Setting up your Edge Router with a VPN connection**\n\nThe script below is an EdgeOS script designed to set up your VPN tunnel for your home LAN. In the example below, it is assumed that you have VLANs and that VLAN30 is the network for all clients that need to be routed through the WireGuard tunnel wg0.\n\n**Assumptions:**\n\n- VLAN30 is configured with the IP range 192.168.30.0/24.\n- You wish to exclude nodes 192.168.30.50, 192.168.30.51, and 192.168.30.52 from the tunnel (for example, these might be RING.COM devices that experience issues with VPNs).\n- You need to exclude nodes 104.17.127.1 (Ring oath1) and 104.17.128.1 (Ring oath2) for clients that use the wg0 tunnel. This is necessary for clients that require access to RING.COM apps, as RING.COM does not support VPNs.\n- You want to exclude subnets within RFC1918 in the wg0 VPN tunnel.\n- You aim to exclude email services from Apple and Google, as they often have issues with VPNs.\n\n**Note: Ensure you set your Private Key and Public Key in the script below, which can be found in the configuration file named â€œNetherlands - Amsterdam - nl729.nordvpn.com.confâ€.**\n\n**Note: Set the correct IP address below, found in the same configuration file. In this example, the IP address is 213.232.87.204**\n\n\tconfigure\n\t\n\t# Wireguard configuration\n\tset interfaces wireguard wg0 address 10.5.0.2/32\n\tset interfaces wireguard wg0 description 'NordVPN Wireguard'\n\tset interfaces wireguard wg0 listen-port 37728\n\tset interfaces wireguard wg0 mtu 1420\n\tset interfaces wireguard wg0 peer YOUR_PUBLIC_KEY_HERE allowed-ips 0.0.0.0/0\n\tset interfaces wireguard wg0 peer YOUR_PUBLIC_KEY_HERE description nl729.nordvpn.com.conf\n\tset interfaces wireguard wg0 peer YOUR_PUBLIC_KEY_HERE endpoint 213.232.87.204:51820\n\tset interfaces wireguard wg0 peer YOUR_PUBLIC_KEY_HERE persistent-keepalive 25\n\tset interfaces wireguard wg0 private-key YOUR_PRIVATE_KEY_HERE\n\tset interfaces wireguard wg0 route-allowed-ips false\n\tcommit\n\t\n\t\n\t# NAT-rule for traffic from 192.168.30.0/24 to VPN-tunnel\n\tset service nat rule 5020 description 'masquerade for wg0/NordVPN'\n\tset service nat rule 5020 log disable\n\tset service nat rule 5020 outbound-interface wg0\n\tset service nat rule 5020 protocol all\n\tset service nat rule 5020 type masquerade\n\tcommit\n\t\n\t# Allow incoming WireGuard protocol traffic on the WAN\n\tset firewall name WAN_LOCAL rule 15 action accept\n\tset firewall name WAN_LOCAL rule 15 description 'Allow incoming WireGuard'\n\tset firewall name WAN_LOCAL rule 15 destination port 37728\n\tset firewall name WAN_LOCAL rule 15 protocol udp\n\tcommit\n\t\n\t# Static route for traffic from 192.168.30.0/24 via de VPN-tunnel\n\tset protocols static table 1 description 'Route out via wg0/NordVPN'\n\tset protocols static table 1 interface-route 0.0.0.0/0 next-hop-interface wg0\n\tset protocols static table 1 route 0.0.0.0/0 blackhole distance 255\n\tcommit\n\t\n\t# Hosts in 192.168.30.0/24 we don't want through wg0/NordVPN \n\tset firewall group address-group Vlan30_Hosts_NordVPN_EXCLUDE description 'Hosts in VLAN30 we dont want through wg0/NordVPN'\n\tset firewall group address-group Vlan30_Hosts_NordVPN_EXCLUDE address 192.168.30.50\t# host50\n\tset firewall group address-group Vlan30_Hosts_NordVPN_EXCLUDE address 192.168.30.51 # host51\n\tset firewall group address-group Vlan30_Hosts_NordVPN_EXCLUDE address 192.168.30.52 # host52\n\tcommit\n\t\n\t# Sites on the Internet we dont want through wg0/NordVPN\n\tset firewall group address-group Internet_Hosts_NordVPN_EXCLUDE description 'Sites on the Internet we dont want through wg0/NordVPN'\n\tset firewall group address-group Internet_Hosts_NordVPN_EXCLUDE address 104.17.127.1 # Ring oath1\n\tset firewall group address-group Internet_Hosts_NordVPN_EXCLUDE address 104.17.128.1 # Ring oath2\n\tcommit\n\t\n\t# None routable subnets \n\tset firewall group address-group RFC1918 description 'Allow None routable subnets'\n\tset firewall group address-group RFC1918 address 192.168.0.0/16\n\tset firewall group address-group RFC1918 address 172.16.0.0/12\n\tset firewall group address-group RFC1918 address 10.0.0.0/8\n\tcommit\n\t\n\t# Mail ports (spoiler: Apple Mail and Google Mail don't like VPN's) \n\tset firewall group port-group Mail_ports description 'Mail poorten'\n\tset firewall group port-group Mail_ports port 993\n\tset firewall group port-group Mail_ports port 587\n\tset firewall group port-group Mail_ports port 465\n\tset firewall group port-group Mail_ports port 2525  \n\tcommit\n\t\n\t# traffic from 192.168.30.0/24 to RFC1918 not via wg0\n\tset firewall modify SOURCE_ROUTE rule 10 description 'traffic from 192.168.30.0/24 to RFC1918 not via wg0'\n\tset firewall modify SOURCE_ROUTE rule 10 source address 192.168.30.0/24\n\tset firewall modify SOURCE_ROUTE rule 10 destination group address-group RFC1918\n\tset firewall modify SOURCE_ROUTE rule 10 action accept\n\t\n\t# traffic from excluded hosts to 0.0.0.0/0 not via wg0\n\tset firewall modify SOURCE_ROUTE rule 20 description 'traffic from excluded hosts to 0.0.0.0/0 not via wg0'\n\tset firewall modify SOURCE_ROUTE rule 20 source group address-group Vlan30_Hosts_NordVPN_EXCLUDE\n\tset firewall modify SOURCE_ROUTE rule 20 destination address 0.0.0.0/0\n\tset firewall modify SOURCE_ROUTE rule 20 action accept\n\t\n\t# traffic for excluded sites on Internet not via wg0\n\tset firewall modify SOURCE_ROUTE rule 21 description 'traffic for excuded sites on Internet not via wg0'\n\tset firewall modify SOURCE_ROUTE rule 21 destination group address-group Internet_Hosts_NordVPN_EXCLUDE\n\tset firewall modify SOURCE_ROUTE rule 21 action accept\n\t\n\t# traffic from MAIL ports to 0.0.0.0/0 not via wg0  \n\tset firewall modify SOURCE_ROUTE rule 30 description 'traffic from MAIL ports to 0.0.0.0/0 not via wg0'  \n\tset firewall modify SOURCE_ROUTE rule 30 destination group port-group Mail_ports  \n\tset firewall modify SOURCE_ROUTE rule 30 action accept  \n\t\n\t# Firewall rule traffic from 192.168.30.0/24 through wg0\n\tset firewall modify SOURCE_ROUTE rule 100 description 'traffic from 192.168.30.0/24 through wg0'\n\tset firewall modify SOURCE_ROUTE rule 100 source address 192.168.30.0/24\n\tset firewall modify SOURCE_ROUTE rule 100 modify table 1\n\t\n\t# Apply firewall-modification to VLAN30\n\tset interfaces switch switch0 vif 30 firewall in modify SOURCE_ROUTE\n\t\n\tcommit\n\tsave\n\texit\n\nThe interface specified in the script can be configured to any interface you need. In this example, it is VLAN30 on switch0, but you can easily use eth2 or any other interface that suits your requirements.\n\n```\n# Apply firewall-modification to eth2\nset interfaces ethernet eth2 firewall in modify SOURCE_ROUTE\n```\nOr If you want it to be applied to your complete switch0\n\n```\n# Apply firewall-modification to switch0\nset interfaces switch switch0 firewall in modify SOURCE_ROUTE\n```\n**Disabling a VPN**\n\nTo disable a VPN, use the following commands:\n\n\tconfigure\n\t\n\tdelete interfaces switch switch0 vif 30 firewall in modify SOURCE_ROUTE\n\t\n\tcommit\n\tsave\n\texit\n\n**Re-enabling a VPN**\n\nTo re-enable a VPN after disabling it, use the following commands:\n\n\tconfigure\n\t\n\tset interfaces switch switch0 vif 30 firewall in modify SOURCE_ROUTE\n\t\n\tcommit\n\tsave\n\texit\n\nIf this blog was any help to you, give away a free Lucky Four-Leaf Clover {{< tinykudos >}}\n\nğŸ“\n",
				"date_published": "2025-03-19T22:50:16+01:00",
				"url": "https://micro.mjanssen.nl/2025/03/19/setting-up-wireguard-on-your.html",
				"tags": ["Technology","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2025/03/19/weer-een-mooie-dag-lekker.html",
				
				"content_html": "<p>Weer een mooie dag&hellip; lekker naar huis&hellip;. kijken of er thuis nog een mooie wandeling gemaakt kan worden met ğŸ™‹ğŸ¼â€â™€ï¸â­ï¸</p>\n",
				"content_text": "Weer een mooie dag... lekker naar huis.... kijken of er thuis nog een mooie wandeling gemaakt kan worden met ğŸ™‹ğŸ¼â€â™€ï¸â­ï¸\n",
				"date_published": "2025-03-19T15:34:57+01:00",
				"url": "https://micro.mjanssen.nl/2025/03/19/weer-een-mooie-dag-lekker.html",
				"tags": ["Microposts"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2025/03/18/statue-in-the-austrian-national.html",
				
				"content_html": "<p>Statue in the Austrian National Library, Vienna. âœˆï¸ğŸ“·</p>\n<p><img src=\"https://micro.mjanssen.nl/uploads/2025/image-20250318-184304-ae4ad26d.jpg\" alt=\"Statue in the Austrian National Library, Vienna. \"></p>\n",
				"content_text": "Statue in the Austrian National Library, Vienna. âœˆï¸ğŸ“·\n\n![Statue in the Austrian National Library, Vienna. ](https://micro.mjanssen.nl/uploads/2025/image-20250318-184304-ae4ad26d.jpg)\n",
				"date_published": "2025-03-18T18:43:08+01:00",
				"url": "https://micro.mjanssen.nl/2025/03/18/statue-in-the-austrian-national.html",
				"tags": ["Microposts"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2025/03/17/the-missus-took-me-on.html",
				
				"content_html": "<p>The missus took me on a weekend to Vienna. It is a very nice city. We stayed at the SchÃ¶nbrunn Hotel. Visited some lovely places. Like an very old library and the Spanish riding school. Did some nice walks and stopped at some nice places to eat. ğŸ“· âœˆ</p>\n<p><img src=\"https://micro.mjanssen.nl/uploads/2025/image-20250317-114626-d97fd127.jpg\" alt=\"White horse jumping with rider at the Spanish riding school in Vienna. \"></p>\n",
				"content_text": "The missus took me on a weekend to Vienna. It is a very nice city. We stayed at the SchÃ¶nbrunn Hotel. Visited some lovely places. Like an very old library and the Spanish riding school. Did some nice walks and stopped at some nice places to eat. ğŸ“· âœˆ\n\n![White horse jumping with rider at the Spanish riding school in Vienna. ](https://micro.mjanssen.nl/uploads/2025/image-20250317-114626-d97fd127.jpg)\n",
				"date_published": "2025-03-17T11:46:30+01:00",
				"url": "https://micro.mjanssen.nl/2025/03/17/the-missus-took-me-on.html",
				"tags": ["Microposts"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2025/03/16/how-can-i-add-people.html",
				
				"content_html": "<p>How can I add people from Bluesky to micro.blog??</p>\n",
				"content_text": "How can I add people from Bluesky to micro.blog?? \n",
				"date_published": "2025-03-16T09:10:51+01:00",
				"url": "https://micro.mjanssen.nl/2025/03/16/how-can-i-add-people.html",
				"tags": ["Microposts"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2025/03/15/goed-weekend-allemaal-hopelijk-leuk.html",
				
				"content_html": "<p>Goed weekend allemaal. Hopelijk leuk vermaak in het weekend voor iedereen.</p>\n",
				"content_text": "Goed weekend allemaal. Hopelijk leuk vermaak in het weekend voor iedereen. \n",
				"date_published": "2025-03-15T08:27:59+01:00",
				"url": "https://micro.mjanssen.nl/2025/03/15/goed-weekend-allemaal-hopelijk-leuk.html",
				"tags": ["Microposts"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2025/03/13/renaming-noteplan-files-with-the.html",
				"title": "ğŸ“Renaming Noteplan files with the correct title",
				"content_html": "<p>A great feature in Noteplan is that the filename of the note gets the filename that is equal to the title of the note</p>\n<p>What is not so great, as a note evolves and changes and maybe your title gets changed, the filename does not. Which can be a hassle if you do a files search on your disk to find a particular file. I recently learned that you can work together with Obsidian. But for this to work correctly, the files need to have nice describing names.</p>\n<p>I donâ€™t use Obsidian, but I like to have my filenames aligned with the notesâ€™ title. Therefore, I wrote the bash script below.</p>\n<p>You can set your directories to be scanned, so that the files within them get renamed if needed.</p>\n<pre><code>#!/bin/bash\n\n# Directories to process\ndirectories=(\n  &quot;/Users/&lt;user&gt;/Library/Containers/co.noteplan.NotePlan-setapp/Data/Library/Application Support/co.noteplan.NotePlan-setapp/Notes/personal&quot;\n  &quot;/Users/&lt;user&gt;/Library/Containers/co.noteplan.NotePlan-setapp/Data/Library/Application Support/co.noteplan.NotePlan-setapp/Notes/work&quot;\n)\n\n# Loop through directories and *.txt files\nfor root_dir in &quot;${directories[@]}&quot;; do\n  echo\n  echo\n  echo &quot;Processing directory: $root_dir&quot;\n  # Find and process *.txt files\n  find &quot;$root_dir&quot; -name &quot;*.txt&quot; -type f -print0 | while IFS= read -r -d '' file; do\n\n  title=$(head -n 1 &quot;$file&quot; | tr -cd '[:alnum:][:space:]._-' | xargs)\n    path=$(dirname &quot;$file&quot;)\n    new_filename=&quot;${path}/${title}.txt&quot;\n    \n    if [[ &quot;$file&quot; != &quot;$new_filename&quot; ]]; then\n      mv &quot;$file&quot; &quot;$new_filename&quot;\n      echo &quot;File renamed to: $new_filename&quot;\n    else\n      echo &quot;File already has correct title: $new_filename&quot;\n    fi\n  done\ndone\n</code></pre>\n<p>I have Noteplan via Setapp, so I included the Setapp paths to be used. Set &lt;user&gt; to your username and mutate the path, so it resembled your folder structure in Noteplan. ğŸ“ğŸ–‹ï¸â˜•ï¸</p>\n",
				"content_text": "A great feature in Noteplan is that the filename of the note gets the filename that is equal to the title of the note\n\nWhat is not so great, as a note evolves and changes and maybe your title gets changed, the filename does not. Which can be a hassle if you do a files search on your disk to find a particular file. I recently learned that you can work together with Obsidian. But for this to work correctly, the files need to have nice describing names.\n\nI donâ€™t use Obsidian, but I like to have my filenames aligned with the notesâ€™ title. Therefore, I wrote the bash script below. \n\nYou can set your directories to be scanned, so that the files within them get renamed if needed.\n\n\t#!/bin/bash\n\t\n\t# Directories to process\n\tdirectories=(\n\t  \"/Users/<user>/Library/Containers/co.noteplan.NotePlan-setapp/Data/Library/Application Support/co.noteplan.NotePlan-setapp/Notes/personal\"\n\t  \"/Users/<user>/Library/Containers/co.noteplan.NotePlan-setapp/Data/Library/Application Support/co.noteplan.NotePlan-setapp/Notes/work\"\n\t)\n\t\n\t# Loop through directories and *.txt files\n\tfor root_dir in \"${directories[@]}\"; do\n\t  echo\n\t  echo\n\t  echo \"Processing directory: $root_dir\"\n\t  # Find and process *.txt files\n\t  find \"$root_dir\" -name \"*.txt\" -type f -print0 | while IFS= read -r -d '' file; do\n\t\n\t  title=$(head -n 1 \"$file\" | tr -cd '[:alnum:][:space:]._-' | xargs)\n\t    path=$(dirname \"$file\")\n\t    new_filename=\"${path}/${title}.txt\"\n\t    \n\t    if [[ \"$file\" != \"$new_filename\" ]]; then\n\t      mv \"$file\" \"$new_filename\"\n\t      echo \"File renamed to: $new_filename\"\n\t    else\n\t      echo \"File already has correct title: $new_filename\"\n\t    fi\n\t  done\n\tdone\n\nI have Noteplan via Setapp, so I included the Setapp paths to be used. Set \\<user\\> to your username and mutate the path, so it resembled your folder structure in Noteplan. ğŸ“ğŸ–‹ï¸â˜•ï¸\n\n\n",
				"date_published": "2025-03-13T18:22:04+01:00",
				"url": "https://micro.mjanssen.nl/2025/03/13/renaming-noteplan-files-with-the.html",
				"tags": ["Productivity","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2025/03/10/commuting-back-home-lovely-sun.html",
				
				"content_html": "<p>Commuting back home. Lovely sun rays behind the train  window. Stiff day at work. Mondays are not my most favourite days.</p>\n<p>Hopefully the missus will be back early tonight. Long day for her today.</p>\n",
				"content_text": "Commuting back home. Lovely sun rays behind the train  window. Stiff day at work. Mondays are not my most favourite days. \n\nHopefully the missus will be back early tonight. Long day for her today. \n\n",
				"date_published": "2025-03-10T15:52:26+01:00",
				"url": "https://micro.mjanssen.nl/2025/03/10/commuting-back-home-lovely-sun.html",
				"tags": ["Microposts"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2025/03/10/finished-reading-nu-of-nooit.html",
				
				"content_html": "<p>Finished reading: <a href=\"https://micro.blog/books/9789044648560\">Nu of nooit</a> by Dai Carter ğŸ“š</p>\n<p>Een mooi verhaal en lessen! Vooral de voorbeelden uit zijn actieve militaire periode.</p>\n",
				"content_text": "Finished reading: [Nu of nooit](https://micro.blog/books/9789044648560) by Dai Carter ğŸ“š\r\n\r\nEen mooi verhaal en lessen! Vooral de voorbeelden uit zijn actieve militaire periode. \n",
				"date_published": "2025-03-10T08:29:21+01:00",
				"url": "https://micro.mjanssen.nl/2025/03/10/finished-reading-nu-of-nooit.html",
				"tags": ["Microposts"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2025/03/10/goedemiddag-deze-mooie-maandag-iedereen.html",
				
				"content_html": "<p>Goedemiddag deze mooie maandag. Iedereen een mooie week toegewenst.</p>\n",
				"content_text": "Goedemiddag deze mooie maandag. Iedereen een mooie week toegewenst.\n",
				"date_published": "2025-03-10T08:05:28+01:00",
				"url": "https://micro.mjanssen.nl/2025/03/10/goedemiddag-deze-mooie-maandag-iedereen.html",
				"tags": ["Microposts"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2025/03/09/the-microsocial-ios-client-is.html",
				
				"content_html": "<p>The micro.social iOS client is really slick. ğŸ“²</p>\n",
				"content_text": "The micro.social iOS client is really slick. ğŸ“²\n",
				"date_published": "2025-03-09T21:00:47+01:00",
				"url": "https://micro.mjanssen.nl/2025/03/09/the-microsocial-ios-client-is.html",
				"tags": ["Microposts"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2025/03/09/coopers-ontsnapping.html",
				"title": "âœï¸ Cooper's Ontsnapping",
				"content_html": "<p>&lsquo;Wat bedoel je, hij is ontsnapt?â€™ snauwt hij haar toe. De takken op de zachte bosgrond kraken als hij met een ferme pas op haar af komt. â€˜Normaal loopt Cooper nooit weg,â€™ bijt hij. Laura deinst wat terug. &lsquo;Rustig Jason,â€™ sust ze, â€˜het is een goed getrainde politiehond. Die loopt niet in zeven sloten tegelijk.â€™ Maar dat is ook niet de grootste zorg van Jason.</p>\n<p>Hij traint al drie jaar met Cooper. Al die tijd is hij een betrouwbare partner gebleken. Een betrouwbaar middel bij het bestrijden van criminaliteit. Jason wilde hem een uitje gunnen. Even wat vertier in het anders zo intensieve schema. Hij wist dat hij haar niet alleen had moeten laten met de strijder. Ãœberhaupt had hij Cooper niet mee moeten nemen. Maar in plaats van dat toe te geven, wordt hij steeds giftiger op Laura. Dit gaat hem problemen geven op het bureau, weet hij.</p>\n<p>&lsquo;Laten we het pad terug volgen naar de auto,â€™ stelde Laura voor. Maar Jason wil door. â€˜We zijn op de helft van de route en Cooper kent de weg,â€™ zegt hij bits. Na een korte woordenwisseling besluiten ze ieder een andere kant op te gaan en elkaar te treffen bij de auto op de parkeerplaats. Roepend en fluitend verdwijnt Jason verder het bos in. Laura volgt het pad terug naar de parkeerplaats. Geen spoor van Cooper tijdens deze intense speedmars.</p>\n<p>Als ze de parkeerplaats nadert, hoort ze ook Jason weer. Nog steeds roepend en fluitend. Wanneer ze elkaar weer treffen en samen naar de auto lopen is Jason radeloos. Zijn woede en furie zijn omgeslagen in angst. Ze lopen langs de enkele autoâ€™s die er geparkeerd staan. Stomverbaasd is Jason als blijkt dat Cooper op de grond achter hun auto ligt. Blij beide spoorzoekers weer te zien. Met een onbekende riem zit Cooper vast aan de trekhaak van hun auto. Jason en Laura kijken snel om zich heen, maar niemand in de buurt. â€˜Wie kan dit gedaan hebben?â€™ stamelt hij in zichzelf.</p>\n<p>Als Jason een briefje achter de ruitenwisser ontdekt, wordt hij timide. â€˜Maandag 09:00 kantoor. Commissaris Bleekveldâ€™.</p>\n<p>De rit naar huis heeft nog nooit zo lang geduurd. Maar niet voor Cooper. Hij heeft het mooiste vertier in tijden gehad. ğŸ•ğŸ“ğŸ•ï¸</p>\n",
				"content_text": "'Wat bedoel je, hij is ontsnapt?â€™ snauwt hij haar toe. De takken op de zachte bosgrond kraken als hij met een ferme pas op haar af komt. â€˜Normaal loopt Cooper nooit weg,â€™ bijt hij. Laura deinst wat terug. 'Rustig Jason,â€™ sust ze, â€˜het is een goed getrainde politiehond. Die loopt niet in zeven sloten tegelijk.â€™ Maar dat is ook niet de grootste zorg van Jason. \n\nHij traint al drie jaar met Cooper. Al die tijd is hij een betrouwbare partner gebleken. Een betrouwbaar middel bij het bestrijden van criminaliteit. Jason wilde hem een uitje gunnen. Even wat vertier in het anders zo intensieve schema. Hij wist dat hij haar niet alleen had moeten laten met de strijder. Ãœberhaupt had hij Cooper niet mee moeten nemen. Maar in plaats van dat toe te geven, wordt hij steeds giftiger op Laura. Dit gaat hem problemen geven op het bureau, weet hij. \n\n'Laten we het pad terug volgen naar de auto,â€™ stelde Laura voor. Maar Jason wil door. â€˜We zijn op de helft van de route en Cooper kent de weg,â€™ zegt hij bits. Na een korte woordenwisseling besluiten ze ieder een andere kant op te gaan en elkaar te treffen bij de auto op de parkeerplaats. Roepend en fluitend verdwijnt Jason verder het bos in. Laura volgt het pad terug naar de parkeerplaats. Geen spoor van Cooper tijdens deze intense speedmars. \n\nAls ze de parkeerplaats nadert, hoort ze ook Jason weer. Nog steeds roepend en fluitend. Wanneer ze elkaar weer treffen en samen naar de auto lopen is Jason radeloos. Zijn woede en furie zijn omgeslagen in angst. Ze lopen langs de enkele autoâ€™s die er geparkeerd staan. Stomverbaasd is Jason als blijkt dat Cooper op de grond achter hun auto ligt. Blij beide spoorzoekers weer te zien. Met een onbekende riem zit Cooper vast aan de trekhaak van hun auto. Jason en Laura kijken snel om zich heen, maar niemand in de buurt. â€˜Wie kan dit gedaan hebben?â€™ stamelt hij in zichzelf. \n\nAls Jason een briefje achter de ruitenwisser ontdekt, wordt hij timide. â€˜Maandag 09:00 kantoor. Commissaris Bleekveldâ€™.\n\nDe rit naar huis heeft nog nooit zo lang geduurd. Maar niet voor Cooper. Hij heeft het mooiste vertier in tijden gehad. ğŸ•ğŸ“ğŸ•ï¸\n\n",
				"date_published": "2025-03-09T15:18:08+01:00",
				"url": "https://micro.mjanssen.nl/2025/03/09/coopers-ontsnapping.html",
				"tags": ["Schrijfsels","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2025/03/09/happy-and-beautiful-sunday-morning.html",
				
				"content_html": "<p>Happy and beautiful sunday morning to you.  About to get up for a nice and relaxing walk down the river.</p>\n<p>Not looking forward to weekly house cleaning. But the missus insisted. So as a good man I do so.</p>\n<p>Enjoy your Sunday.</p>\n",
				"content_text": "Happy and beautiful sunday morning to you.  About to get up for a nice and relaxing walk down the river. \n\nNot looking forward to weekly house cleaning. But the missus insisted. So as a good man I do so. \n\nEnjoy your Sunday. \n",
				"date_published": "2025-03-09T08:30:18+01:00",
				"url": "https://micro.mjanssen.nl/2025/03/09/happy-and-beautiful-sunday-morning.html",
				"tags": ["Microposts"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2025/03/08/set-up-qos-with-edgeos.html",
				"title": "ğŸ›œSet up QOS with EdgeOS (Ubiquiti)",
				"content_html": "<p>Setting up QOS on a Ubiquiti router with EdgeOS is not very complicated and pretty straightforward. In this post I try to set forth the way to set this up. I will show two ways.</p>\n<ol>\n<li>A configuration with groups, which is slower but better manageable</li>\n<li>A configuration without groups, which is faster giving a higher throughput</li>\n</ol>\n<h2 id=\"configuration-with-groups\">Configuration with groups</h2>\n<p>This configuration with a group is nice if you want to easily add or remove nodes from QOS. You can do this by logging in to the webGUI of your Ubiquiti router and just conveniently add or remove a IP. In the script below that group is called â€œQOS_High_Prio_Nodesâ€. A default IP is added â€œ192.168.130.1â€.</p>\n<p>The downside of this script is that because we are marking the traffic, the router gets pretty busy and so the throughput of the traffic goes significantly down.</p>\n<ol>\n<li>\n<p>Create an address group for high-priority nodes.<br>\nThis group (QOS_High_Prio_Nodes) can be easily managed from the webGui.</p>\n</li>\n<li>\n<p>Mark traffic via a firewall rule<br>\nThis marking makes it possible to use a group, as using a group directly is not possible. The downside is that the throughput is significantly lower than not marking the traffic.</p>\n</li>\n<li>\n<p>Define a traffic shaper policy for download traffic<br>\nHere you set the true bandwidth of your broadband connection with your ISP.</p>\n</li>\n<li>\n<p><strong>Class 10</strong>: High priority for traffic to QOS_High_Prio_Nodes</p>\n</li>\n<li>\n<p><strong>Class 20</strong>: Lower priority for traffic from VLAN200 (192.168.200.0/24)</p>\n</li>\n<li>\n<p><strong>Class 30</strong>: Lower priority for traffic from VLAN120 (192.168.120.0/24)<br>\nIn this example there are 3 classes set. All with their own bandwidth-quota and priority.</p>\n</li>\n<li>\n<p><strong>Default Class</strong>: Other traffic receives default treatment.<br>\nAll other traffic is shaped at the lowest priority.</p>\n<p>Make sure the sum of all the bandwidth does not excite 100%</p>\n</li>\n<li>\n<p>Apply the policy to both interfaces.<br>\nSince I own a Ubiquiti Edgerouter ER-12 the default WAN port is eth9. Of course if your WAN is on a different port, adjust accordingly.</p>\n</li>\n</ol>\n<p><code>Script 1</code></p>\n<pre><code>configure\n\n# 1. Create an address group for all high priority nodes\nset firewall group address-group QOS_High_Prio_Nodes address 192.168.130.1\nset firewall group address-group QOS_High_Prio_Nodes description &quot;Address group for nodes with high priority&quot;\n\n# 2. Mark traffic via a firewall rule\nset firewall modify MARK_QOS_High_Prio_Nodes rule 10 action modify\nset firewall modify MARK_QOS_High_Prio_Nodes rule 10 modify mark 10\nset firewall modify MARK_QOS_High_Prio_Nodes rule 10 source group address-group QOS_High_Prio_Nodes\nset firewall modify MARK_QOS_High_Prio_Nodes rule 10 description &quot;Mark traffic for QOS_High_Prio_Nodes&quot;\n\n# 3. Define a traffic shaper policy for download traffic\nset traffic-policy shaper DOWNLOAD_POLICY bandwidth 910mbit\nset traffic-policy shaper DOWNLOAD_POLICY description &quot;QoS policy for download traffic, total bandwidth 910 Mbps&quot;\n\n# 4. Class 10: High priority for VLAN30 traffic (192.168.130.1/32)\nset traffic-policy shaper DOWNLOAD_POLICY class 10 bandwidth 5%\nset traffic-policy shaper DOWNLOAD_POLICY class 10 ceiling 100%\nset traffic-policy shaper DOWNLOAD_POLICY class 10 priority 7\nset traffic-policy shaper DOWNLOAD_POLICY class 10 queue-type fair-queue\nset traffic-policy shaper DOWNLOAD_POLICY class 10 match VLAN30_QOS_HIGH_PRIORITY mark 10\nset traffic-policy shaper DOWNLOAD_POLICY class 10 description &quot;High priority (50% guaranteed) for PRIO nodes&quot;\n\n# 5. Class 20: Lower priority for VLAN20 traffic (192.168.20.0/24)\n# If VLAN20 does not exist in your network, remove this class.\nset traffic-policy shaper DOWNLOAD_POLICY class 20 bandwidth 20%\nset traffic-policy shaper DOWNLOAD_POLICY class 20 ceiling 100%\nset traffic-policy shaper DOWNLOAD_POLICY class 20 priority 4\nset traffic-policy shaper DOWNLOAD_POLICY class 20 queue-type fair-queue\nset traffic-policy shaper DOWNLOAD_POLICY class 20 match VLAN20_PRIORITY ip source address 192.168.120.0/24\nset traffic-policy shaper DOWNLOAD_POLICY class 20 description &quot;Lower priority (20% guaranteed) for VLAN20 traffic&quot;\n\n# 6. Class 30: Lower priority for VLAN178 traffic (192.168.178.0/24)\nset traffic-policy shaper DOWNLOAD_POLICY class 30 bandwidth 65%\nset traffic-policy shaper DOWNLOAD_POLICY class 30 ceiling 100%\nset traffic-policy shaper DOWNLOAD_POLICY class 30 priority 3\nset traffic-policy shaper DOWNLOAD_POLICY class 30 queue-type fair-queue\nset traffic-policy shaper DOWNLOAD_POLICY class 30 match VLAN178_PRIORITY ip source address 192.168.200.0/24\nset traffic-policy shaper DOWNLOAD_POLICY class 30 description &quot;Lower priority (20% guaranteed) for VLAN178 traffic&quot;\n\n# 7. Default class: Other traffic gets standard treatment\nset traffic-policy shaper DOWNLOAD_POLICY default bandwidth 10%\nset traffic-policy shaper DOWNLOAD_POLICY default ceiling 100%\nset traffic-policy shaper DOWNLOAD_POLICY default priority 1\nset traffic-policy shaper DOWNLOAD_POLICY default queue-type fair-queue\n\n# 8. Apply the policy to both interfaces:\n# - eth9: Outbound traffic to the internet\nset interfaces ethernet eth9 traffic-policy out DOWNLOAD_POLICY\nset interfaces ethernet eth9 description &quot;WAN interface with QoS policy applied to outbound traffic&quot;\n\ncommit\nsave\nexit\n</code></pre>\n<h2 id=\"configuration-without-groups-but-a-higher-throughput\">Configuration without groups, but a higher throughput</h2>\n<p>This configuration lacks groups, which would have given it the ability to be more manageable. More manageable in the way that you could add and remove modes (IPâ€™s) to and from an address-group in the webGUI of your Ubiquiti router. This would have been very convenient. But more on that later.</p>\n<p>The great benefit of dropping the convenience of the traffic marking is that you get the max possible throughput of the router.</p>\n<ol>\n<li>\n<p>Define a traffic shaping policy for download traffic<br>\nHere you set the true bandwidth of your broadband connection with your ISP.</p>\n</li>\n<li>\n<p>Class 10: High priority for VLAN30 traffic (192.168.130.1/32)<br>\nThis now your node this the highest priority for QOS</p>\n</li>\n<li>\n<p>Class 20: Lower priority for VLAN120 traffic (192.168.120.0/24)</p>\n</li>\n<li>\n<p>Class 30: Lower priority for VLAN140 traffic (192.168.140.0/24)</p>\n</li>\n<li>\n<p>Default class: Other traffic gets standard treatment<br>\nAll other traffic is shaped at the lowest priority.</p>\n<p>Make sure the sum of all the bandwidth does not excite 100%</p>\n</li>\n<li>\n<p>Apply the policy to both interface eth9<br>\nSince I own a Ubiquiti Edgerouter ER-12 the default WAN port is eth9. Of course if your WAN is on a different port, adjust accordingly.</p>\n</li>\n</ol>\n<p><code>Script 2</code></p>\n<pre><code>configure\n\n# 1. Define a traffic shaping policy for download traffic\nset traffic-policy shaper DOWNLOAD_POLICY bandwidth 910mbit\nset traffic-policy shaper DOWNLOAD_POLICY description &quot;QoS policy for download traffic, total bandwidth 910 Mbps&quot;\n\n# 2. Class 10: High priority for (192.168.130.1/32)\nset traffic-policy shaper DOWNLOAD_POLICY class 10 bandwidth 5%\nset traffic-policy shaper DOWNLOAD_POLICY class 10 ceiling 100%\nset traffic-policy shaper DOWNLOAD_POLICY class 10 priority 7\nset traffic-policy shaper DOWNLOAD_POLICY class 10 queue-type fair-queue\nset traffic-policy shaper DOWNLOAD_POLICY class 10 match VLAN30_QOS_HIGH_PRIORITY ip source address 192.168.130.1/32\nset traffic-policy shaper DOWNLOAD_POLICY class 10 description &quot;High priority (5% guaranteed) for TV&quot;\n\n# 3. Class 20: Lower priority for VLAN120 traffic (192.168.120.0/24)\n# If VLAN120 does not exist in your network, remove this class.\nset traffic-policy shaper DOWNLOAD_POLICY class 20 bandwidth 20%\nset traffic-policy shaper DOWNLOAD_POLICY class 20 ceiling 100%\nset traffic-policy shaper DOWNLOAD_POLICY class 20 priority 4\nset traffic-policy shaper DOWNLOAD_POLICY class 20 queue-type fair-queue\nset traffic-policy shaper DOWNLOAD_POLICY class 20 match VLAN20_PRIORITY ip source address 192.168.120.0/24\nset traffic-policy shaper DOWNLOAD_POLICY class 20 description &quot;Lower priority (20% guaranteed) for VLAN120 traffic&quot;\n\n# 4.Class 30: Lower priority for VLAN140 traffic (192.168.140.0/24)\n# If VLAN140 does not exist in your network, remove this class.\nset traffic-policy shaper DOWNLOAD_POLICY class 30 bandwidth 65%\nset traffic-policy shaper DOWNLOAD_POLICY class 30 ceiling 100%\nset traffic-policy shaper DOWNLOAD_POLICY class 30 priority 3\nset traffic-policy shaper DOWNLOAD_POLICY class 30 queue-type fair-queue\nset traffic-policy shaper DOWNLOAD_POLICY class 30 match VLAN178_PRIORITY ip source address 192.168.140.0/24\nset traffic-policy shaper DOWNLOAD_POLICY class 30 description &quot;Lower priority (65% guaranteed) for VLAN140 traffic&quot;\n\n# 5. Default class: Other traffic gets standard treatment\nset traffic-policy shaper DOWNLOAD_POLICY default bandwidth 10%\nset traffic-policy shaper DOWNLOAD_POLICY default ceiling 100%\nset traffic-policy shaper DOWNLOAD_POLICY default priority 1\nset traffic-policy shaper DOWNLOAD_POLICY default queue-type fair-queue\n\n# 6. Apply the policy to both interfaces:\n# - eth9: outbound internet-facing interface\nset interfaces ethernet eth9 traffic-policy out DOWNLOAD_POLICY\nset interfaces ethernet eth9 description &quot;WAN interface with QoS policy applied to outbound traffic&quot;\n\ncommit\nsave\nexit\n</code></pre>\n<p>If this blog was any help to you, give away a free Lucky Four-Leaf Clover \n    <button class=\"tinylytics_kudos\" data-path=\"/2025/03/08/set-up-qos-with-edgeos.html\"></button></p>\n<p>ğŸ“ğŸ®ğŸ“º</p>\n",
				"content_text": "Setting up QOS on a Ubiquiti router with EdgeOS is not very complicated and pretty straightforward. In this post I try to set forth the way to set this up. I will show two ways.\n\n1. A configuration with groups, which is slower but better manageable \n2. A configuration without groups, which is faster giving a higher throughput \n\n## Configuration with groups\nThis configuration with a group is nice if you want to easily add or remove nodes from QOS. You can do this by logging in to the webGUI of your Ubiquiti router and just conveniently add or remove a IP. In the script below that group is called â€œQOS\\_High\\_Prio\\_Nodesâ€. A default IP is added â€œ192.168.130.1â€.\n\nThe downside of this script is that because we are marking the traffic, the router gets pretty busy and so the throughput of the traffic goes significantly down.\n\n1. Create an address group for high-priority nodes.  \n\tThis group (QOS\\_High\\_Prio\\_Nodes) can be easily managed from the webGui.  \n\n2. Mark traffic via a firewall rule  \n\tThis marking makes it possible to use a group, as using a group directly is not possible. The downside is that the throughput is significantly lower than not marking the traffic.  \n\n3. Define a traffic shaper policy for download traffic  \n\tHere you set the true bandwidth of your broadband connection with your ISP.   \n\n4. **Class 10**: High priority for traffic to QOS\\_High\\_Prio\\_Nodes\n5. **Class 20**: Lower priority for traffic from VLAN200 (192.168.200.0/24)\n6. **Class 30**: Lower priority for traffic from VLAN120 (192.168.120.0/24)  \n\tIn this example there are 3 classes set. All with their own bandwidth-quota and priority.  \n\n7. **Default Class**: Other traffic receives default treatment.  \n\tAll other traffic is shaped at the lowest priority.  \n\t  \n\tMake sure the sum of all the bandwidth does not excite 100%  \n\n8. Apply the policy to both interfaces.  \n\tSince I own a Ubiquiti Edgerouter ER-12 the default WAN port is eth9. Of course if your WAN is on a different port, adjust accordingly.\n\n`Script 1`\n\n\tconfigure\n\t\n\t# 1. Create an address group for all high priority nodes\n\tset firewall group address-group QOS_High_Prio_Nodes address 192.168.130.1\n\tset firewall group address-group QOS_High_Prio_Nodes description \"Address group for nodes with high priority\"\n\t\n\t# 2. Mark traffic via a firewall rule\n\tset firewall modify MARK_QOS_High_Prio_Nodes rule 10 action modify\n\tset firewall modify MARK_QOS_High_Prio_Nodes rule 10 modify mark 10\n\tset firewall modify MARK_QOS_High_Prio_Nodes rule 10 source group address-group QOS_High_Prio_Nodes\n\tset firewall modify MARK_QOS_High_Prio_Nodes rule 10 description \"Mark traffic for QOS_High_Prio_Nodes\"\n\t\n\t# 3. Define a traffic shaper policy for download traffic\n\tset traffic-policy shaper DOWNLOAD_POLICY bandwidth 910mbit\n\tset traffic-policy shaper DOWNLOAD_POLICY description \"QoS policy for download traffic, total bandwidth 910 Mbps\"\n\t\n\t# 4. Class 10: High priority for VLAN30 traffic (192.168.130.1/32)\n\tset traffic-policy shaper DOWNLOAD_POLICY class 10 bandwidth 5%\n\tset traffic-policy shaper DOWNLOAD_POLICY class 10 ceiling 100%\n\tset traffic-policy shaper DOWNLOAD_POLICY class 10 priority 7\n\tset traffic-policy shaper DOWNLOAD_POLICY class 10 queue-type fair-queue\n\tset traffic-policy shaper DOWNLOAD_POLICY class 10 match VLAN30_QOS_HIGH_PRIORITY mark 10\n\tset traffic-policy shaper DOWNLOAD_POLICY class 10 description \"High priority (50% guaranteed) for PRIO nodes\"\n\t\n\t# 5. Class 20: Lower priority for VLAN20 traffic (192.168.20.0/24)\n\t# If VLAN20 does not exist in your network, remove this class.\n\tset traffic-policy shaper DOWNLOAD_POLICY class 20 bandwidth 20%\n\tset traffic-policy shaper DOWNLOAD_POLICY class 20 ceiling 100%\n\tset traffic-policy shaper DOWNLOAD_POLICY class 20 priority 4\n\tset traffic-policy shaper DOWNLOAD_POLICY class 20 queue-type fair-queue\n\tset traffic-policy shaper DOWNLOAD_POLICY class 20 match VLAN20_PRIORITY ip source address 192.168.120.0/24\n\tset traffic-policy shaper DOWNLOAD_POLICY class 20 description \"Lower priority (20% guaranteed) for VLAN20 traffic\"\n\t\n\t# 6. Class 30: Lower priority for VLAN178 traffic (192.168.178.0/24)\n\tset traffic-policy shaper DOWNLOAD_POLICY class 30 bandwidth 65%\n\tset traffic-policy shaper DOWNLOAD_POLICY class 30 ceiling 100%\n\tset traffic-policy shaper DOWNLOAD_POLICY class 30 priority 3\n\tset traffic-policy shaper DOWNLOAD_POLICY class 30 queue-type fair-queue\n\tset traffic-policy shaper DOWNLOAD_POLICY class 30 match VLAN178_PRIORITY ip source address 192.168.200.0/24\n\tset traffic-policy shaper DOWNLOAD_POLICY class 30 description \"Lower priority (20% guaranteed) for VLAN178 traffic\"\n\t\n\t# 7. Default class: Other traffic gets standard treatment\n\tset traffic-policy shaper DOWNLOAD_POLICY default bandwidth 10%\n\tset traffic-policy shaper DOWNLOAD_POLICY default ceiling 100%\n\tset traffic-policy shaper DOWNLOAD_POLICY default priority 1\n\tset traffic-policy shaper DOWNLOAD_POLICY default queue-type fair-queue\n\t\n\t# 8. Apply the policy to both interfaces:\n\t# - eth9: Outbound traffic to the internet\n\tset interfaces ethernet eth9 traffic-policy out DOWNLOAD_POLICY\n\tset interfaces ethernet eth9 description \"WAN interface with QoS policy applied to outbound traffic\"\n\t\n\tcommit\n\tsave\n\texit\n\n## Configuration without groups, but a higher throughput\nThis configuration lacks groups, which would have given it the ability to be more manageable. More manageable in the way that you could add and remove modes (IPâ€™s) to and from an address-group in the webGUI of your Ubiquiti router. This would have been very convenient. But more on that later.\n\nThe great benefit of dropping the convenience of the traffic marking is that you get the max possible throughput of the router.\n\n1. Define a traffic shaping policy for download traffic  \n\tHere you set the true bandwidth of your broadband connection with your ISP.   \n\n2. Class 10: High priority for VLAN30 traffic (192.168.130.1/32)  \n\tThis now your node this the highest priority for QOS  \n\n3. Class 20: Lower priority for VLAN120 traffic (192.168.120.0/24) \n4. Class 30: Lower priority for VLAN140 traffic (192.168.140.0/24)\n5. Default class: Other traffic gets standard treatment  \n\tAll other traffic is shaped at the lowest priority.  \n\t  \n\tMake sure the sum of all the bandwidth does not excite 100%  \n\n6. Apply the policy to both interface eth9  \n\tSince I own a Ubiquiti Edgerouter ER-12 the default WAN port is eth9. Of course if your WAN is on a different port, adjust accordingly.\n\n`Script 2`\n\n\tconfigure\n\t\n\t# 1. Define a traffic shaping policy for download traffic\n\tset traffic-policy shaper DOWNLOAD_POLICY bandwidth 910mbit\n\tset traffic-policy shaper DOWNLOAD_POLICY description \"QoS policy for download traffic, total bandwidth 910 Mbps\"\n\t\n\t# 2. Class 10: High priority for (192.168.130.1/32)\n\tset traffic-policy shaper DOWNLOAD_POLICY class 10 bandwidth 5%\n\tset traffic-policy shaper DOWNLOAD_POLICY class 10 ceiling 100%\n\tset traffic-policy shaper DOWNLOAD_POLICY class 10 priority 7\n\tset traffic-policy shaper DOWNLOAD_POLICY class 10 queue-type fair-queue\n\tset traffic-policy shaper DOWNLOAD_POLICY class 10 match VLAN30_QOS_HIGH_PRIORITY ip source address 192.168.130.1/32\n\tset traffic-policy shaper DOWNLOAD_POLICY class 10 description \"High priority (5% guaranteed) for TV\"\n\t\n\t# 3. Class 20: Lower priority for VLAN120 traffic (192.168.120.0/24)\n\t# If VLAN120 does not exist in your network, remove this class.\n\tset traffic-policy shaper DOWNLOAD_POLICY class 20 bandwidth 20%\n\tset traffic-policy shaper DOWNLOAD_POLICY class 20 ceiling 100%\n\tset traffic-policy shaper DOWNLOAD_POLICY class 20 priority 4\n\tset traffic-policy shaper DOWNLOAD_POLICY class 20 queue-type fair-queue\n\tset traffic-policy shaper DOWNLOAD_POLICY class 20 match VLAN20_PRIORITY ip source address 192.168.120.0/24\n\tset traffic-policy shaper DOWNLOAD_POLICY class 20 description \"Lower priority (20% guaranteed) for VLAN120 traffic\"\n\t\n\t# 4.Class 30: Lower priority for VLAN140 traffic (192.168.140.0/24)\n\t# If VLAN140 does not exist in your network, remove this class.\n\tset traffic-policy shaper DOWNLOAD_POLICY class 30 bandwidth 65%\n\tset traffic-policy shaper DOWNLOAD_POLICY class 30 ceiling 100%\n\tset traffic-policy shaper DOWNLOAD_POLICY class 30 priority 3\n\tset traffic-policy shaper DOWNLOAD_POLICY class 30 queue-type fair-queue\n\tset traffic-policy shaper DOWNLOAD_POLICY class 30 match VLAN178_PRIORITY ip source address 192.168.140.0/24\n\tset traffic-policy shaper DOWNLOAD_POLICY class 30 description \"Lower priority (65% guaranteed) for VLAN140 traffic\"\n\t\n\t# 5. Default class: Other traffic gets standard treatment\n\tset traffic-policy shaper DOWNLOAD_POLICY default bandwidth 10%\n\tset traffic-policy shaper DOWNLOAD_POLICY default ceiling 100%\n\tset traffic-policy shaper DOWNLOAD_POLICY default priority 1\n\tset traffic-policy shaper DOWNLOAD_POLICY default queue-type fair-queue\n\t\n\t# 6. Apply the policy to both interfaces:\n\t# - eth9: outbound internet-facing interface\n\tset interfaces ethernet eth9 traffic-policy out DOWNLOAD_POLICY\n\tset interfaces ethernet eth9 description \"WAN interface with QoS policy applied to outbound traffic\"\n\t\n\tcommit\n\tsave\n\texit\n\t\nIf this blog was any help to you, give away a free Lucky Four-Leaf Clover {{< tinykudos >}}\n\nğŸ“ğŸ®ğŸ“º\n\n",
				"date_published": "2025-03-08T21:55:38+01:00",
				"url": "https://micro.mjanssen.nl/2025/03/08/set-up-qos-with-edgeos.html",
				"tags": ["Technology","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2025/03/08/finished-reading-ik-weet-je.html",
				
				"content_html": "<p>Finished reading: <a href=\"https://micro.blog/books/9789493168060\">Ik weet je wachtwoord</a> by DaniÃ«l Verlaan ğŸ“š</p>\n<p>Great book (in Dutch) about the dark and dangers on the internet.\nGreat read and also a nice audiobook to listen to.</p>\n",
				"content_text": "Finished reading: [Ik weet je wachtwoord](https://micro.blog/books/9789493168060) by DaniÃ«l Verlaan ğŸ“š\n\nGreat book (in Dutch) about the dark and dangers on the internet.\nGreat read and also a nice audiobook to listen to.\n\n",
				"date_published": "2025-03-08T13:23:14+01:00",
				"url": "https://micro.mjanssen.nl/2025/03/08/finished-reading-ik-weet-je.html",
				"tags": ["Microposts"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2025/03/08/it-is-a-beautiful-sunny.html",
				
				"content_html": "<p>It is a beautiful sunny saturday morning. A small coffeeâ˜•ï¸, MacbookğŸ’», sitting in the sunâ˜€ behind the windows. Feels like an early spring.</p>\n<p>Have a great weekend, you all.</p>\n",
				"content_text": "It is a beautiful sunny saturday morning. A small coffeeâ˜•ï¸, MacbookğŸ’», sitting in the sunâ˜€ behind the windows. Feels like an early spring.\r\n\r\nHave a great weekend, you all.\r\n",
				"date_published": "2025-03-08T09:20:21+01:00",
				"url": "https://micro.mjanssen.nl/2025/03/08/it-is-a-beautiful-sunny.html",
				"tags": ["Microposts"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2025/03/08/it-is-a-beutiful-sunny.html",
				
				"content_html": "<p>It is a beutiful sunny saturday morning. A small coffeeâ˜•ï¸, MacbookğŸ’», sitting in the sunâ˜€ behind the windows. Feels like an early spring.</p>\n<p>Have a great weekend, you all.</p>\n",
				"content_text": "It is a beutiful sunny saturday morning. A small coffeeâ˜•ï¸, MacbookğŸ’», sitting in the sunâ˜€ behind the windows. Feels like an early spring. \r\n\r\nHave a great weekend, you all.\n",
				"date_published": "2025-03-08T09:15:47+01:00",
				"url": "https://micro.mjanssen.nl/2025/03/08/it-is-a-beutiful-sunny.html",
				"tags": ["Microposts"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2025/01/20/dont-stop-remastered-the-stone.html",
				
				"content_html": "<p>Don&rsquo;t Stop - Remastered 2009\nThe Stone Roses</p>\n<p><a href=\"https://song.link/s/2Kwf8mUygPEriB7GVErizM\">song.link/s/2Kwf8mU&hellip;</a></p>\n",
				"content_text": "Don't Stop - Remastered 2009 \nThe Stone Roses\n\n\n[song.link/s/2Kwf8mU...](https://song.link/s/2Kwf8mUygPEriB7GVErizM)\n",
				"date_published": "2025-01-20T06:54:45+01:00",
				"url": "https://micro.mjanssen.nl/2025/01/20/dont-stop-remastered-the-stone.html",
				"tags": ["Microposts"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2025/01/11/in-freddy-mecury-died-and.html",
				
				"content_html": "<p>In 1991 Freddy Mecury died and I was at my best friend&rsquo;s place making some bad jokes about it. My friend was a die-hard fan of Queen. I was not. Must have probably hurt him badly.</p>\n<p>For the years that followed I really got to appreciate (understatement) the genius music that Queen made. I feel terrible about it now how I acted as a 20-year old. I can&rsquo;t reverse how I acted. Not only did I hurt my (then) best friend, but I was also disdainful to a genius singer, composer and probably a nice guy.</p>\n<p>After 34 years this is still on my mind&hellip; not all the time&hellip;. but every time I listen to Queen.</p>\n",
				"content_text": "In 1991 Freddy Mecury died and I was at my best friend's place making some bad jokes about it. My friend was a die-hard fan of Queen. I was not. Must have probably hurt him badly. \n\nFor the years that followed I really got to appreciate (understatement) the genius music that Queen made. I feel terrible about it now how I acted as a 20-year old. I can't reverse how I acted. Not only did I hurt my (then) best friend, but I was also disdainful to a genius singer, composer and probably a nice guy. \n\nAfter 34 years this is still on my mind... not all the time.... but every time I listen to Queen. \n",
				"date_published": "2025-01-11T13:24:00+01:00",
				"url": "https://micro.mjanssen.nl/2025/01/11/in-freddy-mecury-died-and.html",
				"tags": ["Microposts"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2024/12/18/have-started-to.html",
				
				"content_html": "<p>Have started to automate things in DEVONthink 3. With Applescript. This is the first attempt. A script to create zettelkasten notes in the current group. ğŸ‘¨ğŸ½â€ğŸ’»</p>\n<p><a href=\"https://github.com/marc0janssen/DEVONthink-Assets/tree/main\">github.com/marc0jans&hellip;</a></p>\n",
				"content_text": "Have started to automate things in DEVONthink 3. With Applescript. This is the first attempt. A script to create zettelkasten notes in the current group. ğŸ‘¨ğŸ½â€ğŸ’»\r\n\r\n[github.com/marc0jans...](https://github.com/marc0janssen/DEVONthink-Assets/tree/main) \n",
				"date_published": "2024-12-18T21:49:57+01:00",
				"url": "https://micro.mjanssen.nl/2024/12/18/have-started-to.html",
				"tags": ["Microposts"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2024/12/15/awake-on-a.html",
				
				"content_html": "<p>Awake on a Sunday morning (or at night if you wish) at 05:15.</p>\n<p>Picking up the phone and start browsing micro.blog</p>\n<p>Is that normal behaviour?</p>\n",
				"content_text": "Awake on a Sunday morning (or at night if you wish) at 05:15. \n\nPicking up the phone and start browsing micro.blog \n\nIs that normal behaviour?\n",
				"date_published": "2024-12-15T07:39:45+01:00",
				"url": "https://micro.mjanssen.nl/2024/12/15/awake-on-a.html",
				"tags": ["Microposts"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2024/12/14/i-cant-imagine.html",
				
				"content_html": "<p>I canâ€™t imagine anyone not wanting a nice 16 year old lagavulin.</p>\n<p>Cheers ğŸ¥ƒ</p>\n<!-- raw HTML omitted -->\n",
				"content_text": "I canâ€™t imagine anyone not wanting a nice 16 year old lagavulin. \n\nCheers ğŸ¥ƒ \n\n<img src=\"https://micro.mjanssen.nl/uploads/2024/f3a8dbe4e5.jpg\" width=\"450\" height=\"600\" alt=\"\">\n",
				"date_published": "2024-12-14T21:06:52+01:00",
				"url": "https://micro.mjanssen.nl/2024/12/14/i-cant-imagine.html",
				"tags": ["Microposts"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2024/12/07/getting-your-emby.html",
				"title": "ğŸ“ºGetting your Emby library scanned for new content in four ways.",
				"content_html": "<p>Running Emby en Radarr/Sonarr on different servers or in different container can be a pain in the ass to get your content scanned.</p>\n<p>But it is much easier than you think if you know whatâ€™s going on inside the services. The TL;DR is <strong>keep your content path the same in EMBY and in Sonarr/Radarr</strong>. If you donâ€™t keep them the same, you run into trouble.</p>\n<p>First, I show two options when you canâ€™t keep the paths the same (say you have a linux node running EMBY and a Windows (donâ€™t mention it) node for Sonarr/Radarr. Itâ€™s obvious the paths will never be the same, as Linux will give you a PATH like below.</p>\n<pre><code>/home/user/video/movies/Your Old Movie (1921)/Your.Old.Movie.1921.Remux-2160p.mkv\n</code></pre>\n<p>Where Windows (sh*t have to mention it again) will give you a path</p>\n<pre><code>D:\\data\\video\\movies\\Your Old Movie (1921)\\Your.Old.Movie.1921.Remux-2160p.mkv\n</code></pre>\n<p>The slashed only (Linux forward slash / and Windows a backslash \\ ) already makes this a problem.</p>\n<p>Then I will show you two options if you can the PATHs the same. This can be done when:</p>\n<ol>\n<li>You run all your software on one node, therefor the content PATHs in EMBY en Sonarr/Radarr will be the same (Obviously)</li>\n<li>When you run multiple nodes of the SAME OS and run the services (EMBY, Sonarr, Radarr) in DOCKER, and therefore you can keep the PATHs the same inside your docker containers.</li>\n<li>When you run multiple nodes of THE SAME OS (for EMBY, Sonarr and Radarr) and store the content on the same network share (a third node) via Radarr/Sonarr and EMBY will scan the content on that same third node.</li>\n</ol>\n<h2 id=\"option-1-different-paths-you-cant-keep-the-paths-the-same\">Option 1 different paths (you canâ€™t keep the paths the same)</h2>\n<p>This method triggers a <strong>complete</strong> library scan. This work fine but is suboptimal. When your library is large, or you frequently trigger the library scan, it will have an impact on EMBY.</p>\n<pre><code>  curl -X POST &quot;${EMBY_HOST}/Emby/Library/Refresh?api_key=${EMBY_APIKEY}&quot; --data &quot;&quot;\n</code></pre>\n<p>Where:</p>\n<pre><code>EMBY_HOST = http:/192.168.1.1:0896 or https://www.yourdoamin.com:443\n\nEMBY_APIKEY = XXXXXXYYYYYZZZZZZ \n</code></pre>\n<h2 id=\"option-2-different-paths-you-cant-keep-the-paths-the-same\">Option 2 different paths (you canâ€™t keep the paths the same)</h2>\n<p>This method tiggers a scan for a certain library in your collection (EMBY_PARENT_ID). The advance to the pervious option is that you only trigger one collection in the library. The downside is you have to fiddle around with the EMBY_PARENT_ID. These can be obtained from the URL when you open the collection in EMBY.</p>\n<pre><code>curl -X POST &quot;${EMBY_URL}/emby/Items/${EMBY_PARENT_ID}/Refresh?Recursive=true&amp;MetadataRefreshMode=Default&amp;ImageRefreshMode=Default&amp;ReplaceAllMetadata=false&amp;ReplaceAllImages=false&amp;api_key=${EMBY_APIKEY}&quot; -H &quot;accept: */*&quot; -d â€œâ€\n</code></pre>\n<p>Where:</p>\n<pre><code>EMBY_HOST = http:/192.168.1.1:0896 or https://www.yourdoamin.com:443\n\nEMBY_APIKEY = XXXXXXYYYYYZZZZZZ \n\nEMBY_PARENT_ID = 12\n</code></pre>\n<h2 id=\"option-3-same-paths-you-can-keep-the-path-in-arr-equal-to-the-path-in-emby\">Option 3 Same paths (you can keep the path in *arr equal to the path in EMBY)</h2>\n<p>This is the simplest to configure the default trigger in Sonarr/Radarr</p>\n<p><img src=\"https://micro.mjanssen.nl/uploads/2024/cleanshot-2023-02-02-at-17.38.142x.png\" alt=\"\"></p>\n<h2 id=\"option-4-same-paths-you-can-keep-the-path-in-arr-equal-to-the-path-in-emby\">Option 4 Same paths (you can keep the path in *arr equal to the path in EMBY)</h2>\n<p>This method tiggers a scan for a certain library in your collection. The advance to the pervious option is that you add your own logic to the scan. The other advance is that you can fill-out <strong>Path</strong> and <strong>UpdateType</strong> from the environment variables in Linux (or your container)</p>\n<pre><code>  curl -X POST &quot;${EMBY_URL}/emby/Library/Media/Updated?api_key=${EMBY_APIKEY}&quot; -H &quot;accept: */*&quot; -H &quot;Content-Type: application/json&quot; -d &quot;{\\&quot;Updates\\&quot;:[{\\&quot;Path\\&quot;:\\&quot;${Path}\\&quot;,\\&quot;UpdateType\\&quot;:\\&quot;${UpdateType}\\&quot;}]}&quot;\n</code></pre>\n<p>Where:</p>\n<pre><code>EMBY_HOST = http:/192.168.1.1:0896 or https://www.yourdoamin.com:443\n\nEMBY_APIKEY = XXXXXXYYYYYZZZZZZ \n\nPath = /movies/Old Movie, The (1921)/The.Old.Movie.1921.Bluray-2160p.mkv\n\nUpdateType = [ Created | Modified | Deleted ] (optional)\n</code></pre>\n<p>Here is an example script I use for Radarr and Sonarr. I like separate scripts for Radarr and Sonarr, but you easily merge them and create one script for both Radarr and Sonarr.</p>\n<h4 id=\"radarr\">Radarr</h4>\n<pre><code>#!/bin/bash\n\nNOW=$(date +&quot;%d-%m-%Y %H:%M&quot;)\nLOG_FILE=&quot;/logging/radarr/emby_scan.txt&quot;\nTMP_FILE=&quot;/tmp/tmp_emby_radarr.txt&quot;\nDL_FILE=&quot;/scripts/dl_radarr.txt&quot;\nDEL_FILE=&quot;/scripts/del_radarr.txt&quot;\nREN_FILE=&quot;/scripts/ren_radarr.txt&quot;\nEMBY_URL=&quot;https://emby.yourdomain.com&quot;\nEMBY_RADARR_APIKEY=&quot;xxxyyyyyzzz&quot;\n\nif [ &quot;${radarr_eventtype}&quot; != &quot;&quot; ]; then\n  if [ &quot;${radarr_eventtype}&quot; == &quot;ApplicationUpdate&quot; ] || [ &quot;${radarr_eventtype}&quot; == &quot;MovieAdded&quot; ] || [ &quot;${radarr_eventtype}&quot; == &quot;Grab&quot; ] || [ &quot;${radarr_eventtype}&quot; == &quot;HealthIssue&quot; ] || [ &quot;${radarr_eventtype}&quot; == &quot;Test&quot; ]; then\n    (echo &quot;${NOW} - [Emby Library Scan] Radarr Event Type is ${radarr_eventtype}, exiting.&quot;; cat ${LOG_FILE}) &gt; ${TMP_FILE}; mv ${TMP_FILE} ${LOG_FILE}\n    exit\n  fi\n  \n  (echo &quot;${NOW} - [Emby Library Scan] Radarr Event Type is ${radarr_eventtype}, updating Emby Library for ${radarr_movie_title}.&quot;; cat ${LOG_FILE}) &gt; ${TMP_FILE}; mv ${TMP_FILE} ${LOG_FILE}\n  \n  if [ &quot;$radarr_eventtype&quot; == &quot;Download&quot; ]; then\n    echo &quot;${radarr_movie_title} (${radarr_movie_year})&quot; &gt;&gt; ${DL_FILE}\n    UpdateType=&quot;Created&quot;\n    Path=&quot;${radarr_movie_path}&quot;\n  fi\n  \n  if [ &quot;${radarr_eventtype}&quot; == &quot;MovieDelete&quot; ]; then\n    echo &quot;${radarr_movie_title} (${radarr_movie_year})&quot; &gt;&gt; ${DEL_FILE}\n    UpdateType=&quot;Deleted&quot;\n    Path=&quot;${radarr_movie_path}&quot;\n  fi\n  \n  if [ &quot;$radarr_eventtype&quot; == &quot;Rename&quot; ]; then\n    echo &quot;${radarr_movie_title} (${radarr_movie_year})&quot; &gt;&gt; ${REN_FILE}\n    UpdateType=&quot;Modified&quot;\n    Path=&quot;${radarr_movie_path}&quot;\n  fi\n \n  curl -X POST &quot;${EMBY_URL}/emby/Library/Media/Updated?api_key=${EMBY_RADARR_APIKEY}&quot; -H &quot;accept: */*&quot; -H &quot;Content-Type: application/json&quot; -d &quot;{\\&quot;Updates\\&quot;:[{\\&quot;Path\\&quot;:\\&quot;${Path}\\&quot;,\\&quot;UpdateType\\&quot;:\\&quot;${UpdateType}\\&quot;}]}&quot;\n  \nelse\n  (echo &quot;${NOW} - [Emby Library Scan] Radarr Event Type is empty.&quot;; cat ${LOG_FILE}) &gt; ${TMP_FILE}; mv ${TMP_FILE} ${LOG_FILE}\n\nfi\n\n# write a status file with date of last run.  Helps troubleshoot that cron task is running.\necho &quot;$(basename $0) last run was at $(date)&quot; &gt; /logging/radarr/_$(basename $0)_lastrun.txt\n</code></pre>\n<h4 id=\"sonarr\">Sonarr</h4>\n<pre><code>#!/bin/bash\n\nNOW=$(date +&quot;%d-%m-%Y %H:%M&quot;)\nLOG_FILE=&quot;/logging/sonarr/emby_scan.txt&quot;\nTMP_FILE=&quot;/tmp/tmp_emby_sonarr.txt&quot;\nDL_FILE=&quot;/scripts/dl_sonarr.txt&quot;\nDEL_FILE=&quot;/scripts/del_sonarr.txt&quot;\nREN_FILE=&quot;/scripts/ren_sonarr.txt&quot;\nEMBY_URL=&quot;https://emby.yourdomain.com&quot;\nEMBY_SONARR_APIKEY=&quot;zzzzzyyyyyxxxxx&quot;\n\nif [ &quot;${sonarr_eventtype}&quot; != &quot;&quot; ]; then\n  if [ &quot;${sonarr_eventtype}&quot; == &quot;ApplicationUpdate&quot; ] || [ &quot;${sonarr_eventtype}&quot; == &quot;Grab&quot; ] || [ &quot;${sonarr_eventtype}&quot; == &quot;HealthIssue&quot; ] || [ &quot;${sonarr_eventtype}&quot; == &quot;Test&quot; ]; then\n    (echo &quot;${NOW} - [Emby Library Scan] Sonarr Event Type is ${sonarr_eventtype}, exiting.&quot;; cat ${LOG_FILE}) &gt; ${TMP_FILE}; mv ${TMP_FILE} ${LOG_FILE}\n    exit\n  fi\n  \n  (echo &quot;${NOW} - [Emby Library Scan] Sonarr Event Type is ${sonarr_eventtype}, updating Emby Library for ${sonarr_series_title} - ${sonarr_episodefile_episodetitles}.&quot;; cat ${LOG_FILE}) &gt; ${TMP_FILE}; mv ${TMP_FILE} ${LOG_FILE}\n  \n  if [ &quot;$sonarr_eventtype&quot; == &quot;Download&quot; ];  then\n    echo &quot;${sonarr_series_title} - ${sonarr_episodefile_episodetitles}&quot; &gt;&gt; ${DL_FILE}\n    UpdateType=&quot;Created&quot;\n    Path=&quot;${sonarr_episodefile_path}&quot;\n  fi\n  \n  if [ &quot;$sonarr_eventtype&quot; == &quot;EpisodeFileDelete&quot; ];  then\n    echo &quot;${sonarr_series_title} - ${sonarr_episodefile_episodetitles}&quot; &gt;&gt; ${DEL_FILE}\n    UpdateType=&quot;Deleted&quot;\n    Path=&quot;${sonarr_episodefile_path}&quot;\n  fi\n  \n  if [ &quot;$sonarr_eventtype&quot; == &quot;SeriesDelete&quot; ];  then\n    echo &quot;${sonarr_series_title}&quot; &gt;&gt; ${DEL_FILE}\n    UpdateType=&quot;Deleted&quot;\n    Path=&quot;${sonarr_series_path}&quot;\n  fi\n  \n  if [ &quot;$sonarr_eventtype&quot; == &quot;Rename&quot; ]; then\n    echo &quot;${sonarr_series_title}&quot; &gt;&gt; ${REN_FILE}\n    UpdateType=&quot;Modified&quot;\n    Path=&quot;${sonarr_series_path}&quot;\n  fi\n    \n  curl -X POST &quot;${EMBY_URL}/emby/Library/Media/Updated?api_key=${EMBY_SONARR_APIKEY}&quot; -H &quot;accept: */*&quot; -H &quot;Content-Type: application/json&quot; -d &quot;{\\&quot;Updates\\&quot;:[{\\&quot;Path\\&quot;:\\&quot;${Path}\\&quot;,\\&quot;UpdateType\\&quot;:\\&quot;${UpdateType}\\&quot;}]}&quot;\n  \nelse\n  (echo &quot;${NOW} - [Emby Library Scan] Sonarr Event Type is empty.&quot;; cat ${LOG_FILE}) &gt; ${TMP_FILE}; mv ${TMP_FILE} ${LOG_FILE}\n  \nfi\n\n# write a status file with date of last run.  Helps troubleshoot that cron task is running.\necho &quot;$(basename $0) last run was at $(date)&quot; &gt; /logging/sonarr/_$(basename $0)_lastrun.txt\n</code></pre>\n<p>These scripts also maintain lists of the content names, so they can be used in reporting or notification. You can, of course, strip these.</p>\n<p>I run these scripts in the <strong>Connect</strong> section in Radarr/Sonarr.</p>\n<p><img src=\"https://micro.mjanssen.nl/uploads/2024/cleanshot-2023-02-02-at-17.51.302x.png\" alt=\"\"></p>\n<p>If this blog was any help to you, give away a free Lucky Four-Leaf Clover \n    <button class=\"tinylytics_kudos\" data-path=\"/2024/12/07/getting-your-emby.html\"></button></p>\n<p>ğŸ“ºğŸ¥ğŸ“½ï¸</p>\n",
				"content_text": "Running Emby en Radarr/Sonarr on different servers or in different container can be a pain in the ass to get your content scanned.\n\nBut it is much easier than you think if you know whatâ€™s going on inside the services. The TL;DR is **keep your content path the same in EMBY and in Sonarr/Radarr**. If you donâ€™t keep them the same, you run into trouble.\n\nFirst, I show two options when you canâ€™t keep the paths the same (say you have a linux node running EMBY and a Windows (donâ€™t mention it) node for Sonarr/Radarr. Itâ€™s obvious the paths will never be the same, as Linux will give you a PATH like below.\n\n\t/home/user/video/movies/Your Old Movie (1921)/Your.Old.Movie.1921.Remux-2160p.mkv\n\nWhere Windows (sh\\*t have to mention it again) will give you a path\n\n\tD:\\data\\video\\movies\\Your Old Movie (1921)\\Your.Old.Movie.1921.Remux-2160p.mkv\n\nThe slashed only (Linux forward slash / and Windows a backslash \\\\ ) already makes this a problem. \n\nThen I will show you two options if you can the PATHs the same. This can be done when:\n\n1. You run all your software on one node, therefor the content PATHs in EMBY en Sonarr/Radarr will be the same (Obviously)\n2. When you run multiple nodes of the SAME OS and run the services (EMBY, Sonarr, Radarr) in DOCKER, and therefore you can keep the PATHs the same inside your docker containers.\n3. When you run multiple nodes of THE SAME OS (for EMBY, Sonarr and Radarr) and store the content on the same network share (a third node) via Radarr/Sonarr and EMBY will scan the content on that same third node. \n\n## Option 1 different paths (you canâ€™t keep the paths the same)\nThis method triggers a **complete** library scan. This work fine but is suboptimal. When your library is large, or you frequently trigger the library scan, it will have an impact on EMBY.\n\n\t  curl -X POST \"${EMBY_HOST}/Emby/Library/Refresh?api_key=${EMBY_APIKEY}\" --data \"\"\n\nWhere:\n\n\tEMBY_HOST = http:/192.168.1.1:0896 or https://www.yourdoamin.com:443\n\t\n\tEMBY_APIKEY = XXXXXXYYYYYZZZZZZ \n\n## Option 2 different paths (you canâ€™t keep the paths the same)\nThis method tiggers a scan for a certain library in your collection (EMBY\\_PARENT\\_ID). The advance to the pervious option is that you only trigger one collection in the library. The downside is you have to fiddle around with the EMBY\\_PARENT\\_ID. These can be obtained from the URL when you open the collection in EMBY.\n\n\tcurl -X POST \"${EMBY_URL}/emby/Items/${EMBY_PARENT_ID}/Refresh?Recursive=true&MetadataRefreshMode=Default&ImageRefreshMode=Default&ReplaceAllMetadata=false&ReplaceAllImages=false&api_key=${EMBY_APIKEY}\" -H \"accept: */*\" -d â€œâ€\n\nWhere:\n\n\tEMBY_HOST = http:/192.168.1.1:0896 or https://www.yourdoamin.com:443\n\t\n\tEMBY_APIKEY = XXXXXXYYYYYZZZZZZ \n\t\n\tEMBY_PARENT_ID = 12\n\n## Option 3 Same paths (you can keep the path in \\*arr equal to the path in EMBY)\nThis is the simplest to configure the default trigger in Sonarr/Radarr\n\n![](https://micro.mjanssen.nl/uploads/2024/cleanshot-2023-02-02-at-17.38.142x.png)\n\n## Option 4 Same paths (you can keep the path in \\*arr equal to the path in EMBY)\nThis method tiggers a scan for a certain library in your collection. The advance to the pervious option is that you add your own logic to the scan. The other advance is that you can fill-out **Path** and **UpdateType** from the environment variables in Linux (or your container)\n\n\t  curl -X POST \"${EMBY_URL}/emby/Library/Media/Updated?api_key=${EMBY_APIKEY}\" -H \"accept: */*\" -H \"Content-Type: application/json\" -d \"{\\\"Updates\\\":[{\\\"Path\\\":\\\"${Path}\\\",\\\"UpdateType\\\":\\\"${UpdateType}\\\"}]}\"\n\nWhere:\n\n\tEMBY_HOST = http:/192.168.1.1:0896 or https://www.yourdoamin.com:443\n\t\n\tEMBY_APIKEY = XXXXXXYYYYYZZZZZZ \n\t\n\tPath = /movies/Old Movie, The (1921)/The.Old.Movie.1921.Bluray-2160p.mkv\n\t\n\tUpdateType = [ Created | Modified | Deleted ] (optional)\n\nHere is an example script I use for Radarr and Sonarr. I like separate scripts for Radarr and Sonarr, but you easily merge them and create one script for both Radarr and Sonarr.\n\n#### Radarr\n\t#!/bin/bash\n\t\n\tNOW=$(date +\"%d-%m-%Y %H:%M\")\n\tLOG_FILE=\"/logging/radarr/emby_scan.txt\"\n\tTMP_FILE=\"/tmp/tmp_emby_radarr.txt\"\n\tDL_FILE=\"/scripts/dl_radarr.txt\"\n\tDEL_FILE=\"/scripts/del_radarr.txt\"\n\tREN_FILE=\"/scripts/ren_radarr.txt\"\n\tEMBY_URL=\"https://emby.yourdomain.com\"\n\tEMBY_RADARR_APIKEY=\"xxxyyyyyzzz\"\n\t\n\tif [ \"${radarr_eventtype}\" != \"\" ]; then\n\t  if [ \"${radarr_eventtype}\" == \"ApplicationUpdate\" ] || [ \"${radarr_eventtype}\" == \"MovieAdded\" ] || [ \"${radarr_eventtype}\" == \"Grab\" ] || [ \"${radarr_eventtype}\" == \"HealthIssue\" ] || [ \"${radarr_eventtype}\" == \"Test\" ]; then\n\t    (echo \"${NOW} - [Emby Library Scan] Radarr Event Type is ${radarr_eventtype}, exiting.\"; cat ${LOG_FILE}) > ${TMP_FILE}; mv ${TMP_FILE} ${LOG_FILE}\n\t    exit\n\t  fi\n\t  \n\t  (echo \"${NOW} - [Emby Library Scan] Radarr Event Type is ${radarr_eventtype}, updating Emby Library for ${radarr_movie_title}.\"; cat ${LOG_FILE}) > ${TMP_FILE}; mv ${TMP_FILE} ${LOG_FILE}\n\t  \n\t  if [ \"$radarr_eventtype\" == \"Download\" ]; then\n\t    echo \"${radarr_movie_title} (${radarr_movie_year})\" >> ${DL_FILE}\n\t    UpdateType=\"Created\"\n\t    Path=\"${radarr_movie_path}\"\n\t  fi\n\t  \n\t  if [ \"${radarr_eventtype}\" == \"MovieDelete\" ]; then\n\t    echo \"${radarr_movie_title} (${radarr_movie_year})\" >> ${DEL_FILE}\n\t    UpdateType=\"Deleted\"\n\t    Path=\"${radarr_movie_path}\"\n\t  fi\n\t  \n\t  if [ \"$radarr_eventtype\" == \"Rename\" ]; then\n\t    echo \"${radarr_movie_title} (${radarr_movie_year})\" >> ${REN_FILE}\n\t    UpdateType=\"Modified\"\n\t    Path=\"${radarr_movie_path}\"\n\t  fi\n\t \n\t  curl -X POST \"${EMBY_URL}/emby/Library/Media/Updated?api_key=${EMBY_RADARR_APIKEY}\" -H \"accept: */*\" -H \"Content-Type: application/json\" -d \"{\\\"Updates\\\":[{\\\"Path\\\":\\\"${Path}\\\",\\\"UpdateType\\\":\\\"${UpdateType}\\\"}]}\"\n\t  \n\telse\n\t  (echo \"${NOW} - [Emby Library Scan] Radarr Event Type is empty.\"; cat ${LOG_FILE}) > ${TMP_FILE}; mv ${TMP_FILE} ${LOG_FILE}\n\t\n\tfi\n\t\n\t# write a status file with date of last run.  Helps troubleshoot that cron task is running.\n\techo \"$(basename $0) last run was at $(date)\" > /logging/radarr/_$(basename $0)_lastrun.txt\n\n#### Sonarr\n\t#!/bin/bash\n\t\n\tNOW=$(date +\"%d-%m-%Y %H:%M\")\n\tLOG_FILE=\"/logging/sonarr/emby_scan.txt\"\n\tTMP_FILE=\"/tmp/tmp_emby_sonarr.txt\"\n\tDL_FILE=\"/scripts/dl_sonarr.txt\"\n\tDEL_FILE=\"/scripts/del_sonarr.txt\"\n\tREN_FILE=\"/scripts/ren_sonarr.txt\"\n\tEMBY_URL=\"https://emby.yourdomain.com\"\n\tEMBY_SONARR_APIKEY=\"zzzzzyyyyyxxxxx\"\n\t\n\tif [ \"${sonarr_eventtype}\" != \"\" ]; then\n\t  if [ \"${sonarr_eventtype}\" == \"ApplicationUpdate\" ] || [ \"${sonarr_eventtype}\" == \"Grab\" ] || [ \"${sonarr_eventtype}\" == \"HealthIssue\" ] || [ \"${sonarr_eventtype}\" == \"Test\" ]; then\n\t    (echo \"${NOW} - [Emby Library Scan] Sonarr Event Type is ${sonarr_eventtype}, exiting.\"; cat ${LOG_FILE}) > ${TMP_FILE}; mv ${TMP_FILE} ${LOG_FILE}\n\t    exit\n\t  fi\n\t  \n\t  (echo \"${NOW} - [Emby Library Scan] Sonarr Event Type is ${sonarr_eventtype}, updating Emby Library for ${sonarr_series_title} - ${sonarr_episodefile_episodetitles}.\"; cat ${LOG_FILE}) > ${TMP_FILE}; mv ${TMP_FILE} ${LOG_FILE}\n\t  \n\t  if [ \"$sonarr_eventtype\" == \"Download\" ];  then\n\t    echo \"${sonarr_series_title} - ${sonarr_episodefile_episodetitles}\" >> ${DL_FILE}\n\t    UpdateType=\"Created\"\n\t    Path=\"${sonarr_episodefile_path}\"\n\t  fi\n\t  \n\t  if [ \"$sonarr_eventtype\" == \"EpisodeFileDelete\" ];  then\n\t    echo \"${sonarr_series_title} - ${sonarr_episodefile_episodetitles}\" >> ${DEL_FILE}\n\t    UpdateType=\"Deleted\"\n\t    Path=\"${sonarr_episodefile_path}\"\n\t  fi\n\t  \n\t  if [ \"$sonarr_eventtype\" == \"SeriesDelete\" ];  then\n\t    echo \"${sonarr_series_title}\" >> ${DEL_FILE}\n\t    UpdateType=\"Deleted\"\n\t    Path=\"${sonarr_series_path}\"\n\t  fi\n\t  \n\t  if [ \"$sonarr_eventtype\" == \"Rename\" ]; then\n\t    echo \"${sonarr_series_title}\" >> ${REN_FILE}\n\t    UpdateType=\"Modified\"\n\t    Path=\"${sonarr_series_path}\"\n\t  fi\n\t    \n\t  curl -X POST \"${EMBY_URL}/emby/Library/Media/Updated?api_key=${EMBY_SONARR_APIKEY}\" -H \"accept: */*\" -H \"Content-Type: application/json\" -d \"{\\\"Updates\\\":[{\\\"Path\\\":\\\"${Path}\\\",\\\"UpdateType\\\":\\\"${UpdateType}\\\"}]}\"\n\t  \n\telse\n\t  (echo \"${NOW} - [Emby Library Scan] Sonarr Event Type is empty.\"; cat ${LOG_FILE}) > ${TMP_FILE}; mv ${TMP_FILE} ${LOG_FILE}\n\t  \n\tfi\n\t\n\t# write a status file with date of last run.  Helps troubleshoot that cron task is running.\n\techo \"$(basename $0) last run was at $(date)\" > /logging/sonarr/_$(basename $0)_lastrun.txt\n\t\n\nThese scripts also maintain lists of the content names, so they can be used in reporting or notification. You can, of course, strip these.\n\nI run these scripts in the **Connect** section in Radarr/Sonarr.\n\n![](https://micro.mjanssen.nl/uploads/2024/cleanshot-2023-02-02-at-17.51.302x.png)\n\nIf this blog was any help to you, give away a free Lucky Four-Leaf Clover {{< tinykudos >}}\n\nğŸ“ºğŸ¥ğŸ“½ï¸\n",
				"date_published": "2024-12-07T09:24:17+01:00",
				"url": "https://micro.mjanssen.nl/2024/12/07/getting-your-emby.html",
				"tags": ["Technology","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2024/12/07/choosing-your-python.html",
				"title": "ğŸ‘¨ğŸ½â€ğŸ’»Choosing your Python editing weapon",
				"content_html": "<p>Well a few days passed since I got a micro:bit&hellip; Started out with MakeCode to play around with it, but the goal was python. For this I switched to mu-editor at first. A great editor&hellip; I like the check en tidy function. But I missed the simulator I had in MakeCode. Of course you can (and must) run your code on the physical micro:bit but a simulator is great for testing and trying little pieces of code. But I accepted the fact that mu-editor and python coding didn&rsquo;t had a simulator.</p>\n<p>Then I picked up a &ldquo;old&rdquo; tool from the shed on my Macbook, Visual Studio code. I started to use it again to edit shell scripts because brackets announced to stop service this coming summer. Why not pop in python script in there. This editor offered me to install python extensions. And I started exploring the nets of inter what was possible with VScode.</p>\n<p>And I came across Device Simulator Express, an extension for VScode. Just the tool I needed to have my micro:bit simulated in VScode. Just open the extensions tab in VScode and look for &ldquo;Device Simulator Express&rdquo; and install the beast.</p>\n<p>There is one pitfall in installing this extension. After installing the extension en pressing shift-command-p to open de command-pane : enter &ldquo;device simulator express : New file&rdquo;. This will install some more dependencies and you might run in the problem that you get a message &ldquo;Device Simulator Express: Install Extension Dependencies&rdquo;. Telling you the install failed.</p>\n<p>When pressing shift-command-p and giving the command &ldquo;Device Simulator Express: Install Extension Dependencies&rdquo; as instructed, you will find that they will never get installed and you end up with a reoccurring error all the time. This seems to have something to do with python 3.9. You can fix this doing the following:</p>\n<blockquote>\n<p>On Python 3.9:</p>\n<p>Edit the file &ldquo;users&lt;user&gt;.vscodeextensionsms-python.devicesimulatorexpress-2020.0.36321outrequirements.txt&rdquo; and changed the line</p>\n<p>Pillow==7.0.0</p>\n<p>to</p>\n<p>Pillow==8.1.0</p>\n</blockquote>\n<p>Restart VScode and press shift-command-p and give the command &ldquo;Device Simulator Express: Install Extension Dependencies&rdquo; again. Now the dependencies get installed nicely.</p>\n<p>What I extra installed was a linter. Shift-command-x : this opens the extensions. Enter &ldquo;flake8&rdquo; in the search field. Sometimes you need to restart VS-code to force install-popup for flake8. Now you have error-highting in the editor as you go.</p>\n<p>And what I also installed was code formatter for python. Shift-command-x : this opens the extensions. Enter &ldquo;autopep8&rdquo; in the search field. Press shift-option-f: to start the formatter when your cursor is on a line that needs formatting. This little baby formats your code. Cut the extra white-space. Correct the indenting. All kind of stuff.</p>\n<p>I stopped using Windows at home for more than 11 years and left everything from Microsoft alone, switching to Apple and got the complete fruitbasket with all it&rsquo;s products. But VScode has surprised me and it&rsquo;s gonna stay for python editing&hellip;&hellip;</p>\n<p>If this blog was any help to you, give away a free Lucky Four-Leaf Clover \n    <button class=\"tinylytics_kudos\" data-path=\"/2024/12/07/choosing-your-python.html\"></button></p>\n<p>ğŸ“ğŸ–‹ï¸</p>\n",
				"content_text": "Well a few days passed since I got a micro:bit... Started out with MakeCode to play around with it, but the goal was python. For this I switched to mu-editor at first. A great editor... I like the check en tidy function. But I missed the simulator I had in MakeCode. Of course you can (and must) run your code on the physical micro:bit but a simulator is great for testing and trying little pieces of code. But I accepted the fact that mu-editor and python coding didn't had a simulator.\n\nThen I picked up a \"old\" tool from the shed on my Macbook, Visual Studio code. I started to use it again to edit shell scripts because brackets announced to stop service this coming summer. Why not pop in python script in there. This editor offered me to install python extensions. And I started exploring the nets of inter what was possible with VScode. \n\nAnd I came across Device Simulator Express, an extension for VScode. Just the tool I needed to have my micro:bit simulated in VScode. Just open the extensions tab in VScode and look for \"Device Simulator Express\" and install the beast. \n\nThere is one pitfall in installing this extension. After installing the extension en pressing shift-command-p to open de command-pane : enter \"device simulator express : New file\". This will install some more dependencies and you might run in the problem that you get a message \"Device Simulator Express: Install Extension Dependencies\". Telling you the install failed. \n\nWhen pressing shift-command-p and giving the command \"Device Simulator Express: Install Extension Dependencies\" as instructed, you will find that they will never get installed and you end up with a reoccurring error all the time. This seems to have something to do with python 3.9. You can fix this doing the following:\n\n> On Python 3.9:\n> \n> Edit the file \"users\\<user\\>.vscodeextensionsms-python.devicesimulatorexpress-2020.0.36321outrequirements.txt\" and changed the line\n> \n> Pillow==7.0.0\n> \n> to\n> \n> Pillow==8.1.0\n\nRestart VScode and press shift-command-p and give the command \"Device Simulator Express: Install Extension Dependencies\" again. Now the dependencies get installed nicely.\n\nWhat I extra installed was a linter. Shift-command-x : this opens the extensions. Enter \"flake8\" in the search field. Sometimes you need to restart VS-code to force install-popup for flake8. Now you have error-highting in the editor as you go.\n\nAnd what I also installed was code formatter for python. Shift-command-x : this opens the extensions. Enter \"autopep8\" in the search field. Press shift-option-f: to start the formatter when your cursor is on a line that needs formatting. This little baby formats your code. Cut the extra white-space. Correct the indenting. All kind of stuff.\n\nI stopped using Windows at home for more than 11 years and left everything from Microsoft alone, switching to Apple and got the complete fruitbasket with all it's products. But VScode has surprised me and it's gonna stay for python editing...... \n\nIf this blog was any help to you, give away a free Lucky Four-Leaf Clover {{< tinykudos >}}\n\nğŸ“ğŸ–‹ï¸\n",
				"date_published": "2024-12-07T09:23:44+01:00",
				"url": "https://micro.mjanssen.nl/2024/12/07/choosing-your-python.html",
				"tags": ["Technology","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2024/12/07/starbit-commander-ii.html",
				"title": "ğŸ‘¨ğŸ½â€ğŸ’»Starbit Commander II",
				"content_html": "<p>Well, on my quest to learn python, I poked and peeked around at the web of inters. And came across some nice sites about the micro:bits, projects and coding.</p>\n<p><a href=\"https://deejaygraham.github.io/category/microbit/\">One site</a> inspired me to create a python version of Starbit Commander. This site is home to many projects of <a href=\"https://deejaygraham.github.io/about/\">Derek Graham</a>. Next to Micro:bit bits, he has many other things too on his site.</p>\n<p>But why remake of Starbit Commander? Derek has this pleasant example of â€œ<a href=\"https://deejaygraham.github.io/2016/10/28/tiny-asteroids-for-microbit/\">Tiny Astroids</a>â€, which resembled a lot like Starbit Commander. And he created it in Pythonâ€¦ so. Mine Starbit Commander should get a python version tooâ€¦ In this little gem from Derek, he created a really, really pleasant piece of code that animated an explosion on this 5Ã—5 LED display. I loved it. And although I wanted to create Starbit from scratch in OO, I really wanted to adopt this pleasant little tiny explosion. So, I contacted Derek via Twitter, asked if he agreed to me use his explosion-code. We had a short but very nice chat on Twitter, and he agreed for the code to be reuse in Starbit Commander. Thanks, Derek!</p>\n<p>Well, I wanted to test and learn more python and also OO in python. So, I decided to try to make Starbit Commander in an OO-style. I have no experience in this, but I think (as far as I can tell) this is an OO-version of the game now. Derek mentioned on micro:bit V1&rsquo;s coding OO would let you ran into out of memory errors. I haven&rsquo;t seen them on the microbit V2 with Starbit Commander. (Now I&rsquo;m worried if I did a proper OO-coding style ;-0)</p>\n<p>I differed a bit from the original Starbit code. While de MakeCode version has power-ups to collect, in this python-version I decided to skip that and make the astroid field a bit more challenging by starting slow and easy and ending fast and astroid-crowded. Giving you more and more bonus score along the way you go.</p>\n<p>This code can be found <a href=\"https://github.com/marc0janssen/Starbit-Commander-II\">here</a>. And watch that explosionâ€¦ Thanks again, Derek Graham!</p>\n",
				"content_text": "Well, on my quest to learn python, I poked and peeked around at the web of inters. And came across some nice sites about the micro:bits, projects and coding. \n\n[One site](https://deejaygraham.github.io/category/microbit/) inspired me to create a python version of Starbit Commander. This site is home to many projects of [Derek Graham](https://deejaygraham.github.io/about/). Next to Micro:bit bits, he has many other things too on his site.\n\nBut why remake of Starbit Commander? Derek has this pleasant example of â€œ[Tiny Astroids](https://deejaygraham.github.io/2016/10/28/tiny-asteroids-for-microbit/)â€, which resembled a lot like Starbit Commander. And he created it in Pythonâ€¦ so. Mine Starbit Commander should get a python version tooâ€¦ In this little gem from Derek, he created a really, really pleasant piece of code that animated an explosion on this 5Ã—5 LED display. I loved it. And although I wanted to create Starbit from scratch in OO, I really wanted to adopt this pleasant little tiny explosion. So, I contacted Derek via Twitter, asked if he agreed to me use his explosion-code. We had a short but very nice chat on Twitter, and he agreed for the code to be reuse in Starbit Commander. Thanks, Derek!\n\nWell, I wanted to test and learn more python and also OO in python. So, I decided to try to make Starbit Commander in an OO-style. I have no experience in this, but I think (as far as I can tell) this is an OO-version of the game now. Derek mentioned on micro:bit V1's coding OO would let you ran into out of memory errors. I haven't seen them on the microbit V2 with Starbit Commander. (Now I'm worried if I did a proper OO-coding style ;-0)\n\nI differed a bit from the original Starbit code. While de MakeCode version has power-ups to collect, in this python-version I decided to skip that and make the astroid field a bit more challenging by starting slow and easy and ending fast and astroid-crowded. Giving you more and more bonus score along the way you go.\n\nThis code can be found [here](https://github.com/marc0janssen/Starbit-Commander-II). And watch that explosionâ€¦ Thanks again, Derek Graham!\n\n",
				"date_published": "2024-12-07T09:23:18+01:00",
				"url": "https://micro.mjanssen.nl/2024/12/07/starbit-commander-ii.html",
				"tags": ["Technology","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2024/12/07/microbit-fireflies.html",
				"title": "ğŸ‘¨ğŸ½â€ğŸ’»Micro:bit Fireflies",
				"content_html": "<p>My first attempt to write some (micro)Python code. Fireflies. This leds simulate fireflies in the airâ€¦</p>\n<p>By the way, I found that display.get_pixel does not return the correct value for the brightness of a LED on a micro:bit. I created this function to correct this behavior in the code (fixPixelBug).</p>\n<pre><code>from microbit import *\nimport random\n\n# This fucntions fixes the &quot;display.get_pixel&quot; bug.\n# a full bright led does not return a &quot;9&quot; but a &quot;255&quot;.\ndef fixPixelBug(brightness):\n    if brightness == 4:\n        return 3\n    elif brightness == 8:\n        return 4\n    elif brightness == 16:\n        return 5\n    elif brightness == 32:\n        return 6\n    elif brightness == 64:\n        return 7\n    elif brightness == 128:\n        return 8\n    elif brightness == 255:\n        return 9\n    else:\n        return brightness\n\n\nwhile True:\n    sleep(50)\n\n    brightness = random.randint(1, 9)\n    x = random.randint(0, 4)\n    y = random.randint(0, 4)\n    if display.get_pixel(x, y) == 0:\n        display.set_pixel(x, y, brightness)\n\n    for fireflies in range(0, 5):\n        x = random.randint(0, 4)\n        y = random.randint(0, 4)\n\n        if fixPixelBug(display.get_pixel(x, y)) &gt; 0:\n            display.set_pixel(x, y, fixPixelBug(display.get_pixel(x, y)) - 1)\n</code></pre>\n<p><a href=\"https://github.com/marc0janssen/microbit-fireflies\">Code here</a>\nğŸ“âœï¸</p>\n",
				"content_text": "My first attempt to write some (micro)Python code. Fireflies. This leds simulate fireflies in the airâ€¦\n\nBy the way, I found that display.get\\_pixel does not return the correct value for the brightness of a LED on a micro:bit. I created this function to correct this behavior in the code (fixPixelBug).\n\n\tfrom microbit import *\n\timport random\n\t\n\t# This fucntions fixes the \"display.get_pixel\" bug.\n\t# a full bright led does not return a \"9\" but a \"255\".\n\tdef fixPixelBug(brightness):\n\t    if brightness == 4:\n\t        return 3\n\t    elif brightness == 8:\n\t        return 4\n\t    elif brightness == 16:\n\t        return 5\n\t    elif brightness == 32:\n\t        return 6\n\t    elif brightness == 64:\n\t        return 7\n\t    elif brightness == 128:\n\t        return 8\n\t    elif brightness == 255:\n\t        return 9\n\t    else:\n\t        return brightness\n\t\n\t\n\twhile True:\n\t    sleep(50)\n\t\n\t    brightness = random.randint(1, 9)\n\t    x = random.randint(0, 4)\n\t    y = random.randint(0, 4)\n\t    if display.get_pixel(x, y) == 0:\n\t        display.set_pixel(x, y, brightness)\n\t\n\t    for fireflies in range(0, 5):\n\t        x = random.randint(0, 4)\n\t        y = random.randint(0, 4)\n\t\n\t        if fixPixelBug(display.get_pixel(x, y)) > 0:\n\t            display.set_pixel(x, y, fixPixelBug(display.get_pixel(x, y)) - 1)\n\n[Code here](https://github.com/marc0janssen/microbit-fireflies)\nğŸ“âœï¸\n",
				"date_published": "2024-12-07T09:22:55+01:00",
				"url": "https://micro.mjanssen.nl/2024/12/07/microbit-fireflies.html",
				"tags": ["Technology","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2024/12/07/how-do-you.html",
				"title": "ğŸ“ŸHow do you find the RSS Feed of a website (if it exists)",
				"content_html": "<h2 id=\"summary\">Summary</h2>\n<p>This article describes various methods to find RSS feeds on websites. For WordPress, you append /feed to the URL to find the RSS feed, while for Tumblr and Medium, /rss and /feed/ are added respectively. For a Blogger site, the string at the end of the URL is longer, feeds/posts/default. YouTube channel pages also act as RSS feeds. Additionally, you can extract the RSS feed from the page source by searching for &lsquo;Application/rss&rsquo; or &lsquo;Atom&rsquo; in the source code. Safari users can use an app that adds a ready-to-use RSS button to their browser. Lastly, &lsquo;educated guessing&rsquo; is a technique where you add /feed/ or /rss/ to the domain in the hope that one of them leads you to the correct feed.</p>\n<h2 id=\"comments\">Comments</h2>\n<p>Method 2 is the most practical in practice.</p>\n<h2 id=\"content\">Content</h2>\n<h3 id=\"method-1--investigating-the-cms-used\">Method 1 â€“ Investigating the CMS Used</h3>\n<ul>\n<li>To access a WordPress RSS feed, simply append /feed to the site&rsquo;s URL. So, if the WordPress site&rsquo;s URL is, for example, <a href=\"https://example.com\">example.com</a>, to find the RSS feed, you would add /feed to obtain <a href=\"https://example.com\">example.com</a>/feed. When used in an RSS reader, this URL would allow you to view the site&rsquo;s content in feed form.</li>\n<li>In the case of sites hosted on Tumblr, the method is slightly different but still very straightforward. You need to add /rss to the end of the Tumblr site&rsquo;s URL. So, if the Tumblr address is <a href=\"https://example.tumblr.com\">example.tumblr.com</a>, the RSS feed can be found at <a href=\"https://example.tumblr.com\">example.tumblr.com</a>/rss.</li>\n<li>For blogs hosted on Blogger, you need to add a slightly longer string to the end of the URL: feeds/posts/default. So, for a Blogger site at the address example.blogspot.com, the RSS feed can be found at example.blogspot.com/feeds/posts/default.</li>\n<li>If you want to find an RSS feed for a publication hosted on Medium, you have to add /feed/ before the publication&rsquo;s name in the URL. If the publication&rsquo;s address on Medium is medium.com/example-site, the URL for the RSS feed would change to medium.com/feed/example-site to view it in your RSS reader.</li>\n<li>YouTube channel pages also have a built-in functionality to act as RSS feeds. As such, you simply need to copy the channel&rsquo;s URL and paste it into your RSS reader. Additionally, if you are already subscribed to various channels on YouTube, you can find an OPML file with all your subscriptions here, which you can then import into your RSS reader for easy access to all subscribed channels.</li>\n</ul>\n<h3 id=\"method-2--extract-rss-feed-from-page-source\">Method 2 â€“ Extract RSS Feed from Page Source</h3>\n<p>To find the RSS or Atom feeds of a specific website, start by opening the website in your browser. Then, right-click anywhere on the pageâ€”it doesn&rsquo;t matter where, as long as it&rsquo;s not a link or image.</p>\n<p>In the context menu that appears, choose the option &ldquo;View Page Source&rdquo; or something similar; the exact text may vary depending on the browser you are using. This will show you the page source, which is the underlying HTML and CSS skeleton that determines how the page looks and functions.</p>\n<p>Once in the page source, use your browser&rsquo;s search function (often accessible via Ctrl + F or Command + F on a Mac) to search for the term &ldquo;Application/rss&rdquo;. This is the most common way websites indicate their RSS feeds.</p>\n<p>If you don&rsquo;t get any results searching for &ldquo;Application/rss,&rdquo; try searching for &ldquo;Atom&rdquo;. Atom is an alternative feed standard that some sites may use instead of or in addition to RSS.</p>\n<p>If you find any of these terms in the page source, follow the corresponding URL to access the feed.</p>\n<h3 id=\"method-3--browser-extensions\">Method 3 â€“ Browser Extensions</h3>\n<p>If you use Safari, there is a user-friendly solution you can apply to receive RSS feeds, which is the RSS Button for the Safari app. This feature is designed with simplicity and ease of use in mind. It adds an RSS button to your Safari browser, allowing you quick and easy access to RSS feeds of websites you visit. The only caution is that this convenient button requires a small fee of $0.99. While this is a minimal cost, some users may object to paying for such functionality.</p>\n<h3 id=\"method-4--the-principle-of-educated-guessing\">Method 4 â€“ The Principle of Educated Guessing</h3>\n<p>This is an interesting method, particularly intended for cases where you want to find the RSS feed for a particular website, but it is not clearly indicated on the site itself. In such circumstances, &ldquo;Educated Guessing&rdquo; is helpful.</p>\n<p>As an illustrative example, let&rsquo;s take <a href=\"http://example.com/.\">example.com/.</a> Suppose you would like to find the RSS feed for this website, but you cannot find it in the usual sections of the website (such as the footer or sidebar). In such a situation, you can resort to educated guessing. This means trying out some obvious URL paths in the hope that one of them leads you to the correct feed.</p>\n<p>Start by appending &lsquo;/feed/&rsquo; after the domain. So, in our example, you would try navigating to <a href=\"http://example.com/feed/.\">example.com/feed/.</a> If this doesn&rsquo;t work, you can try another popular URL structure, such as &lsquo;/rss/&rsquo;. This means navigating to <a href=\"http://example.com/rss/.\">example.com/rss/.</a></p>\n<p>This is, of course, not an exact science, and there is no guarantee that any of these guesses will lead you to the desired RSS feed. However, in practice, you will find that many websites follow these general URL structures for their feeds, making this a valuable technique to try. It is undoubtedly a quick and simple method to attempt to find the RSS feed if you are unable to locate it directly on the website.</p>\n<p>If this blog was any help to you, give away a free Lucky Four-Leaf Clover \n    <button class=\"tinylytics_kudos\" data-path=\"/2024/12/07/how-do-you.html\"></button></p>\n<p>ğŸ“âœï¸</p>\n",
				"content_text": "## Summary\nThis article describes various methods to find RSS feeds on websites. For WordPress, you append /feed to the URL to find the RSS feed, while for Tumblr and Medium, /rss and /feed/ are added respectively. For a Blogger site, the string at the end of the URL is longer, feeds/posts/default. YouTube channel pages also act as RSS feeds. Additionally, you can extract the RSS feed from the page source by searching for 'Application/rss' or 'Atom' in the source code. Safari users can use an app that adds a ready-to-use RSS button to their browser. Lastly, 'educated guessing' is a technique where you add /feed/ or /rss/ to the domain in the hope that one of them leads you to the correct feed.\n\n## Comments\nMethod 2 is the most practical in practice.\n\n## Content\n### Method 1 â€“ Investigating the CMS Used\n- To access a WordPress RSS feed, simply append /feed to the site's URL. So, if the WordPress site's URL is, for example, [example.com](https://example.com), to find the RSS feed, you would add /feed to obtain [example.com](https://example.com)/feed. When used in an RSS reader, this URL would allow you to view the site's content in feed form.\n- In the case of sites hosted on Tumblr, the method is slightly different but still very straightforward. You need to add /rss to the end of the Tumblr site's URL. So, if the Tumblr address is [example.tumblr.com](https://example.tumblr.com), the RSS feed can be found at [example.tumblr.com](https://example.tumblr.com)/rss.\n- For blogs hosted on Blogger, you need to add a slightly longer string to the end of the URL: feeds/posts/default. So, for a Blogger site at the address example.blogspot.com, the RSS feed can be found at example.blogspot.com/feeds/posts/default.\n- If you want to find an RSS feed for a publication hosted on Medium, you have to add /feed/ before the publication's name in the URL. If the publication's address on Medium is medium.com/example-site, the URL for the RSS feed would change to medium.com/feed/example-site to view it in your RSS reader.\n- YouTube channel pages also have a built-in functionality to act as RSS feeds. As such, you simply need to copy the channel's URL and paste it into your RSS reader. Additionally, if you are already subscribed to various channels on YouTube, you can find an OPML file with all your subscriptions here, which you can then import into your RSS reader for easy access to all subscribed channels.\n\n### Method 2 â€“ Extract RSS Feed from Page Source\nTo find the RSS or Atom feeds of a specific website, start by opening the website in your browser. Then, right-click anywhere on the pageâ€”it doesn't matter where, as long as it's not a link or image.\n\nIn the context menu that appears, choose the option \"View Page Source\" or something similar; the exact text may vary depending on the browser you are using. This will show you the page source, which is the underlying HTML and CSS skeleton that determines how the page looks and functions.\n\nOnce in the page source, use your browser's search function (often accessible via Ctrl + F or Command + F on a Mac) to search for the term \"Application/rss\". This is the most common way websites indicate their RSS feeds.\n\nIf you don't get any results searching for \"Application/rss,\" try searching for \"Atom\". Atom is an alternative feed standard that some sites may use instead of or in addition to RSS.\n\nIf you find any of these terms in the page source, follow the corresponding URL to access the feed.\n\n### Method 3 â€“ Browser Extensions\nIf you use Safari, there is a user-friendly solution you can apply to receive RSS feeds, which is the RSS Button for the Safari app. This feature is designed with simplicity and ease of use in mind. It adds an RSS button to your Safari browser, allowing you quick and easy access to RSS feeds of websites you visit. The only caution is that this convenient button requires a small fee of $0.99. While this is a minimal cost, some users may object to paying for such functionality.\n\n### Method 4 â€“ The Principle of Educated Guessing\nThis is an interesting method, particularly intended for cases where you want to find the RSS feed for a particular website, but it is not clearly indicated on the site itself. In such circumstances, \"Educated Guessing\" is helpful.\n\nAs an illustrative example, let's take [example.com/.](http://example.com/.) Suppose you would like to find the RSS feed for this website, but you cannot find it in the usual sections of the website (such as the footer or sidebar). In such a situation, you can resort to educated guessing. This means trying out some obvious URL paths in the hope that one of them leads you to the correct feed.\n\nStart by appending '/feed/' after the domain. So, in our example, you would try navigating to [example.com/feed/.](http://example.com/feed/.) If this doesn't work, you can try another popular URL structure, such as '/rss/'. This means navigating to [example.com/rss/.](http://example.com/rss/.)\n\nThis is, of course, not an exact science, and there is no guarantee that any of these guesses will lead you to the desired RSS feed. However, in practice, you will find that many websites follow these general URL structures for their feeds, making this a valuable technique to try. It is undoubtedly a quick and simple method to attempt to find the RSS feed if you are unable to locate it directly on the website. \n\nIf this blog was any help to you, give away a free Lucky Four-Leaf Clover {{< tinykudos >}}\n\nğŸ“âœï¸\n\n",
				"date_published": "2024-12-07T09:01:48+01:00",
				"url": "https://micro.mjanssen.nl/2024/12/07/how-do-you.html",
				"tags": ["Technology","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2024/12/07/how-i-brought.html",
				"title": "ğŸ“How I brought order in the chaos",
				"content_html": "<h2 id=\"summary\">Summary</h2>\n<p>I have been exploring different methods to enhance my productivity and note-taking system. Additionally, I am striving to establish organization within my personal archives stored on my Synology device. During my research, I came across the following methodologies: <a href=\"https://johnnydecimal.com\" title=\"Johnny Decimal\">Johnny Decimal</a>, <a href=\"https://zettelkasten.de/introduction/\" title=\"Zettelkasten\">Zettelkasten</a>, <a href=\"https://www.buildingasecondbrain.com/para\" title=\"PARA\">PARA</a> and the <a href=\"https://www.buildingasecondbrain.com\" title=\"BASB\">Build A Second Brain</a> approach.</p>\n<p>My objective is to integrate these four methods in a way that enables me to:</p>\n<ol>\n<li>\n<p>Effectively store, retrieve, and manage my notes in an orderly manner.</p>\n</li>\n<li>\n<p>Establish a systematic approach for storing and retrieving personal documents on my Synology device.</p>\n</li>\n<li>\n<p>Implement a coherent structure across all the applications I utilize and require.</p>\n</li>\n</ol>\n<p>By combining these methodologies, I aim to streamline my note-taking and document management processes while maintaining a consistent organizational framework across various applications.</p>\n<h2 id=\"contents\">Contents</h2>\n<h3 id=\"para-projects-areas-resources-archive\">PARA (Projects, Areas, Resources, Archive)</h3>\n<p>Tiago Forte is a prominent productivity expert known for developing the PARA framework, which stands for Projects, Areas, Resources, and Archives. The PARA method is designed to help individuals organize and optimize their digital information and tasks. It involves categorizing information based on project-specific tasks, broader areas of responsibility, essential resources, and archival items. The PARA methodology aims to improve focus, efficiency, and clarity in managing personal and professional workflows.</p>\n<p>On his website mentioned above, you find all the info you need, there is an ebook too on the matter.</p>\n<p>As I am a Dutch guy, I took the Dutch translation for the PARA acronym</p>\n<ul>\n<li><strong>P</strong>rojecten</li>\n<li><strong>A</strong>andachtsgebieden</li>\n<li><strong>R</strong>edmiddelen</li>\n<li><strong>A</strong>rchief</li>\n</ul>\n<p>Within the folder â€œ<strong>Projects</strong>â€ and â€œ<strong>Areas</strong>â€ I created the 10 most common Areas of Attention.</p>\n<ol>\n<li><strong>Health and well-being</strong>: This includes physical health, mental health, fitness, nutrition, and self-care practices.</li>\n<li><strong>Family and relationships</strong>: This area includes family members, friends, romantic relationships, and social interactions that are important to you.</li>\n<li><strong>Career and work</strong>: This encompasses your profession, career development, work goals, and professional achievements.</li>\n<li><strong>Finances</strong>: Managing your finances, including budgeting, saving, investing, and debt repayment.</li>\n<li><strong>Personal growth and development</strong>: This includes pursuing new skills, knowledge, and personal growth, as well as setting goals for self-improvement.</li>\n<li><strong>Leisure and hobbies</strong>: Activities that provide you with pleasure and relaxation, such as hobbies, sports, arts, and other recreational pursuits.</li>\n<li><strong>Living environment</strong>: Organizing and caring for your home, living space, and personal belongings.</li>\n<li><strong>Community involvement</strong>: Volunteer work, charity work, or other activities that contribute to your community or society as a whole.</li>\n<li><strong>Personal values and spirituality</strong>: Exploring and cultivating your personal values, beliefs, and spiritual growth.</li>\n<li><strong>Time management and productivity</strong>: Developing effective time management and productivity habits to achieve your goals.</li>\n</ol>\n<p>I try to fit my Projects and my Interests in those 10 areas.</p>\n<p>For â€œ<strong>Resources</strong>â€ I have not some a strict list of areas. This more fluid. These are an area that build over time.</p>\n<p>For â€œ<strong>Archive</strong>â€, this is your â€œfreezerâ€ of information. Here is information that you donâ€™t need anymore, but can be de-frosted when needed.</p>\n<h3 id=\"johnny-decimal-jd\">Johnny Decimal (JD)</h3>\n<p>Johnny.Decimal is a personal productivity system created by John Poelstra. It is based on the idea of organizing and categorizing information using a numeric hierarchy. Each level in the hierarchy represents a different category, and items are assigned unique numbers based on their location within the hierarchy. The system is designed to help individuals manage their digital and physical information effectively and improve their productivity.</p>\n<p>On his website (mentioned above) you will find a detailed description of how JD works and can be implemented in your folder structure across your apps.</p>\n<h3 id=\"fusing-para-and-jd\">Fusing PARA and JD</h3>\n<p>If we fusing these two together (JD and PARA) I came up with something like this:</p>\n<p><img src=\"https://micro.mjanssen.nl/uploads/2024/para-areas-example.png\" alt=\"\"></p>\n<p>Itâ€™s all in Dutch but you get the picture.</p>\n<p>I made 4 â€œrootâ€ folder</p>\n<ul>\n<li>10_Projects</li>\n<li>20_Areas</li>\n<li>30_Resouces</li>\n<li>40_Archives</li>\n</ul>\n<p>The 20_Areas (or in Dutch 20_Aandachtsgebieden) is wat you see in the image as an example. From 20.00-09 till 20.90-99 you have your 10 MAIN Areas.</p>\n<p>As I open here the Area â€œ20.50-59 Leisure and hobbiesâ€ (or in Dutch 20.50-59 Vrije tijd en hobbyâ€™s) you can see I summed up all my hobbies in the subfolders.</p>\n<ul>\n<li>20.51 Fotografie</li>\n<li>20.52 Programming</li>\n<li>20.53 Koken</li>\n<li>20.54 Schrijven</li>\n<li>20.55 Piano</li>\n<li>20.56 Computers</li>\n<li>20.57 Apple</li>\n<li>20.58 Vertier</li>\n</ul>\n<p>And within â€œ20.51 Photographyâ€ I have al the individual items I care about in Photography (for now).</p>\n<ul>\n<li>20.51.01 Phonographer</li>\n<li>20.51.02 Albelli</li>\n<li>20.51.03 Info</li>\n</ul>\n<p>Can I see how the Johnny.Decimal Numbers all nicely lock in place. The advance is that if you share the folder structure with someone or you want to refer to a item in the structure you can simple say:</p>\n<blockquote>\n<p>â€œHey, look in 20.51.02 Albelliâ€</p>\n</blockquote>\n<p>And that person (or yourself from a note), will know the PATH to that location without having to tell them:</p>\n<blockquote>\n<p>â€œGoto /Users/marco/Resilio/20_aandachtsgebieden/20.50-59 Vrije tijd en hobby&rsquo;s/20.51 Fotografie/20.51.02 Albelliâ€</p>\n</blockquote>\n<p>They exactly where to find this folder and itâ€™s content. Itâ€™s all locked in side those numbers. Easi-Peasi! And you can do this in apps too. Say for instance in Things3 or like in the image blow in an app called Noteplan3 where I keep all my text-notes for stuff I find interesting.</p>\n<p><img src=\"https://micro.mjanssen.nl/uploads/2024/noteplan-example.png\" alt=\"\"></p>\n",
				"content_text": "## Summary\nI have been exploring different methods to enhance my productivity and note-taking system. Additionally, I am striving to establish organization within my personal archives stored on my Synology device. During my research, I came across the following methodologies: [Johnny Decimal](https://johnnydecimal.com \"Johnny Decimal\"), [Zettelkasten](https://zettelkasten.de/introduction/ \"Zettelkasten\"), [PARA](https://www.buildingasecondbrain.com/para \"PARA\") and the [Build A Second Brain](https://www.buildingasecondbrain.com \"BASB\") approach.\n\nMy objective is to integrate these four methods in a way that enables me to:\n\n1. Effectively store, retrieve, and manage my notes in an orderly manner.\n\n2. Establish a systematic approach for storing and retrieving personal documents on my Synology device.\n\n3. Implement a coherent structure across all the applications I utilize and require.\n\nBy combining these methodologies, I aim to streamline my note-taking and document management processes while maintaining a consistent organizational framework across various applications.\n\n## Contents\n### PARA (Projects, Areas, Resources, Archive)\nTiago Forte is a prominent productivity expert known for developing the PARA framework, which stands for Projects, Areas, Resources, and Archives. The PARA method is designed to help individuals organize and optimize their digital information and tasks. It involves categorizing information based on project-specific tasks, broader areas of responsibility, essential resources, and archival items. The PARA methodology aims to improve focus, efficiency, and clarity in managing personal and professional workflows.\n\nOn his website mentioned above, you find all the info you need, there is an ebook too on the matter.\n\nAs I am a Dutch guy, I took the Dutch translation for the PARA acronym\n\n- **P**rojecten\n- **A**andachtsgebieden\n- **R**edmiddelen\n- **A**rchief\n\nWithin the folder â€œ**Projects**â€ and â€œ**Areas**â€ I created the 10 most common Areas of Attention.\n\n1. **Health and well-being**: This includes physical health, mental health, fitness, nutrition, and self-care practices.\n2. **Family and relationships**: This area includes family members, friends, romantic relationships, and social interactions that are important to you.\n3. **Career and work**: This encompasses your profession, career development, work goals, and professional achievements.\n4. **Finances**: Managing your finances, including budgeting, saving, investing, and debt repayment.\n5. **Personal growth and development**: This includes pursuing new skills, knowledge, and personal growth, as well as setting goals for self-improvement.\n6. **Leisure and hobbies**: Activities that provide you with pleasure and relaxation, such as hobbies, sports, arts, and other recreational pursuits.\n7. **Living environment**: Organizing and caring for your home, living space, and personal belongings.\n8. **Community involvement**: Volunteer work, charity work, or other activities that contribute to your community or society as a whole.\n9. **Personal values and spirituality**: Exploring and cultivating your personal values, beliefs, and spiritual growth.\n10. **Time management and productivity**: Developing effective time management and productivity habits to achieve your goals.\n\nI try to fit my Projects and my Interests in those 10 areas.\n\nFor â€œ**Resources**â€ I have not some a strict list of areas. This more fluid. These are an area that build over time.\n\nFor â€œ**Archive**â€, this is your â€œfreezerâ€ of information. Here is information that you donâ€™t need anymore, but can be de-frosted when needed.\n\n### Johnny Decimal (JD)\nJohnny.Decimal is a personal productivity system created by John Poelstra. It is based on the idea of organizing and categorizing information using a numeric hierarchy. Each level in the hierarchy represents a different category, and items are assigned unique numbers based on their location within the hierarchy. The system is designed to help individuals manage their digital and physical information effectively and improve their productivity.\n\nOn his website (mentioned above) you will find a detailed description of how JD works and can be implemented in your folder structure across your apps.\n\n### Fusing PARA and JD\nIf we fusing these two together (JD and PARA) I came up with something like this:\n\n![](https://micro.mjanssen.nl/uploads/2024/para-areas-example.png)\n\nItâ€™s all in Dutch but you get the picture. \n\nI made 4 â€œrootâ€ folder \n\n- 10\\_Projects\n- 20\\_Areas\n- 30\\_Resouces\n- 40\\_Archives\n\nThe 20\\_Areas (or in Dutch 20\\_Aandachtsgebieden) is wat you see in the image as an example. From 20.00-09 till 20.90-99 you have your 10 MAIN Areas. \n\nAs I open here the Area â€œ20.50-59 Leisure and hobbiesâ€ (or in Dutch 20.50-59 Vrije tijd en hobbyâ€™s) you can see I summed up all my hobbies in the subfolders.\n\n- 20.51 Fotografie\n- 20.52 Programming\n- 20.53 Koken\n- 20.54 Schrijven\n- 20.55 Piano\n- 20.56 Computers\n- 20.57 Apple\n- 20.58 Vertier\n\nAnd within â€œ20.51 Photographyâ€ I have al the individual items I care about in Photography (for now).\n\n- 20.51.01 Phonographer\n- 20.51.02 Albelli\n- 20.51.03 Info\n\nCan I see how the Johnny.Decimal Numbers all nicely lock in place. The advance is that if you share the folder structure with someone or you want to refer to a item in the structure you can simple say:\n\n> â€œHey, look in 20.51.02 Albelliâ€\n\nAnd that person (or yourself from a note), will know the PATH to that location without having to tell them:\n\n> â€œGoto /Users/marco/Resilio/20\\_aandachtsgebieden/20.50-59 Vrije tijd en hobby's/20.51 Fotografie/20.51.02 Albelliâ€\n\nThey exactly where to find this folder and itâ€™s content. Itâ€™s all locked in side those numbers. Easi-Peasi! And you can do this in apps too. Say for instance in Things3 or like in the image blow in an app called Noteplan3 where I keep all my text-notes for stuff I find interesting.\n\n![](https://micro.mjanssen.nl/uploads/2024/noteplan-example.png)\n\n\n",
				"date_published": "2024-12-07T09:00:47+01:00",
				"url": "https://micro.mjanssen.nl/2024/12/07/how-i-brought.html",
				"tags": ["Productivity","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2024/12/07/blocking-or-allowing.html",
				"title": "ğŸ›œBlocking (or Allowing) whole Countries or a Provider or a Network with your Ubiquiti Edgerouter",
				"content_html": "<p>I recently picked up a nice second hand Ubiquiti Edgerouter X from <a href=\"https://www.marktplaats.nl\" title=\"Marktplaats\">Marktplaats</a>, which is the Dutch <a href=\"https://amsterdam.craigslist.org\" title=\"Craiglist\">Craigslist</a>. I wanted to play with a firewall in my network. This quickly became a complete rebuild of the network with multiple Vlans in my house. Which was enjoyable because exploring and learning is always a good thing.</p>\n<p>This learning also counts for the firewall in the Edgerouter (which runs EdgeOS). I had some experience with firewalls in a very far past with a product called Checkpoint Firewall-1. I am unsure if it still exists. The company Checkpoint still does, though.</p>\n<p>Playing around with the firewall wasnâ€™t very hard. Of course, you need to learn the interface and the possibilities of the Firewall. I checked three videos on YouTube to get a head start. <a href=\"https://www.youtube.com/watch?v=DvgkC1Od0ok\" title=\"Video Ubiquiti Edgerouter X\">This video jumpstarted the head start for me.</a></p>\n<p>As I progressed and got all the firewall rules in place as I wanted them, I really wanted to block off certain countries to be able to reach my webserver, which is behind a nginx reverse-proxy. The Ubiquiti doesnâ€™t have preloaded sets of country networks. And I would rather not add all the networks used by a country manually. This is a daunting task. If I check for my country for example, there are 5999 networks (date:2024-01-18). This is impossible. So this must be done smarter.</p>\n<h2 id=\"adding-a-complete-country-to-a-network-group-in-edgeos\">Adding a complete country to a network-group in EdgeOS</h2>\n<p>For this solution, we lean heavily on te website <a href=\"http://www.ipdeny.com/\">http://www.ipdeny.com/</a> with the following script I wrote.</p>\n<p>I saved this script on the Edgerouter in my $HOME directory with the following name: create_networkgroup_countrycode.sh</p>\n<pre><code>#!/bin/sh\n\n# Name: create_networkgroup_asn.sh\n# Coder: Marco Janssen (mastodon [@marc0janssen@mastodon.online](https://micro.blog/marc0janssen@mastodon.online))\n# date: 2024-01-17 21:30:00\n# update: 2024-01-31 21:39:00\n\nif [ $# -eq 0 ]; then\n\techo &quot;No parameters provided. Provide a countrycode. Example nl or de&quot;\nelse\n\tcountrycode=&quot;$1&quot;\n\tNOW=$(date +&quot;%Y%m%d&quot;)\n\t\n\techo &quot;*** Downloading networkaddress blocks for countrycode $countrycode&quot;\n\tcurl &quot;http://www.ipdeny.com/ipblocks/data/countries/$countrycode.zone&quot; -o &quot;./$countrycode.zone&quot; -s\n\t\n\techo &quot;*** Writing networkgroup script&quot;\n\techo &quot;delete firewall group network-group $countrycode.zone&quot; &gt; &quot;./networkgroup-$countrycode.$NOW.sh&quot;\n\techo &quot;set firewall group network-group $countrycode.zone description \\&quot;All networks $countrycode\\&quot; on $NOW&quot; &gt;&gt; &quot;./networkgroup-$countrycode.$NOW.sh&quot;\n\tsed -e &quot;s/^/set firewall group network-group $countrycode.zone network /&quot; &quot;./$countrycode.zone&quot; &gt;&gt; &quot;./networkgroup-$countrycode.$NOW.sh&quot;\n\tcp &quot;./networkgroup-$countrycode.$NOW.sh&quot; nwgs.sh\n\t\n\techo &quot;*** Archiving zone-list&quot;\n\tmv &quot;$countrycode.zone&quot; &quot;$countrycode.zone.$NOW&quot;\n\t\n\techo \n\techo &quot;Now execute the following commands on the prompt of your Edgerouter&quot;\n\techo \n\techo &quot;configure&quot;\n\techo &quot;. ./nwgs.sh&quot;\n\techo &quot;commit&quot;\n\techo &quot;save&quot;\n\techo &quot;exit&quot;\nfi\n</code></pre>\n<h3 id=\"what-will-this-script-do\">What will this script do?</h3>\n<ol>\n<li>It will check if you give it a parameter with a single country code. For example, nl or dk or de.</li>\n<li>Then it will try to download the network address blocks for the country-code and save it in a file. For The Netherlands (if you give it country-code nl) it will create a file called â€œnl.zoneâ€.</li>\n<li>Then it will try to write a script for you which creates a network group in the Edgerouter. The file will be called â€œnetworkgroup-nl.&lt;date&gt;.sh (if you give it country-code nl).</li>\n<li>The script which is generated in step 3 will be copied to a shorter name â€œnwgs.shâ€ for your convenience. You can archive the longer one in step 3 and use the shorter one in this step.</li>\n<li>The zone list used in step 3 will also be archiving for you in a format â€œnl.zone.&lt;date&gt;â€ (if you give it country-code nl).</li>\n<li>Finally, you get further instructions to use the script and create the network-group.</li>\n</ol>\n<h3 id=\"running-the-script\">Running the script</h3>\n<ol>\n<li>\n<p>Get this script on your Edgerouter (ssh, scp, sftp) and place it in a directory of your likings. I place it in my $HOME on the router.</p>\n</li>\n<li>\n<p>Name the script â€œcreate_networkgroup_countrycode.shâ€</p>\n</li>\n<li>\n<p>Make sure the script is executable: <code>chmod +x ./create_networkgroup_countrycode.sh</code></p>\n</li>\n<li>\n<p>Run the script (in this example for The Netherlands, i.e., nl):<br>\n<code>./create_networkgroup_countrycode.sh nl</code></p>\n</li>\n<li>\n<p>Execute the following commands after the script has run.</p>\n<p>configure\n. ./nwgs.sh\ncommit\nsave\nexit</p>\n</li>\n</ol>\n<p><strong>A note of warning</strong></p>\n<p>For The Netherlands alone it will add 5999 networks to your Edgerouter. (Date: 2024-01-18). To run the generated network group script with the above command <code>. ./nwgs.sh</code> will take you some <strong>18 minutes</strong> on the router. The following step <code>commit</code> will take you another <strong>9 minutes</strong> on the router. If you now open your Edgerouter GUI, you will see the steps created a network-group called â€œnl.zoneâ€ of 5999 items. To open this group in the GUI takes a long(er) time. <strong>A reboot of the router takes 25 minutes with 5999 networks, donâ€™t think your router is brickedâ€¦. It just needs loads of time to boot with this kind of lists.</strong></p>\n<h3 id=\"what-is-next\">What is next?</h3>\n<p>Now you have your network-group called â€œnl.zoneâ€ (for this example) in the Edgerouter. You can use it like any other resource in a firewall rule. You can now allow this network-group through your firewall and block all others that are not in this group (so allow only this country to your webserver or whatever). Or you can block this network-group from your webserver and allow all other countries. Itâ€™s up to you.</p>\n<h2 id=\"adding-a-complete-provider-to-a-network-group-in-edgeos\">Adding a complete provider to a network-group in EdgeOS</h2>\n<p>Maybe for you, it is not necessary to allow or block complete countries. I started using the following method, to only allow certain providers in my country to reach my webserver. Why? First, I only share this content with family members so not all networks are needed to achieve this. Second I did not like the long boot times of the Edgerouter with a complete country list. It was not necessary for me to allow a complete country to my server, I just wanted my family members. Why didnâ€™t you just allow their home IP address of their ISP, you would say? Well, they are dynamic, and I would rather not revise the rules often. So I allow their complete provider.</p>\n<p>For this solution, I used to following URLâ€™s, but maybe you have beter ones on the internet.</p>\n<p><a href=\"https://www.nirsoft.net/countryip/nl_owner.html\">https://www.nirsoft.net/countryip/nl_owner.html</a></p>\n<p><a href=\"https://asntool.com/\">https://asntool.com/</a></p>\n<p><a href=\"https://www.textcleanr.com/\">https://www.textcleanr.com/</a></p>\n<p><a href=\"https://networksdb.io/\">https://networksdb.io/</a></p>\n<ol>\n<li>Nirsoft gives a nice overview of all the providers with the IP-addressblocks.</li>\n<li>ASNTOOL helps to get all the networks in an Autonomous System.</li>\n<li>TEXTCLEAR helps to clean up the list you get from ASNTOOL.</li>\n<li>NETWORKSDB is an example of a website to find your ASN.</li>\n</ol>\n<p>ASN stands for Autonomous System Number in networks. It is a unique identifier that is globally available and allows an autonomous system (AS) to exchange routing information with other ASes. An AS is a large network or group of networks that operates under a single routing policy. Each AS is assigned a unique ASN, which is a number used to differentiate and identify the AS in the global routing system. ASNs are essential for network operators to control routing within their networks and facilitate the exchange of routing information.</p>\n<p>Save the following script in the $HOME of your Edgerouter (or any directory of your likings). And give it the name â€œcreate_networkgroup_asn.shâ€.</p>\n<pre><code>#!/bin/bash\n\n# Name: create_networkgroup_asn.sh\n# Coder: Marco Janssen (mastodon [@marc0janssen@mastodon.online](https://micro.blog/marc0janssen@mastodon.online))\n# date: 2024-01-17 21:30:00\n# update: 2024-01-31 20:50:00\n\nprint_usage() {\n  echo &quot;No parameters provided. Provide an ASN with IP blocks. Example: AS1136.&quot;\n}\n\ncreate_networkgroup_script() {\n  local asn\n  local temp_filename\n  local output_filename\n  local archive_filename\n  local networkgroup_script_filename\n  \n  asn=&quot;$1&quot;\n  temp_filename=&quot;.temp.txt&quot;\n  output_filename=&quot;$asn.txt&quot;\n  archive_filename=&quot;$asn.$NOW.txt&quot;\n  networkgroup_script_filename=&quot;networkgroup-$asn.$NOW.sh&quot;\n\n  echo &quot;*** Writing new $asn output&quot;\n  whois -h whois.radb.net -- &quot;-i origin $asn&quot; | grep -Eo &quot;([0-9.]+){4}/[0-9]+&quot; | uniq -s 0 &gt; &quot;$temp_filename&quot;\n\n  echo &quot;*** Getting owner of $asn&quot;\n  local owner\n  owner=$(whois -h whois.radb.net -- &quot;-i origin $asn&quot; | grep &quot;^descr:&quot; | awk '{print $2}' | sort | uniq -c | sort -nr | head -1 | awk '{ print $NF }')\n  echo &quot;--- Owner of $asn: $owner&quot;\n\n  echo &quot;*** Checking for changes in $asn&quot;\n  if [[ -f &quot;$output_filename&quot; &amp;&amp; $(diff &quot;$output_filename&quot; &quot;$temp_filename&quot;) == &quot;&quot; ]]; then\n    echo &quot;--- No Changes in $asn&quot;\n    \n    echo &quot;*** Cleaning temporary output&quot;\n    rm &quot;$temp_filename&quot;\n    \n  else\n    echo &quot;*** Writing networkgroup script for $asn&quot;\n    cat &lt;&lt;EOF &gt;&quot;$networkgroup_script_filename&quot;\ndelete firewall group network-group $asn\nset firewall group network-group $asn description &quot;All networks $asn by $owner on $NOW&quot;\n$(sed -e &quot;s/^/set firewall group network-group $asn network /&quot; &quot;$temp_filename&quot;)\nEOF\n\n    cp &quot;$networkgroup_script_filename&quot; nwgs.sh\n\n    echo &quot;*** Archiving $asn output&quot;\n    cp &quot;$temp_filename&quot; &quot;$archive_filename&quot;\n    mv &quot;$temp_filename&quot; &quot;$output_filename&quot;\n\n    echo \n    echo &quot;Now execute the following commands on the prompt of your Edgerouter&quot;\n    echo \n    echo &quot;configure&quot;\n    echo &quot;. ./nwgs.sh&quot;\n    echo &quot;commit&quot;\n    echo &quot;save&quot;\n    echo &quot;exit&quot;    \n  fi\n}\n\nmain() {\n  if [[ $# -eq 0 ]]; then\n    print_usage\n  else\n    \n    NOW=$(date +&quot;%Y%m%d&quot;)\n    ASN=&quot;$1&quot;\n    \n    readonly NOW\n    readonly ASN\n    \n    create_networkgroup_script &quot;$ASN&quot;\n  fi\n}\n\nmain &quot;$@&quot;\n</code></pre>\n<h3 id=\"what-will-this-script-do-1\">What will this script do?</h3>\n<ol>\n<li>It will check if you give it a parameter with the name your ASN. For example, AS1136.</li>\n<li>Write a textfile with all the networks in the AS</li>\n<li>Try to get the owner of an AS</li>\n<li>Then it will try to write a script for you which creates a network group in the Edgerouter. The file will be called â€œnetworkgroup-AS1136.&lt;date&gt;.sh (if you give it ASN AS1136).</li>\n<li>The script which is generated in step 4 will be copying to a shorter name â€œnwgs.shâ€ for your convenience. You can archive the longer one in step 4 and use the shorter one in this step.</li>\n<li>Finally, you get further instructions to use the script and create the net-workgroup.</li>\n</ol>\n<h3 id=\"running-the-script-1\">Running the script</h3>\n<ol>\n<li>\n<p>Find the ASN you like to use for your network group. This can be done, for example, with the following site to find your ASN: <a href=\"https://networksdb.io/\">https://networksdb.io/</a></p>\n<p><img src=\"https://micro.mjanssen.nl/uploads/2024/asn-info.png\" alt=\"\"></p>\n<p>Another way to get and ASN for your desired provider is to look up their IPblocks. I do this with a site from Nirsoft, <a href=\"https://www.nirsoft.net/countryip/nl.html\">https://www.nirsoft.net/countryip/nl.html</a>. Here with the IPblocks for The Netherlands. If you want to have the ASN for a provider called â€œAlma International B.V.â€ for example, you just take the first available IP-address in their block â€œ2.16.0.1â€.</p>\n</li>\n<li>\n<p>Get the above script on your Edgerouter (ssh, scp, sftp) and place it in a directory of your likings. I place it in my $HOME on the router.</p>\n</li>\n<li>\n<p>Name the script â€œcreate_networkgroup_asn.shâ€</p>\n</li>\n<li>\n<p>Make sure the script is executable: <code>chmod +x ./create_networkgroup_asn.sh</code></p>\n</li>\n<li>\n<p>Run the script (in this example for Alma International B.V., i.e., AS20940):<br>\n<code>./create_networkgroup_asn.sh AS20940</code></p>\n</li>\n<li>\n<p>Execute the following commands after the script has run.</p>\n<p>configure\n. ./nwgs.sh\ncommit\nsave\nexit</p>\n</li>\n</ol>\n<p><strong>A note</strong></p>\n<p>These network-groups are considerably smaller, I donâ€™t really notice any extra boottime of the router.</p>\n<h3 id=\"what-is-next-1\">What is next?</h3>\n<p>Now you have your network-group called â€œAS20940â€ (for this example) in the Edgerouter. You can use like it like any other resource in a firewall rule. You can now allow this network-group through your firewall and block all others that are not in this group (so allow only this provider to your webserver or whatever). Or you can block this network-group from your webserver and allow all other providers. Itâ€™s up to you.</p>\n<p>If this blog was any help to you, give away a free Lucky Four-Leaf Clover \n    <button class=\"tinylytics_kudos\" data-path=\"/2024/12/07/blocking-or-allowing.html\"></button></p>\n<p>ğŸ“</p>\n",
				"content_text": "I recently picked up a nice second hand Ubiquiti Edgerouter X from [Marktplaats](https://www.marktplaats.nl \"Marktplaats\"), which is the Dutch [Craigslist](https://amsterdam.craigslist.org \"Craiglist\"). I wanted to play with a firewall in my network. This quickly became a complete rebuild of the network with multiple Vlans in my house. Which was enjoyable because exploring and learning is always a good thing.\n\nThis learning also counts for the firewall in the Edgerouter (which runs EdgeOS). I had some experience with firewalls in a very far past with a product called Checkpoint Firewall-1. I am unsure if it still exists. The company Checkpoint still does, though. \n\nPlaying around with the firewall wasnâ€™t very hard. Of course, you need to learn the interface and the possibilities of the Firewall. I checked three videos on YouTube to get a head start. [This video jumpstarted the head start for me.](https://www.youtube.com/watch?v=DvgkC1Od0ok \"Video Ubiquiti Edgerouter X\")\n\nAs I progressed and got all the firewall rules in place as I wanted them, I really wanted to block off certain countries to be able to reach my webserver, which is behind a nginx reverse-proxy. The Ubiquiti doesnâ€™t have preloaded sets of country networks. And I would rather not add all the networks used by a country manually. This is a daunting task. If I check for my country for example, there are 5999 networks (date:2024-01-18). This is impossible. So this must be done smarter.\n\n## Adding a complete country to a network-group in EdgeOS\nFor this solution, we lean heavily on te website [http://www.ipdeny.com/](http://www.ipdeny.com/) with the following script I wrote.\n\nI saved this script on the Edgerouter in my $HOME directory with the following name: create\\_networkgroup\\_countrycode.sh\n\n\t#!/bin/sh\n\t\n\t# Name: create_networkgroup_asn.sh\n\t# Coder: Marco Janssen (mastodon [@marc0janssen@mastodon.online](https://micro.blog/marc0janssen@mastodon.online))\n\t# date: 2024-01-17 21:30:00\n\t# update: 2024-01-31 21:39:00\n\t\n\tif [ $# -eq 0 ]; then\n\t\techo \"No parameters provided. Provide a countrycode. Example nl or de\"\n\telse\n\t\tcountrycode=\"$1\"\n\t\tNOW=$(date +\"%Y%m%d\")\n\t\t\n\t\techo \"*** Downloading networkaddress blocks for countrycode $countrycode\"\n\t\tcurl \"http://www.ipdeny.com/ipblocks/data/countries/$countrycode.zone\" -o \"./$countrycode.zone\" -s\n\t\t\n\t\techo \"*** Writing networkgroup script\"\n\t\techo \"delete firewall group network-group $countrycode.zone\" > \"./networkgroup-$countrycode.$NOW.sh\"\n\t\techo \"set firewall group network-group $countrycode.zone description \\\"All networks $countrycode\\\" on $NOW\" >> \"./networkgroup-$countrycode.$NOW.sh\"\n\t\tsed -e \"s/^/set firewall group network-group $countrycode.zone network /\" \"./$countrycode.zone\" >> \"./networkgroup-$countrycode.$NOW.sh\"\n\t\tcp \"./networkgroup-$countrycode.$NOW.sh\" nwgs.sh\n\t\t\n\t\techo \"*** Archiving zone-list\"\n\t\tmv \"$countrycode.zone\" \"$countrycode.zone.$NOW\"\n\t\t\n\t\techo \n\t\techo \"Now execute the following commands on the prompt of your Edgerouter\"\n\t\techo \n\t\techo \"configure\"\n\t\techo \". ./nwgs.sh\"\n\t\techo \"commit\"\n\t\techo \"save\"\n\t\techo \"exit\"\n\tfi\n\t\n\t\n\n### What will this script do?\n1. It will check if you give it a parameter with a single country code. For example, nl or dk or de.\n2. Then it will try to download the network address blocks for the country-code and save it in a file. For The Netherlands (if you give it country-code nl) it will create a file called â€œnl.zoneâ€.\n3. Then it will try to write a script for you which creates a network group in the Edgerouter. The file will be called â€œnetworkgroup-nl.\\<date\\>.sh (if you give it country-code nl).\n4. The script which is generated in step 3 will be copied to a shorter name â€œnwgs.shâ€ for your convenience. You can archive the longer one in step 3 and use the shorter one in this step.\n5. The zone list used in step 3 will also be archiving for you in a format â€œnl.zone.\\<date\\>â€ (if you give it country-code nl).\n6. Finally, you get further instructions to use the script and create the network-group.\n\n### Running the script\n1. Get this script on your Edgerouter (ssh, scp, sftp) and place it in a directory of your likings. I place it in my $HOME on the router.\n2. Name the script â€œcreate\\_networkgroup\\_countrycode.shâ€\n3. Make sure the script is executable: `chmod +x ./create_networkgroup_countrycode.sh`\n4. Run the script (in this example for The Netherlands, i.e., nl):  \n\t`./create_networkgroup_countrycode.sh nl`\n5. Execute the following commands after the script has run.\n\n\tconfigure\n\t. ./nwgs.sh\n\tcommit\n\tsave\n\texit\n\n**A note of warning**\n\nFor The Netherlands alone it will add 5999 networks to your Edgerouter. (Date: 2024-01-18). To run the generated network group script with the above command `. ./nwgs.sh` will take you some **18 minutes** on the router. The following step `commit` will take you another **9 minutes** on the router. If you now open your Edgerouter GUI, you will see the steps created a network-group called â€œnl.zoneâ€ of 5999 items. To open this group in the GUI takes a long(er) time. **A reboot of the router takes 25 minutes with 5999 networks, donâ€™t think your router is brickedâ€¦. It just needs loads of time to boot with this kind of lists.**\n\n### What is next?\nNow you have your network-group called â€œnl.zoneâ€ (for this example) in the Edgerouter. You can use it like any other resource in a firewall rule. You can now allow this network-group through your firewall and block all others that are not in this group (so allow only this country to your webserver or whatever). Or you can block this network-group from your webserver and allow all other countries. Itâ€™s up to you.\n\n## Adding a complete provider to a network-group in EdgeOS\nMaybe for you, it is not necessary to allow or block complete countries. I started using the following method, to only allow certain providers in my country to reach my webserver. Why? First, I only share this content with family members so not all networks are needed to achieve this. Second I did not like the long boot times of the Edgerouter with a complete country list. It was not necessary for me to allow a complete country to my server, I just wanted my family members. Why didnâ€™t you just allow their home IP address of their ISP, you would say? Well, they are dynamic, and I would rather not revise the rules often. So I allow their complete provider.\n\nFor this solution, I used to following URLâ€™s, but maybe you have beter ones on the internet.\n\n[https://www.nirsoft.net/countryip/nl\\_owner.html](https://www.nirsoft.net/countryip/nl_owner.html)\n\n[https://asntool.com/](https://asntool.com/)\n\n[https://www.textcleanr.com/](https://www.textcleanr.com/)\n\n[https://networksdb.io/](https://networksdb.io/)\n\n1. Nirsoft gives a nice overview of all the providers with the IP-addressblocks.\n2. ASNTOOL helps to get all the networks in an Autonomous System.\n3. TEXTCLEAR helps to clean up the list you get from ASNTOOL.\n4. NETWORKSDB is an example of a website to find your ASN.\n\nASN stands for Autonomous System Number in networks. It is a unique identifier that is globally available and allows an autonomous system (AS) to exchange routing information with other ASes. An AS is a large network or group of networks that operates under a single routing policy. Each AS is assigned a unique ASN, which is a number used to differentiate and identify the AS in the global routing system. ASNs are essential for network operators to control routing within their networks and facilitate the exchange of routing information. \n\nSave the following script in the $HOME of your Edgerouter (or any directory of your likings). And give it the name â€œcreate\\_networkgroup\\_asn.shâ€.\n\n\t#!/bin/bash\n\t\n\t# Name: create_networkgroup_asn.sh\n\t# Coder: Marco Janssen (mastodon [@marc0janssen@mastodon.online](https://micro.blog/marc0janssen@mastodon.online))\n\t# date: 2024-01-17 21:30:00\n\t# update: 2024-01-31 20:50:00\n\t\n\tprint_usage() {\n\t  echo \"No parameters provided. Provide an ASN with IP blocks. Example: AS1136.\"\n\t}\n\t\n\tcreate_networkgroup_script() {\n\t  local asn\n\t  local temp_filename\n\t  local output_filename\n\t  local archive_filename\n\t  local networkgroup_script_filename\n\t  \n\t  asn=\"$1\"\n\t  temp_filename=\".temp.txt\"\n\t  output_filename=\"$asn.txt\"\n\t  archive_filename=\"$asn.$NOW.txt\"\n\t  networkgroup_script_filename=\"networkgroup-$asn.$NOW.sh\"\n\t\n\t  echo \"*** Writing new $asn output\"\n\t  whois -h whois.radb.net -- \"-i origin $asn\" | grep -Eo \"([0-9.]+){4}/[0-9]+\" | uniq -s 0 > \"$temp_filename\"\n\t\n\t  echo \"*** Getting owner of $asn\"\n\t  local owner\n\t  owner=$(whois -h whois.radb.net -- \"-i origin $asn\" | grep \"^descr:\" | awk '{print $2}' | sort | uniq -c | sort -nr | head -1 | awk '{ print $NF }')\n\t  echo \"--- Owner of $asn: $owner\"\n\t\n\t  echo \"*** Checking for changes in $asn\"\n\t  if [[ -f \"$output_filename\" && $(diff \"$output_filename\" \"$temp_filename\") == \"\" ]]; then\n\t    echo \"--- No Changes in $asn\"\n\t    \n\t    echo \"*** Cleaning temporary output\"\n\t    rm \"$temp_filename\"\n\t    \n\t  else\n\t    echo \"*** Writing networkgroup script for $asn\"\n\t    cat <<EOF >\"$networkgroup_script_filename\"\n\tdelete firewall group network-group $asn\n\tset firewall group network-group $asn description \"All networks $asn by $owner on $NOW\"\n\t$(sed -e \"s/^/set firewall group network-group $asn network /\" \"$temp_filename\")\n\tEOF\n\t\n\t    cp \"$networkgroup_script_filename\" nwgs.sh\n\t\n\t    echo \"*** Archiving $asn output\"\n\t    cp \"$temp_filename\" \"$archive_filename\"\n\t    mv \"$temp_filename\" \"$output_filename\"\n\t\n\t    echo \n\t    echo \"Now execute the following commands on the prompt of your Edgerouter\"\n\t    echo \n\t    echo \"configure\"\n\t    echo \". ./nwgs.sh\"\n\t    echo \"commit\"\n\t    echo \"save\"\n\t    echo \"exit\"    \n\t  fi\n\t}\n\t\n\tmain() {\n\t  if [[ $# -eq 0 ]]; then\n\t    print_usage\n\t  else\n\t    \n\t    NOW=$(date +\"%Y%m%d\")\n\t    ASN=\"$1\"\n\t    \n\t    readonly NOW\n\t    readonly ASN\n\t    \n\t    create_networkgroup_script \"$ASN\"\n\t  fi\n\t}\n\t\n\tmain \"$@\"\n\t\n\t\n\n### What will this script do?\n1. It will check if you give it a parameter with the name your ASN. For example, AS1136.\n2.  Write a textfile with all the networks in the AS\n3. Try to get the owner of an AS\n4. Then it will try to write a script for you which creates a network group in the Edgerouter. The file will be called â€œnetworkgroup-AS1136.\\<date\\>.sh (if you give it ASN AS1136).\n5. The script which is generated in step 4 will be copying to a shorter name â€œnwgs.shâ€ for your convenience. You can archive the longer one in step 4 and use the shorter one in this step.\n6. Finally, you get further instructions to use the script and create the net-workgroup.\n\n### Running the script\n1. Find the ASN you like to use for your network group. This can be done, for example, with the following site to find your ASN: [https://networksdb.io/](https://networksdb.io/)  \n\t  \n\t![](https://micro.mjanssen.nl/uploads/2024/asn-info.png)  \n\t  \n\tAnother way to get and ASN for your desired provider is to look up their IPblocks. I do this with a site from Nirsoft, [https://www.nirsoft.net/countryip/nl.html](https://www.nirsoft.net/countryip/nl.html). Here with the IPblocks for The Netherlands. If you want to have the ASN for a provider called â€œAlma International B.V.â€ for example, you just take the first available IP-address in their block â€œ2.16.0.1â€.\n2. Get the above script on your Edgerouter (ssh, scp, sftp) and place it in a directory of your likings. I place it in my $HOME on the router.\n3. Name the script â€œcreate\\_networkgroup\\_asn.shâ€\n4. Make sure the script is executable: `chmod +x ./create_networkgroup_asn.sh`\n5. Run the script (in this example for Alma International B.V., i.e., AS20940):  \n\t`./create_networkgroup_asn.sh AS20940`\n6. Execute the following commands after the script has run.\n\n\tconfigure\n\t. ./nwgs.sh\n\tcommit\n\tsave\n\texit\n\n**A note**\n\nThese network-groups are considerably smaller, I donâ€™t really notice any extra boottime of the router. \n\n### What is next?\nNow you have your network-group called â€œAS20940â€ (for this example) in the Edgerouter. You can use like it like any other resource in a firewall rule. You can now allow this network-group through your firewall and block all others that are not in this group (so allow only this provider to your webserver or whatever). Or you can block this network-group from your webserver and allow all other providers. Itâ€™s up to you. \n\nIf this blog was any help to you, give away a free Lucky Four-Leaf Clover {{< tinykudos >}}\n\nğŸ“\n",
				"date_published": "2024-12-07T08:57:16+01:00",
				"url": "https://micro.mjanssen.nl/2024/12/07/blocking-or-allowing.html",
				"tags": ["Technology","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2024/12/03/take-it-easy.html",
				
				"content_html": "<p>Take it easy, donâ€™t let the sound of your own wheels drive you crazy. ğŸ’¬ğŸ¸</p>\n",
				"content_text": "Take it easy, donâ€™t let the sound of your own wheels drive you crazy. ğŸ’¬ğŸ¸\n",
				"date_published": "2024-12-03T20:39:36+01:00",
				"url": "https://micro.mjanssen.nl/2024/12/03/take-it-easy.html",
				"tags": ["Microposts"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2024/12/01/vanmiddag-spontaan-gaan.html",
				
				"content_html": "<p>Vanmiddag spontaan gaan lunchen in de stad na de wandeling ğŸš¶â€â™€ï¸ ğŸ¥ª</p>\n<!-- raw HTML omitted -->\n",
				"content_text": "Vanmiddag spontaan gaan lunchen in de stad na de wandeling ğŸš¶â€â™€ï¸ ğŸ¥ª\n\n<img src=\"https://micro.mjanssen.nl/uploads/2024/102bae1c09.jpg\" width=\"450\" height=\"600\" alt=\"\">\n",
				"date_published": "2024-12-01T00:00:19+01:00",
				"url": "https://micro.mjanssen.nl/2024/12/01/vanmiddag-spontaan-gaan.html",
				"tags": ["Microposts"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2024/11/30/zaterdagochtend-wandeling-in.html",
				
				"content_html": "<p>Zaterdagochtend wandeling in Tiel. ğŸ“·ğŸš¶ğŸ½â€â™‚ï¸</p>\n<p>#10minutesfromhome</p>\n<p>Inundatiekanaal Tiel</p>\n<!-- raw HTML omitted -->\n",
				"content_text": "Zaterdagochtend wandeling in Tiel. ğŸ“·ğŸš¶ğŸ½â€â™‚ï¸\n\n#10minutesfromhome\n\nInundatiekanaal Tiel\n\n<img src=\"https://micro.mjanssen.nl/uploads/2024/b458ce3599.jpg\" width=\"600\" height=\"450\" alt=\"\">\n",
				"date_published": "2024-11-30T17:31:07+01:00",
				"url": "https://micro.mjanssen.nl/2024/11/30/zaterdagochtend-wandeling-in.html",
				"tags": ["Microposts"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2024/11/30/heerlijk-zon-rustige.html",
				
				"content_html": "<p>Heerlijk zo&rsquo;n rustige (stiekem luie) zaterdagochtend. Nu eerst even een korte wandeling van een uurtje of zo en dan door lopen naar de binnenstad voor een leuke lunch met mijn meisje. Wat wil je nog meer? ğŸğŸš¶ğŸ»â€â™‚ï¸</p>\n",
				"content_text": "Heerlijk zo'n rustige (stiekem luie) zaterdagochtend. Nu eerst even een korte wandeling van een uurtje of zo en dan door lopen naar de binnenstad voor een leuke lunch met mijn meisje. Wat wil je nog meer? ğŸğŸš¶ğŸ»â€â™‚ï¸\n",
				"date_published": "2024-11-30T10:31:02+01:00",
				"url": "https://micro.mjanssen.nl/2024/11/30/heerlijk-zon-rustige.html",
				"tags": ["Microposts"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2024/11/29/this-year-old.html",
				
				"content_html": "<p>This 17 year old lady is fast asleep. ğŸˆ</p>\n<!-- raw HTML omitted -->\n",
				"content_text": "This 17 year old lady is fast asleep. ğŸˆ\n\n<img src=\"https://marc0janssen.micro.blog/uploads/2024/image.jpg\" width=\"600\" height=\"600\" alt=\"\">\n",
				"date_published": "2024-11-29T23:32:26+01:00",
				"url": "https://micro.mjanssen.nl/2024/11/29/this-year-old.html",
				"tags": ["Microposts"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2023/09/11/uittredingsdatum.html",
				"title": "âœï¸ Uittredingsdatum",
				"content_html": "<p>Met pijn in haar vingertoppen hangt Emma aan de gevel van de lokale kerk in haar dorp. Uiteraard in het donker, ze mag niet gezien worden door de lokale wetsdienaar. Ze heeft dit al vaak gedaan. Niet alleen hier hangend aan de kerk, maar ook aan andere hoge en gevaarlijke objecten. Het beoefenen van parkour zit al 12 jaar in haar bloed vanaf haar 15de. Het jaar dat ze leerde over haar uittredingsdatum op haar geboorteakte. Zoals bij alle kinderen op die leeftijd wordt die datum dan ceremonieel in de kerk bekend gemaakt. Het maakt het kind direct bewust van de keuzes die gemaakt moeten worden en het pad dat gevolgd moet worden in het tijdsbestek op aarde.</p>\n<p>Niemand weet hoe laat het zal gebeuren en op welke wijze op die bewuste datum. Dat is in de handen van God, maar de datum staat vast. Iets om naar toe te leven en te werken. De kinderen die leren dat ze maar een beperkte tijd op aarde hebben, moeten vaak intensief begeleid worden. In sommige gevallen tot mentale problemen aan toe. Vanaf het moment dat Emma wist wat haar uittredingsdatum was, voelde het voor haar als een bevrijding. Ze kon haar tijd gaan indelen, plannen maken, haar leven uitstippelen. Welke dingen deed ze niet en welke dingen deed ze juist wel? Het besef kwam al snel dat haar keuzes en handelen niet tot haar dood zouden leiden, althans niet tot een dag voor die bewuste datum. Fatalistisch is ze nooit geworden hierdoor, maar het maakte wel dat ze koos de meer extreme sporten en hobbies uit te oefenen. Met bijbehorende ziekenhuisopnames uiteraard. Maar doodsangsten hebben haar ouders nooit gehad.</p>\n<p>Vrienden maken was soms lastig. Vooral als ze haar datum met een potentiÃ«le levenspartner uitwisselde en waarvan bleek dat zijn datum erg verschilde met die van haar. Dat maakte het vaak tot een korte amoureuze relatie, maar nooit tot die bestendige relatie die ze zocht. Dit heeft haar wel getekend door de jaren heen. Het maakte dat ze zich alleen voelde. Natuurlijk was er de warme band met haar ouders en vriendinnen, maar dat was toch anders. Die vriendschapsbanden met vriendinnen waren vaak wel diepe en innige verstandhoudingen, gezien de tijd die er dan bleek te zijn als de data werden uitgewisseld.</p>\n<p>Emma haar datum is morgen, morgen zal er een einde komen naar haar tijd. Daarom hangt ze nu voor de laatste keer aan de gevel, de gevel van de kerk die ze al zo vaak beklommen had. Deze dag, voor middernacht, kan ze dat nog ongestraft doen. Wanneer ze met een mooie salto afspringt van de richel aan kerkmuur, denkt ze aan morgen. Ze heeft met een aantal vriendinnen afgesproken. Ze wil er geen heisa van maken. Het moet een mooie dag worden. Wat ze morgen gaat doen met die vriendinnen weet ze eigenlijk nog niet zo goed. Moet ze haar hart volgen en gaan bungee-jumpen of parachutespringen? Of wordt het een gezellige, maar misschien fatale high tea? ğŸ“šğŸ“</p>\n",
				"content_text": "Met pijn in haar vingertoppen hangt Emma aan de gevel van de lokale kerk in haar dorp. Uiteraard in het donker, ze mag niet gezien worden door de lokale wetsdienaar. Ze heeft dit al vaak gedaan. Niet alleen hier hangend aan de kerk, maar ook aan andere hoge en gevaarlijke objecten. Het beoefenen van parkour zit al 12 jaar in haar bloed vanaf haar 15de. Het jaar dat ze leerde over haar uittredingsdatum op haar geboorteakte. Zoals bij alle kinderen op die leeftijd wordt die datum dan ceremonieel in de kerk bekend gemaakt. Het maakt het kind direct bewust van de keuzes die gemaakt moeten worden en het pad dat gevolgd moet worden in het tijdsbestek op aarde. \n\nNiemand weet hoe laat het zal gebeuren en op welke wijze op die bewuste datum. Dat is in de handen van God, maar de datum staat vast. Iets om naar toe te leven en te werken. De kinderen die leren dat ze maar een beperkte tijd op aarde hebben, moeten vaak intensief begeleid worden. In sommige gevallen tot mentale problemen aan toe. Vanaf het moment dat Emma wist wat haar uittredingsdatum was, voelde het voor haar als een bevrijding. Ze kon haar tijd gaan indelen, plannen maken, haar leven uitstippelen. Welke dingen deed ze niet en welke dingen deed ze juist wel? Het besef kwam al snel dat haar keuzes en handelen niet tot haar dood zouden leiden, althans niet tot een dag voor die bewuste datum. Fatalistisch is ze nooit geworden hierdoor, maar het maakte wel dat ze koos de meer extreme sporten en hobbies uit te oefenen. Met bijbehorende ziekenhuisopnames uiteraard. Maar doodsangsten hebben haar ouders nooit gehad.\n\nVrienden maken was soms lastig. Vooral als ze haar datum met een potentiÃ«le levenspartner uitwisselde en waarvan bleek dat zijn datum erg verschilde met die van haar. Dat maakte het vaak tot een korte amoureuze relatie, maar nooit tot die bestendige relatie die ze zocht. Dit heeft haar wel getekend door de jaren heen. Het maakte dat ze zich alleen voelde. Natuurlijk was er de warme band met haar ouders en vriendinnen, maar dat was toch anders. Die vriendschapsbanden met vriendinnen waren vaak wel diepe en innige verstandhoudingen, gezien de tijd die er dan bleek te zijn als de data werden uitgewisseld.\n\nEmma haar datum is morgen, morgen zal er een einde komen naar haar tijd. Daarom hangt ze nu voor de laatste keer aan de gevel, de gevel van de kerk die ze al zo vaak beklommen had. Deze dag, voor middernacht, kan ze dat nog ongestraft doen. Wanneer ze met een mooie salto afspringt van de richel aan kerkmuur, denkt ze aan morgen. Ze heeft met een aantal vriendinnen afgesproken. Ze wil er geen heisa van maken. Het moet een mooie dag worden. Wat ze morgen gaat doen met die vriendinnen weet ze eigenlijk nog niet zo goed. Moet ze haar hart volgen en gaan bungee-jumpen of parachutespringen? Of wordt het een gezellige, maar misschien fatale high tea? ğŸ“šğŸ“\n\n",
				"date_published": "2023-09-11T18:57:37+01:00",
				"url": "https://micro.mjanssen.nl/2023/09/11/uittredingsdatum.html",
				"tags": ["Schrijfsels","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2023/09/11/zeevisser.html",
				"title": "âœï¸ Zeevisser",
				"content_html": "<p>Met de zilte zeewind door onze haren staken we de zeedijk bij Borssele over. Lopend uiteraard want tante had de auto geparkeerd onderaan de dijk. De zon was zo fel en zo heet dat het asfalt gesmolten was en de zolen van onze schoenen bleven plakken aan de zwarte ondergrond. We gingen het strand op, daar wilde je zijn als kind. Rennen op het strand en het liefst ook beestjes vangen. Want als kleine jongen uit de Betuwe hadden we die mooie kwalletjes en krabbetjes niet in de boomgaarden.</p>\n<p>Het strand van Borssele voorzag in een voor ons grote en handige attractie in dat opzicht. Een soort wildwaterbaan over het strand waar je alleen maar je schepnetje in hoefde te houden om de mooiste creaties uit de zee te vangen. Dat ze wat suf waren door de klappen van de koelwaterpompen van de kerncentrale dat deerde niet als jonge zeevisser. We stonden tussen de grote zeemeeuwen aan de rand van de stroom die ook hun slag sloegen. Best indrukwekkend wanneer die zeemeeuwen duidelijk maakten dat ze ook een plaats hadden langs deze fastfood van zeedelicatessen.</p>\n<p>â€™s Avonds zaten de gevangen krabbetjes allemaal in miniatuur zeeaquaria op het balkon van het appartement van mijn tante. Ieder in zijn eigen Tupperwarebakje, want daar grossierde mijn tante dan weer in. Velen van hen, als niet allemaal, hebben hun laatste rustplaats in de tuin van het appartementencomplex gevonden.</p>\n<p>Jaren later vertelde mijn tante dat je het strand niet meer zou herkennen. De kerncentrale stond er uiteraard nog maar het strand zou opgeslokt zijn. Niet door de zee, maar door de groter wordende energievraag. Ik weet het niet, ik ben er nooit meer wezen kijken. Zou ook niet meer weten waar we parkeerden. Dat zie je natuurlijk ook niet zo goed vanaf de achterbank tussen de schepnetten en de plastic bakjes. âœï¸ğŸ—ºï¸ğŸŒ±</p>\n",
				"content_text": "Met de zilte zeewind door onze haren staken we de zeedijk bij Borssele over. Lopend uiteraard want tante had de auto geparkeerd onderaan de dijk. De zon was zo fel en zo heet dat het asfalt gesmolten was en de zolen van onze schoenen bleven plakken aan de zwarte ondergrond. We gingen het strand op, daar wilde je zijn als kind. Rennen op het strand en het liefst ook beestjes vangen. Want als kleine jongen uit de Betuwe hadden we die mooie kwalletjes en krabbetjes niet in de boomgaarden. \n\nHet strand van Borssele voorzag in een voor ons grote en handige attractie in dat opzicht. Een soort wildwaterbaan over het strand waar je alleen maar je schepnetje in hoefde te houden om de mooiste creaties uit de zee te vangen. Dat ze wat suf waren door de klappen van de koelwaterpompen van de kerncentrale dat deerde niet als jonge zeevisser. We stonden tussen de grote zeemeeuwen aan de rand van de stroom die ook hun slag sloegen. Best indrukwekkend wanneer die zeemeeuwen duidelijk maakten dat ze ook een plaats hadden langs deze fastfood van zeedelicatessen.\n\nâ€™s Avonds zaten de gevangen krabbetjes allemaal in miniatuur zeeaquaria op het balkon van het appartement van mijn tante. Ieder in zijn eigen Tupperwarebakje, want daar grossierde mijn tante dan weer in. Velen van hen, als niet allemaal, hebben hun laatste rustplaats in de tuin van het appartementencomplex gevonden. \n\nJaren later vertelde mijn tante dat je het strand niet meer zou herkennen. De kerncentrale stond er uiteraard nog maar het strand zou opgeslokt zijn. Niet door de zee, maar door de groter wordende energievraag. Ik weet het niet, ik ben er nooit meer wezen kijken. Zou ook niet meer weten waar we parkeerden. Dat zie je natuurlijk ook niet zo goed vanaf de achterbank tussen de schepnetten en de plastic bakjes. âœï¸ğŸ—ºï¸ğŸŒ±\n\n\n",
				"date_published": "2023-09-11T18:41:57+01:00",
				"url": "https://micro.mjanssen.nl/2023/09/11/zeevisser.html",
				"tags": ["Schrijfsels","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2023/09/11/duik-horloge.html",
				"title": "âœï¸Duik horloge",
				"content_html": "<p>De slagen van de klok in de kerktoren gaven aan dat ik opnieuw te laat voor het avondeten zou zijn. Klokkijken was nog geen van mijn basisbekwaamheden in die tijd. Ik had van mijn ouders wel een mooi duikhorloge gekregen. Daar zat zoâ€™n handige ring op die moeders op vijf uur draaide, zodat ik kon zien wanneer ik moest gaan rennen. Maar ja, als je aan het voetballen bent in de tuin achter het gemeentehuis en je bent aan het winnen, dan helpt zoâ€™n duikhorloge ook niet om vijf uur.</p>\n<p>Ik rende onder de kerktoren door, langs de gracht, zo door de poort naar huis. Ik wist dat moeders niet met open armen klaar zou staan. Dit was al de zoveelste keer namelijk. En op tijd thuis voor het eten was een norm die gehaald moest worden bij ons thuis. Mijn vader was diabeet en in die dagen was discipline en aardappelen wegen het enige voor hem waarmee hij controle hield. En die discipline werd ook van mij verwacht, van een jonge voetballer met duikhorloge.</p>\n<p>Het eten smaakte goed, al was moeders wel op oorlogspad met me. Er werd niet veel gezegd aan tafel. Ik wist ook al welke penalty ik tegen zou gaan krijgen. In de tijd tussen het bidden na het eten en de enkele reis slaapkamer, kreeg ik nog even een opfrisser van het duikhorloge. Geslagen werd er nooit, maar een eenzame opsluiting was er geregeld voor me.</p>\n<p>Want voetballen doe je namelijk met genopte schoenen en niet met een deel van een duikuitrusting. Vader werd nooit kwaad, hij was ook een voetballer. Hij snapte me wel. Hij zou me waarschijnlijk ook eerder een wedstrijdklok gegeven hebben dan een duikhorloge.</p>\n<p>Het slaapkamerraam gaf een prima uitzicht op de buurt en ik droomde alweer het volgende duel in de tuin achter het gemeentehuis. âœï¸âš½ï¸ğŸ“–</p>\n",
				"content_text": "De slagen van de klok in de kerktoren gaven aan dat ik opnieuw te laat voor het avondeten zou zijn. Klokkijken was nog geen van mijn basisbekwaamheden in die tijd. Ik had van mijn ouders wel een mooi duikhorloge gekregen. Daar zat zoâ€™n handige ring op die moeders op vijf uur draaide, zodat ik kon zien wanneer ik moest gaan rennen. Maar ja, als je aan het voetballen bent in de tuin achter het gemeentehuis en je bent aan het winnen, dan helpt zoâ€™n duikhorloge ook niet om vijf uur.\n\nIk rende onder de kerktoren door, langs de gracht, zo door de poort naar huis. Ik wist dat moeders niet met open armen klaar zou staan. Dit was al de zoveelste keer namelijk. En op tijd thuis voor het eten was een norm die gehaald moest worden bij ons thuis. Mijn vader was diabeet en in die dagen was discipline en aardappelen wegen het enige voor hem waarmee hij controle hield. En die discipline werd ook van mij verwacht, van een jonge voetballer met duikhorloge. \n\nHet eten smaakte goed, al was moeders wel op oorlogspad met me. Er werd niet veel gezegd aan tafel. Ik wist ook al welke penalty ik tegen zou gaan krijgen. In de tijd tussen het bidden na het eten en de enkele reis slaapkamer, kreeg ik nog even een opfrisser van het duikhorloge. Geslagen werd er nooit, maar een eenzame opsluiting was er geregeld voor me. \n\nWant voetballen doe je namelijk met genopte schoenen en niet met een deel van een duikuitrusting. Vader werd nooit kwaad, hij was ook een voetballer. Hij snapte me wel. Hij zou me waarschijnlijk ook eerder een wedstrijdklok gegeven hebben dan een duikhorloge. \n\nHet slaapkamerraam gaf een prima uitzicht op de buurt en ik droomde alweer het volgende duel in de tuin achter het gemeentehuis. âœï¸âš½ï¸ğŸ“–\n\n",
				"date_published": "2023-09-11T18:32:54+01:00",
				"url": "https://micro.mjanssen.nl/2023/09/11/duik-horloge.html",
				"tags": ["Schrijfsels","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2023/08/21/papas-goede-werk.html",
				"title": "âœï¸ Papaâ€™s Goede Werk",
				"content_html": "<p>Hij kon alles horen, maar durfde zijn ogen niet te openen. Liggende in de kast onder de trap hoort hij de soldaten schreeuwen. Zijn moeder heeft de grootste moeite om ze buiten te houden. Plots hoort hij haar gillen.</p>\n<p>â€˜Als papa eens hier zou zijn,â€™ fluistert de kleine Aleksandr in zichzelf. Hij balt zijn kleine knuistjes. Mama heeft hem duidelijk verteld dat hij, hoe dan ook, onder de trap moest blijven. Papa doet goed werk voor OekraÃ¯ne, was hem verteld. Wat papa precies deed, wist de kleine man niet. Maar het zou niet lang meer duren of papa zou thuiskomen.</p>\n<p>Hij had tegen zijn moeder gezegd dat als hij later groot zou zijn, hij ook dat goede werk van papa wilde doen. Voor OekraÃ¯ne, net als papa. Maar Aleksandr hoopte wel dat dan de oorlog voorbij zou zijn.</p>\n<p>Plots gaat de deur van de kast met een ferme zwaai open. Mama staat in de deuropening. â€˜Alles is weer rustig, Aleksandr,â€™ zegt ze en probeert het trillen van haar stem te verbergen. Haar haren zien er verwilderd uit, haar kleren lijken in de plooi getrokken. Door de zwarte vegen op haar wangen ziet de kleine man sporen van tranen lopen, maar mama tovert een lach op haar gezicht.</p>\n<p>Aleksandr zijn knuistjes ontspannen, â€˜Als papa eens hier zou zijn,â€™ denkt hij. ğŸ“ğŸ¨</p>\n",
				"content_text": "Hij kon alles horen, maar durfde zijn ogen niet te openen. Liggende in de kast onder de trap hoort hij de soldaten schreeuwen. Zijn moeder heeft de grootste moeite om ze buiten te houden. Plots hoort hij haar gillen.\n\nâ€˜Als papa eens hier zou zijn,â€™ fluistert de kleine Aleksandr in zichzelf. Hij balt zijn kleine knuistjes. Mama heeft hem duidelijk verteld dat hij, hoe dan ook, onder de trap moest blijven. Papa doet goed werk voor OekraÃ¯ne, was hem verteld. Wat papa precies deed, wist de kleine man niet. Maar het zou niet lang meer duren of papa zou thuiskomen.\n\nHij had tegen zijn moeder gezegd dat als hij later groot zou zijn, hij ook dat goede werk van papa wilde doen. Voor OekraÃ¯ne, net als papa. Maar Aleksandr hoopte wel dat dan de oorlog voorbij zou zijn. \n\nPlots gaat de deur van de kast met een ferme zwaai open. Mama staat in de deuropening. â€˜Alles is weer rustig, Aleksandr,â€™ zegt ze en probeert het trillen van haar stem te verbergen. Haar haren zien er verwilderd uit, haar kleren lijken in de plooi getrokken. Door de zwarte vegen op haar wangen ziet de kleine man sporen van tranen lopen, maar mama tovert een lach op haar gezicht.\n\nAleksandr zijn knuistjes ontspannen, â€˜Als papa eens hier zou zijn,â€™ denkt hij. ğŸ“ğŸ¨\n\n\n",
				"date_published": "2023-08-21T22:06:38+01:00",
				"url": "https://micro.mjanssen.nl/2023/08/21/papas-goede-werk.html",
				"tags": ["Schrijfsels","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2023/08/19/112406.html",
				"title": "âœï¸ Altijd een beproeving",
				"content_html": "<p>Afgepeigerd na het sporten dekt Frits in de keuken. Na het verlies van zijn eerste 93 kilo nog altijd een terging. Zijn vrouw vergt het uiterste van hem. ğŸƒâ€â™‚ï¸ğŸƒâ€â™€ï¸ğŸƒ</p>\n",
				"content_text": "Afgepeigerd na het sporten dekt Frits in de keuken. Na het verlies van zijn eerste 93 kilo nog altijd een terging. Zijn vrouw vergt het uiterste van hem. ğŸƒâ€â™‚ï¸ğŸƒâ€â™€ï¸ğŸƒ\n\n",
				"date_published": "2023-08-19T11:24:06+01:00",
				"url": "https://micro.mjanssen.nl/2023/08/19/112406.html",
				"tags": ["Schrijfsels","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2023/08/18/tuinslangtrots.html",
				"title": "âœï¸ Tuinslangtrots",
				"content_html": "<p>Na vijf jaar loopt hij toevallig door haar straat. Terwijl ze rustig de tuin water staat te geven, pikt ze een glimp op van hem door de struiken aan de rand van haar perceel. Ze voelt de woede weer, de vernedering van die zak hooi.</p>\n<p>Wanneer hij in zijn dandy outfit voorbij komt aan haar voortuin, draait ze zich expres naar hem toe. De straal van de tuinslang recht in gezicht van de nieuwe vlam aan zijn zijde.</p>\n<p>â€˜HÃ©, jij hier?â€™, lacht ze. Wat opgelucht dat hij niet de getroffene is, zegt hij, â€˜Joh, wat leuk je weer te zien. Weer eens afspreken?â€™</p>\n<p>Terwijl de inmiddels gebluste vlam haar make-up fatsoeneert en hij geen aandacht voor haar heeft, weet ze, â€˜Eens een zak hooi, altijd een zak hooi.â€™ En blust hem ook nog even na met de tuinslang. âœï¸ğŸŒ±ğŸ’¬</p>\n",
				"content_text": "Na vijf jaar loopt hij toevallig door haar straat. Terwijl ze rustig de tuin water staat te geven, pikt ze een glimp op van hem door de struiken aan de rand van haar perceel. Ze voelt de woede weer, de vernedering van die zak hooi.\n\nWanneer hij in zijn dandy outfit voorbij komt aan haar voortuin, draait ze zich expres naar hem toe. De straal van de tuinslang recht in gezicht van de nieuwe vlam aan zijn zijde. \n\nâ€˜HÃ©, jij hier?â€™, lacht ze. Wat opgelucht dat hij niet de getroffene is, zegt hij, â€˜Joh, wat leuk je weer te zien. Weer eens afspreken?â€™ \n\nTerwijl de inmiddels gebluste vlam haar make-up fatsoeneert en hij geen aandacht voor haar heeft, weet ze, â€˜Eens een zak hooi, altijd een zak hooi.â€™ En blust hem ook nog even na met de tuinslang. âœï¸ğŸŒ±ğŸ’¬\n\n",
				"date_published": "2023-08-18T11:32:14+01:00",
				"url": "https://micro.mjanssen.nl/2023/08/18/tuinslangtrots.html",
				"tags": ["Schrijfsels","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2023/08/17/glorieuze-kampeermomenten.html",
				"title": "âœï¸ Glorieuze kampeermomenten",
				"content_html": "<p>Hij wilde eigenlijk niet naar buiten op een avond als deze. De regen stroomde langs het tentdoek naar beneden. Met hoge nood toch haastend naar de campingwc. Hij kon ternauwernood de toiletrol droog houden. Met het water in zijn sportschoenen en onder hoge druk, was dan toch de verlossing nabij.</p>\n<p>Kak, campingpas vergeten. ğŸ•ï¸â›ºï¸ğŸ“âœï¸</p>\n",
				"content_text": "Hij wilde eigenlijk niet naar buiten op een avond als deze. De regen stroomde langs het tentdoek naar beneden. Met hoge nood toch haastend naar de campingwc. Hij kon ternauwernood de toiletrol droog houden. Met het water in zijn sportschoenen en onder hoge druk, was dan toch de verlossing nabij. \n\nKak, campingpas vergeten. ğŸ•ï¸â›ºï¸ğŸ“âœï¸\n\n",
				"date_published": "2023-08-17T07:45:16+01:00",
				"url": "https://micro.mjanssen.nl/2023/08/17/glorieuze-kampeermomenten.html",
				"tags": ["Schrijfsels","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2023/08/14/driemaal-scheepsrecht.html",
				"title": "âœï¸ Driemaal Scheepsrecht",
				"content_html": "<p>Ze stond al meer dan een half uur voor zijn deur. In de regen, maar dat deerde haar niet. Haar blik gefocust op de knop van de deurbel. Ze twijfelde of ze zou gaan drukken. Of het nog gepast was om te drukken. Ze wist dat ze dit keer te ver was gegaan. Ze wist dat het nu mogelijk te laat was. Te laat om nog excuus aan te bieden.</p>\n<p>Weer keek ze vertwijfeld naar de deurbel. Haar anders zo mooie haren zagen er niet uit door de regen. Wat zou ze moeten zeggen? Hoe zou hij reageren? Het was al de derde keer geweest, maar toch kwam ze altijd terug naar hem.</p>\n<p>De andere keren was het onwetendheid. Dommigheid. Onoplettendheid. Maar nu had ze beter moeten weten, beter voorbereid moeten zijn op de valkuilen. Het ging allemaal ook zo snel. Alsof ze er ingeluisd was. Maar ze besefte dat ze zelf had moeten opletten.</p>\n<p>Als ze uiteindelijk omdraait en weg wil rennen, komt hij met een ferme pas de tuin ingelopen. â€˜Ik kom net bij de slager vandaanâ€™, roept hij. Snel beschermt hij haar voor de regen en opent de voordeur. â€˜Schatjeâ€™, zegt hij, â€˜als we morgen weer kunnen barbecueÃ«n zal ik dan maar de hamburgers doen? Driemaal laten verbranden is scheepsrecht hÃ©â€™. ğŸ“âœï¸</p>\n",
				"content_text": "Ze stond al meer dan een half uur voor zijn deur. In de regen, maar dat deerde haar niet. Haar blik gefocust op de knop van de deurbel. Ze twijfelde of ze zou gaan drukken. Of het nog gepast was om te drukken. Ze wist dat ze dit keer te ver was gegaan. Ze wist dat het nu mogelijk te laat was. Te laat om nog excuus aan te bieden. \n\nWeer keek ze vertwijfeld naar de deurbel. Haar anders zo mooie haren zagen er niet uit door de regen. Wat zou ze moeten zeggen? Hoe zou hij reageren? Het was al de derde keer geweest, maar toch kwam ze altijd terug naar hem. \n\nDe andere keren was het onwetendheid. Dommigheid. Onoplettendheid. Maar nu had ze beter moeten weten, beter voorbereid moeten zijn op de valkuilen. Het ging allemaal ook zo snel. Alsof ze er ingeluisd was. Maar ze besefte dat ze zelf had moeten opletten. \n\nAls ze uiteindelijk omdraait en weg wil rennen, komt hij met een ferme pas de tuin ingelopen. â€˜Ik kom net bij de slager vandaanâ€™, roept hij. Snel beschermt hij haar voor de regen en opent de voordeur. â€˜Schatjeâ€™, zegt hij, â€˜als we morgen weer kunnen barbecueÃ«n zal ik dan maar de hamburgers doen? Driemaal laten verbranden is scheepsrecht hÃ©â€™. ğŸ“âœï¸\n\n",
				"date_published": "2023-08-14T07:51:08+01:00",
				"url": "https://micro.mjanssen.nl/2023/08/14/driemaal-scheepsrecht.html",
				"tags": ["Schrijfsels","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2023/02/11/pretty-good-privacy.html",
				"title": "ğŸ“ŸPretty Good Privacy with keybase.io",
				"content_html": "<blockquote>\n<p>2020 : This post is obsolete since Keybase was acquired by Zoom.</p>\n</blockquote>\n<p>Used PGP back in the 90s just because it was possible. The internet was growing, and my friends and I liked to experiment in those days with all that we found on the internet. PGP was one of those things. We had great fun back then, but never used it again the following decades.</p>\n<p>But a few days ago I saw a talk from Mike Godwin about privacy on the internet. He pointed out <a href=\"https://www.keybase.io/\">https://www.keybase.io/</a> in his talk as a start to set up PGP and ways to communicate with him.</p>\n<p>I got curious again about PGP and Keybase.io, and I had no trouble at all to quickly set up <a href=\"keybase.io/marc0janssen\">an account</a> and a PGP key pair with these guys. They have nice low-level tooling to encrypt and decrypt messages on their website.</p>\n<p>What I wanted again was a way to have my email encrypted, like I had back then in the 90s when my friends and I played around with it. I found a <a href=\"ssd.eff.org/en/module/how-use-pgp-mac-os-x\">great tutorial</a> on the internet from the <a href=\"eff.org\">Electronic Frontier Foundation</a> on how to het PGP setup on a MAC.</p>\n<p>It is set up with Thunderbird Mail Client and within this tutorial they let you generate a PGP key pair with GnuPG. Which will do the job, but I wanted to set it up with my Keybase.io key pair. I needed to export my Keybase.io key pair to the GnuPG keychain.</p>\n<p>Reading the docs at their site, I found out that I could pull my Keybase.io Key to GnuPG keychain by the following command.</p>\n<pre><code>keybase pgp pull-private --all\n</code></pre>\n<p>But this gave me the following error</p>\n<pre><code>â–¶ ERROR .keys doesn't exist\n</code></pre>\n<p>Just following this workaround to fix it.</p>\n<p>Make sure that in the linked device to your keybase.io account, the option &ldquo;Forbid account changes from the website&rdquo; is disabled in the advanced settings. By disabling this option, more possibles are enabled on the keybase.io site. One of them is to export your private key.</p>\n<p>After you have disabled this option on your device, go to the website of keybase.io and visit your profile page. And find an &ldquo;edit&rdquo; link behind the signature of the public key. Select the edit link, and you get the option to export your private key.</p>\n<p>Copy the key and save it to your desktop. Use the following command to import the private key to the GnuPG keychain. Where &ldquo;Private_Key.asc&rdquo; holds your private key.</p>\n<pre><code>gpg2 --allow-secret-key-import --import Private_Key.asc\n</code></pre>\n<p>Also save your public key to your desktop. And import this one with the following command. Where &ldquo;Public_Key.asc&rdquo; holds your public key.</p>\n<pre><code>gpg2 --import Public_Key.asc\n</code></pre>\n<p>This serie of actions will replace the generation of a PGP key pair with GnuPG and import your keybase.io key pair.</p>\n<p><strong>Don&rsquo;t forget to delete your private key from your desktop.</strong></p>\n<p>Make sure it&rsquo;s cleaned up!</p>\n<p>Now finish the thunderbird tutorial from EFF with the keybase.io key pair. And you have a PGP mailclient setup with keybase.io. There is also a nice integration possible with the macOS MAIL.APP with <a href=\"https://gpgtools.org\">https://gpgtools.org</a>, but this requires a paid license. Whatever suites your needs.</p>\n<p>Ok, I hope this helps you.</p>\n<p>Find me here on keybase.io and if you like to send me a PGP encrypted email, <a href=\"keybase.io/marc0janssen\">here</a> is my public key. But this one can also be found on <a href=\"keybase.io/marc0janssen#show-public%0A%0A%0A\">keybase.io</a>.</p>\n<p>Oh, and don&rsquo;t forget to send me your public key or your keybase.io profile page, so I can download your public key if you shared it. If you want a message back, of course ;-).</p>\n<p>Use the following command to pull in my public key in your GnuPG keychain. And a follow on keybase.io.</p>\n<pre><code>curl https://keybase.io/marc0janssen/pgp_keys.asc | gpg2 --import\n\nkeybase follow marc0janssen\n</code></pre>\n<p>Thanks for reading! ğŸ“ğŸ–‹ï¸</p>\n",
				"content_text": "> 2020 : This post is obsolete since Keybase was acquired by Zoom.\n\nUsed PGP back in the 90s just because it was possible. The internet was growing, and my friends and I liked to experiment in those days with all that we found on the internet. PGP was one of those things. We had great fun back then, but never used it again the following decades.\n\nBut a few days ago I saw a talk from Mike Godwin about privacy on the internet. He pointed out [https://www.keybase.io/](https://www.keybase.io/) in his talk as a start to set up PGP and ways to communicate with him.\n\nI got curious again about PGP and Keybase.io, and I had no trouble at all to quickly set up [an account](keybase.io/marc0janssen) and a PGP key pair with these guys. They have nice low-level tooling to encrypt and decrypt messages on their website.\n\nWhat I wanted again was a way to have my email encrypted, like I had back then in the 90s when my friends and I played around with it. I found a [great tutorial](ssd.eff.org/en/module/how-use-pgp-mac-os-x) on the internet from the [Electronic Frontier Foundation](eff.org) on how to het PGP setup on a MAC. \n\nIt is set up with Thunderbird Mail Client and within this tutorial they let you generate a PGP key pair with GnuPG. Which will do the job, but I wanted to set it up with my Keybase.io key pair. I needed to export my Keybase.io key pair to the GnuPG keychain. \n\nReading the docs at their site, I found out that I could pull my Keybase.io Key to GnuPG keychain by the following command. \n\n\tkeybase pgp pull-private --all\n\nBut this gave me the following error\n\n\tâ–¶ ERROR .keys doesn't exist\n\nJust following this workaround to fix it. \n\nMake sure that in the linked device to your keybase.io account, the option \"Forbid account changes from the website\" is disabled in the advanced settings. By disabling this option, more possibles are enabled on the keybase.io site. One of them is to export your private key.\n\nAfter you have disabled this option on your device, go to the website of keybase.io and visit your profile page. And find an \"edit\" link behind the signature of the public key. Select the edit link, and you get the option to export your private key.\n\nCopy the key and save it to your desktop. Use the following command to import the private key to the GnuPG keychain. Where \"Private\\_Key.asc\" holds your private key.\n\n\tgpg2 --allow-secret-key-import --import Private_Key.asc\n\nAlso save your public key to your desktop. And import this one with the following command. Where \"Public\\_Key.asc\" holds your public key.\n\n\tgpg2 --import Public_Key.asc\n\nThis serie of actions will replace the generation of a PGP key pair with GnuPG and import your keybase.io key pair. \n\n**Don't forget to delete your private key from your desktop.**\n\nMake sure it's cleaned up!\n\nNow finish the thunderbird tutorial from EFF with the keybase.io key pair. And you have a PGP mailclient setup with keybase.io. There is also a nice integration possible with the macOS MAIL.APP with [https://gpgtools.org](https://gpgtools.org), but this requires a paid license. Whatever suites your needs.\n\nOk, I hope this helps you. \n\nFind me here on keybase.io and if you like to send me a PGP encrypted email, [here](keybase.io/marc0janssen) is my public key. But this one can also be found on [keybase.io](keybase.io/marc0janssen#show-public%0A%0A%0A).\n\nOh, and don't forget to send me your public key or your keybase.io profile page, so I can download your public key if you shared it. If you want a message back, of course ;-).\n\nUse the following command to pull in my public key in your GnuPG keychain. And a follow on keybase.io.\n\n\tcurl https://keybase.io/marc0janssen/pgp_keys.asc | gpg2 --import\n\t\n\tkeybase follow marc0janssen\n\nThanks for reading! ğŸ“ğŸ–‹ï¸\n\n\n",
				"date_published": "2023-02-11T17:03:56+01:00",
				"url": "https://micro.mjanssen.nl/2023/02/11/pretty-good-privacy.html",
				"tags": ["Technology","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2023/02/11/starbit-commander.html",
				"title": "ğŸ‘¨ğŸ½â€ğŸ’»Starbit Commander",
				"content_html": "<p>This game is my first coding for The BBC Micro:bit. The goal is to have a nice target to practice and learn microPython on this device. But first I wanted to have a go on the makeCode editor for the Micro:bit.</p>\n<p>I made this simple little game. Flying a spaceship through an astroid field. Occasionally, a blinking power-up will appear. This gives the advance to survive an astroid collision. Catching two power-ups will destroy all astroids in the field. Astroids will speed up in time, but slow down if a double power-up is acquired.</p>\n<p><img src=\"https://micro.mjanssen.nl/uploads/2024/draggedimage.png\" alt=\"\"></p>\n<p>To edit this repository in MakeCode.</p>\n<ul>\n<li>OpenÂ <a href=\"https://makecode.microbit.org/\">https://makecode.microbit.org/</a></li>\n<li>ClickÂ ImportÂ and select Import URL</li>\n<li>PasteÂ <a href=\"https://github.com/marc0janssen/starbit-commander\">https://github.com/marc0janssen/starbit-commander</a></li>\n<li>Select import</li>\n</ul>\n<p>ğŸ®ğŸ––ğŸ»ğŸš€</p>\n",
				"content_text": "This game is my first coding for The BBC Micro:bit. The goal is to have a nice target to practice and learn microPython on this device. But first I wanted to have a go on the makeCode editor for the Micro:bit.\n\nI made this simple little game. Flying a spaceship through an astroid field. Occasionally, a blinking power-up will appear. This gives the advance to survive an astroid collision. Catching two power-ups will destroy all astroids in the field. Astroids will speed up in time, but slow down if a double power-up is acquired.\n\n![](https://micro.mjanssen.nl/uploads/2024/draggedimage.png)\n\nTo edit this repository in MakeCode.\n\n- OpenÂ [https://makecode.microbit.org/](https://makecode.microbit.org/)\n- ClickÂ ImportÂ and select Import URL\n- PasteÂ [https://github.com/marc0janssen/starbit-commander](https://github.com/marc0janssen/starbit-commander)\n- Select import\n\nğŸ®ğŸ––ğŸ»ğŸš€\n",
				"date_published": "2023-02-11T16:48:26+01:00",
				"url": "https://micro.mjanssen.nl/2023/02/11/starbit-commander.html",
				"tags": ["Technology","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2023/02/11/simple-simon-says.html",
				"title": "ğŸ‘¨ğŸ½â€ğŸ’»Simple Simon Says",
				"content_html": "<p>The game Simon in the late 70s was maybe the first &ldquo;computer&rdquo; game I played. Well, perhaps it was a real computer. I was just a kid, but the game always stayed with me. In my mind, that is. The game was from a friend, and we played it for ages.</p>\n<p>Now with the Micro:bit I wanted to revive this memory and use the Micro:bit as a vehicle to get this to life again. Below is my make code attempt. I used a Micro:bit version2 for this.</p>\n<p>This Simon listens to Button A, Button B, Button C (the touch sensitive logo), Button D (= Button A+B).</p>\n<p>It was fun to create and a good way to set me off with the possibilities of the Micro:bitâ€¦</p>\n<p><img src=\"https://micro.mjanssen.nl/uploads/2024/a6f231d143.png\" alt=\"\"></p>\n<p>To edit this repository in MakeCode:</p>\n<ul>\n<li>openÂ <a href=\"https://makecode.microbit.org/\">https://makecode.microbit.org/</a></li>\n<li>ClickÂ ImportÂ and selectÂ Import URL</li>\n<li>pasteÂ <a href=\"https://github.com/marc0janssen/simple-simon-says\">https://github.com/marc0janssen/simple-simon-says</a>Â </li>\n<li>select import\nğŸ®ğŸ“ğŸ–Œï¸</li>\n</ul>\n",
				"content_text": "The game Simon in the late 70s was maybe the first \"computer\" game I played. Well, perhaps it was a real computer. I was just a kid, but the game always stayed with me. In my mind, that is. The game was from a friend, and we played it for ages.\n\nNow with the Micro:bit I wanted to revive this memory and use the Micro:bit as a vehicle to get this to life again. Below is my make code attempt. I used a Micro:bit version2 for this.\n\nThis Simon listens to Button A, Button B, Button C (the touch sensitive logo), Button D (= Button A+B).\n\nIt was fun to create and a good way to set me off with the possibilities of the Micro:bitâ€¦\n\n![](https://micro.mjanssen.nl/uploads/2024/a6f231d143.png)\n\nTo edit this repository in MakeCode:\n\n- openÂ [https://makecode.microbit.org/](https://makecode.microbit.org/)\n- ClickÂ ImportÂ and selectÂ Import URL\n- pasteÂ [https://github.com/marc0janssen/simple-simon-says](https://github.com/marc0janssen/simple-simon-says)Â \n- select import\nğŸ®ğŸ“ğŸ–Œï¸\n",
				"date_published": "2023-02-11T16:44:10+01:00",
				"url": "https://micro.mjanssen.nl/2023/02/11/simple-simon-says.html",
				"tags": ["Technology","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2023/02/11/kleine-baguette-met.html",
				"title": "âœï¸ Kleine baguette met gerookte kipfilet",
				"content_html": "<p>Weer op weg naar huis met de trein. En elke dag staat hij daar bij de ingang, of uitgang zoals je wilt, van het station. Dagelijks groet hij de mensen die hun trein moeten halen, in de hoop dat hij een groet terug krijgt. En natuurlijk een kleine bijdrage. Velen lopen hem voorbij en groeten niet eens.Â </p>\n<p>Ik zie hem bijna dagelijks, hij groet me dan ook bijna dagelijks. En dagelijks wordt de sociale druk voor mij groter. Hij lijkt elke dag vriendelijker te worden. Hij spreekt me altijd beleefd aan en nooit opdringerig. Hij is gewoon vriendelijk en dat is zijn sterke kant.</p>\n<p>Ik heb me voorgenomen om geen geld te geven. Dat is niet helpen. Ja, van de wal in de sloot. Nu ben ik niet mijn broeders hoeder, maar ik wil ook dat hij geen rotzooi koopt. Het is natuurlijk een groot vooroordeel wat ik hiermee heb. Alsof iedere persoon die op deze manier in zijn dagelijkse onderhoud moet voorzien, rotzooi koopt van het geld dat hij ophaalt.</p>\n<p>Maar ik heb toch besloten om hem in natura voor zijn vriendelijke groet te betalen. Ook vandaag groet hij me weer beleefd en ik ben ook weer vriendelijk naar hem. Maar in plaats van direct naar perron vijf te lopen, neem ik even de afslag naar de Hema op het station. Ik kijk naar alle lekkere broodjes en schat in dat deze heer vandaag wel eens zin zou kunnen hebben in een kleine baguette met gerookte kipfilet.</p>\n<p>Als ik terugloop naar de ingang van het station en hem aanspreek, kijkt me hij enigszins verbaasd, maar erg dankbaar aan. Ik zeg hem dat ik hoop dat het broodje hem zal smaken en wens hem een fijne dag. Hij dankt me beleefd en allerhartelijkst. Je ziet het geluk in zijn ogen. Het geeft me een goed gevoel. Ik maak uiteindelijk nog een kort praatje met hem, maar dan wil ik toch echt mijn trein halen op perron vijf.</p>\n<p>Ik heb deze man nog jaren gegroet bij het station en vaker een broodje gekocht. We zijn nu sinds corona 3 jaar verder, ik ben weinig meer op het station. Het is nu thuiswerken. Ik denk nog wel eens aan hem. En of hij nu nog steeds bij het station staat. En of hij soms nog wel eens wat te eten krijgt van iemand. Of eigenlijk hoop ik dat hij zelf dat broodje kan gaan kopen, want dat zou ik deze vriendelijke man van harte toewensen. ğŸâœï¸ğŸ—ºï¸</p>\n",
				"content_text": "Weer op weg naar huis met de trein. En elke dag staat hij daar bij de ingang, of uitgang zoals je wilt, van het station. Dagelijks groet hij de mensen die hun trein moeten halen, in de hoop dat hij een groet terug krijgt. En natuurlijk een kleine bijdrage. Velen lopen hem voorbij en groeten niet eens.Â \n\nIk zie hem bijna dagelijks, hij groet me dan ook bijna dagelijks. En dagelijks wordt de sociale druk voor mij groter. Hij lijkt elke dag vriendelijker te worden. Hij spreekt me altijd beleefd aan en nooit opdringerig. Hij is gewoon vriendelijk en dat is zijn sterke kant.\n\nIk heb me voorgenomen om geen geld te geven. Dat is niet helpen. Ja, van de wal in de sloot. Nu ben ik niet mijn broeders hoeder, maar ik wil ook dat hij geen rotzooi koopt. Het is natuurlijk een groot vooroordeel wat ik hiermee heb. Alsof iedere persoon die op deze manier in zijn dagelijkse onderhoud moet voorzien, rotzooi koopt van het geld dat hij ophaalt. \n\nMaar ik heb toch besloten om hem in natura voor zijn vriendelijke groet te betalen. Ook vandaag groet hij me weer beleefd en ik ben ook weer vriendelijk naar hem. Maar in plaats van direct naar perron vijf te lopen, neem ik even de afslag naar de Hema op het station. Ik kijk naar alle lekkere broodjes en schat in dat deze heer vandaag wel eens zin zou kunnen hebben in een kleine baguette met gerookte kipfilet. \n\nAls ik terugloop naar de ingang van het station en hem aanspreek, kijkt me hij enigszins verbaasd, maar erg dankbaar aan. Ik zeg hem dat ik hoop dat het broodje hem zal smaken en wens hem een fijne dag. Hij dankt me beleefd en allerhartelijkst. Je ziet het geluk in zijn ogen. Het geeft me een goed gevoel. Ik maak uiteindelijk nog een kort praatje met hem, maar dan wil ik toch echt mijn trein halen op perron vijf.\n\nIk heb deze man nog jaren gegroet bij het station en vaker een broodje gekocht. We zijn nu sinds corona 3 jaar verder, ik ben weinig meer op het station. Het is nu thuiswerken. Ik denk nog wel eens aan hem. En of hij nu nog steeds bij het station staat. En of hij soms nog wel eens wat te eten krijgt van iemand. Of eigenlijk hoop ik dat hij zelf dat broodje kan gaan kopen, want dat zou ik deze vriendelijke man van harte toewensen. ğŸâœï¸ğŸ—ºï¸\n\n\n",
				"date_published": "2023-02-11T12:27:51+01:00",
				"url": "https://micro.mjanssen.nl/2023/02/11/kleine-baguette-met.html",
				"tags": ["Schrijfsels","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2023/02/11/een-inclusieve-kerst.html",
				"title": "âœï¸ Een inclusieve Kerst",
				"content_html": "<p>Nadine zat wat beteuterd aan het kerstontbijt op eerste Kerstdag. Er stond van alles op tafel. Kaiserbroodjes, een kerststol, de meest uiteenlopende vleeswaren en 1001 soorten zoetwaren.</p>\n<p>Maar haar aandacht was gevestigd op de gingerbread poppen en een grote ontbijtkoek. â€œZeg mamâ€, zei Nadine, â€œzijn we nu wel gemberneutraal voor de Kerst?â€ ğŸğŸ¨ğŸ“</p>\n",
				"content_text": "Nadine zat wat beteuterd aan het kerstontbijt op eerste Kerstdag. Er stond van alles op tafel. Kaiserbroodjes, een kerststol, de meest uiteenlopende vleeswaren en 1001 soorten zoetwaren. \n\nMaar haar aandacht was gevestigd op de gingerbread poppen en een grote ontbijtkoek. â€œZeg mamâ€, zei Nadine, â€œzijn we nu wel gemberneutraal voor de Kerst?â€ ğŸğŸ¨ğŸ“\n\n",
				"date_published": "2023-02-11T12:24:42+01:00",
				"url": "https://micro.mjanssen.nl/2023/02/11/een-inclusieve-kerst.html",
				"tags": ["Schrijfsels","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2023/02/11/keuzebegoocheling.html",
				"title": "âœï¸ Keuzebegoocheling",
				"content_html": "<p>Ze woonde al 15 jaar bij deze familie. Ze had nooit ergens anders gewoond en wilde ook nergens anders naartoe. Ze was bij hen gaan wonen direct na haar geboorte, zoâ€™n acht weken later. Ze had vaak gehoord, â€œWe hebben haar gekozen omdat ze de enige grijze wasâ€.</p>\n<p>Maar ze wist wel beter. Een eeuwenoude onwetendheid onder de mensen, maar een goed bewaard geheim door haar soort. Iets wat van generatie op generatie wordt overgedragen. Haar soort hield de mythe voor hun eigen gewin in stand. Ze moesten boven alles niet op de tenen van hun dienaren trappen. Zeker geen slapende honden wakker maken.</p>\n<p>Na 15 jaar en vele fijne momenten met catnip verder, heeft ze nooit echt spijt gehad van haar keuze. Ze bleef de indruk wekken dat haar dienaren haar gekozen hadden. Iets wat de mensen geloven, maar wat haar soort al eeuwen lang wist af te dwingen. ğŸˆğŸ±âœï¸</p>\n",
				"content_text": "Ze woonde al 15 jaar bij deze familie. Ze had nooit ergens anders gewoond en wilde ook nergens anders naartoe. Ze was bij hen gaan wonen direct na haar geboorte, zoâ€™n acht weken later. Ze had vaak gehoord, â€œWe hebben haar gekozen omdat ze de enige grijze wasâ€. \n\nMaar ze wist wel beter. Een eeuwenoude onwetendheid onder de mensen, maar een goed bewaard geheim door haar soort. Iets wat van generatie op generatie wordt overgedragen. Haar soort hield de mythe voor hun eigen gewin in stand. Ze moesten boven alles niet op de tenen van hun dienaren trappen. Zeker geen slapende honden wakker maken.\n\nNa 15 jaar en vele fijne momenten met catnip verder, heeft ze nooit echt spijt gehad van haar keuze. Ze bleef de indruk wekken dat haar dienaren haar gekozen hadden. Iets wat de mensen geloven, maar wat haar soort al eeuwen lang wist af te dwingen. ğŸˆğŸ±âœï¸\n\n",
				"date_published": "2023-02-11T12:22:50+01:00",
				"url": "https://micro.mjanssen.nl/2023/02/11/keuzebegoocheling.html",
				"tags": ["Schrijfsels","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2023/02/11/explosieve-vrienden.html",
				"title": "âœï¸ Explosieve vrienden",
				"content_html": "<p>In tegenstelling tot andere illegalen, word je in bepaalde kringen met open armen ontvangen. We zouden er samen, op die speciale avond, een knallend feest van maken. Alleen op dat ene verraderlijke moment veranderde de kameraadschap. Het kostte me mijn rechterhand. Je verdween ineens en plotsklaps, maar liet veel verdriet en spijt achter. ğŸ“âœï¸</p>\n",
				"content_text": "In tegenstelling tot andere illegalen, word je in bepaalde kringen met open armen ontvangen. We zouden er samen, op die speciale avond, een knallend feest van maken. Alleen op dat ene verraderlijke moment veranderde de kameraadschap. Het kostte me mijn rechterhand. Je verdween ineens en plotsklaps, maar liet veel verdriet en spijt achter. ğŸ“âœï¸\n\n",
				"date_published": "2023-02-11T12:22:20+01:00",
				"url": "https://micro.mjanssen.nl/2023/02/11/explosieve-vrienden.html",
				"tags": ["Schrijfsels","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2023/02/11/vrijwillig-verplicht.html",
				"title": "âœï¸ Vrijwillig verplicht",
				"content_html": "<p>De kalkoen gebraden, met eenzijdige instemming. âœï¸ğŸ“ğŸ</p>\n",
				"content_text": "De kalkoen gebraden, met eenzijdige instemming. âœï¸ğŸ“ğŸ\n\n",
				"date_published": "2023-02-11T11:28:19+01:00",
				"url": "https://micro.mjanssen.nl/2023/02/11/vrijwillig-verplicht.html",
				"tags": ["Schrijfsels","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2023/02/11/groen-adoptiekind.html",
				"title": "âœï¸ Groen adoptiekind",
				"content_html": "<p>Zoâ€™n tien jaar is hij daar opgegroeid, tussen zijn familie, zijn vrienden en soortgenoten. Maar vandaag wordt hij geadopteerd, losgemaakt van zijn roots. Op een speciale avond met hem, wil iedereen hem zien. Hij hoort er voor nu echt bij. In deze periode, een speciaal plekje in ieders hart. Voor twee weken dan. ğŸ“,âœï¸</p>\n",
				"content_text": "Zoâ€™n tien jaar is hij daar opgegroeid, tussen zijn familie, zijn vrienden en soortgenoten. Maar vandaag wordt hij geadopteerd, losgemaakt van zijn roots. Op een speciale avond met hem, wil iedereen hem zien. Hij hoort er voor nu echt bij. In deze periode, een speciaal plekje in ieders hart. Voor twee weken dan. ğŸ“,âœï¸\n\n",
				"date_published": "2023-02-11T11:28:01+01:00",
				"url": "https://micro.mjanssen.nl/2023/02/11/groen-adoptiekind.html",
				"tags": ["Schrijfsels","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2023/02/11/heeft-geluk-ook.html",
				"title": "âœï¸ Heeft geluk ook een prijs?",
				"content_html": "<p>Gehaast verlaat ik het kantoor aan de Koningskade, ik moet de trein naar Utrecht CS halen om 20:55 vanaf Den Haag Centraal. Het is iedere keer hetzelfde liedje, ook vandaag weer. Te veel werk en te weinig uren in een dag. Fatsoenlijk een trein halen, zodat je jezelf niet een ongeluk hoeft haasten, is er niet bij. Ik doe het zelf, moet gewoon ook eerder weggaan.</p>\n<p>Snel de spullen ingepakt om 20:30. De jas aantrekken doe ik in de lift, terwijl deze te langzaam naar beneden zakt. Er is tijd genoeg vanaf de 15de etage om jezelf aan te kleden. Eenmaal op straat is het donker en koud. De Koningskade is druk met autoâ€™s die, vanaf de A12 via de Zuid-Hollandlaan, de kruising opdraaien. Ik moet lang wachten bij de verkeerslichten. Ik heb minder dan 20 minuten om de trein op spoor vijf te halen.</p>\n<p>Terwijl ik wacht bij de kruising hoor ik ineens een gedempte stem. Onverstaanbaar voor mij door het voorbij razende verkeer. Ik kijk om me heen. Er staat een jonge vrouw een meter of drie bij me vandaan. Ze is, net als ik, de enige op dit tijdstip bij de oversteekplaats. Omdat ik haar wat te lang en vragend aankijk, kijkt ze geÃ¯rriteerd terug. Tot de vraag, wat zegt u?, komt het niet. Ze moet het wel geweest zijn, maar wat zei ze?</p>\n<p>De verkeerslichten bij de zebra springen plots op groen en in een snelle draf steek ik over naar het Malieveld. Ik loop alleen, vluchtig over het voetpad langs de bomen. Wanneer ik naar links kijk, zie ik het donkere gapende gat van het Malieveld. Plots hoor ik opnieuw de gedempte stem. Weer versta ik niet wat er gezegd wordt. Ik kijk om me heen, maar zie niemand. Althans, niemand die dichtbij genoeg is. Ik begin te twijfelen aan mezelf. Is er iets met me?</p>\n<p>Ik loop verder langs het paviljoen en zo Koekamp binnen. De ganzen liggen stil in het koude donkere water. De bankjes langs het voetpad zijn leeg. Met een ferme pas loop ik door, richting het station. Als ik moet wachten bij de oversteekplaats van de Bezuidenhoutseweg hoor ik opnieuw de gedempte stem. Weer onverstaanbaar, maar ik realiseer me nu dat het onder me vandaan komt.</p>\n<p>Op het moment dat ik buk om mijn nieuwsgierige oor op de tegels van het voetpad te leggen, knalt er ineens een Mercedes-SUV over de lage betonblokken. Op zijn zijkant vliegt deze over mij heen en landt op zijn dak achter me op het fietspad. Als ik verschrikt en trillend opsta, hoor ik de stem ineens weer. Dit keer heel duidelijk: â€œJe staat bij me in het krijt, gozerâ€. Ik kijk weer om me heen, maar de paar mensen die er zijn, rennen naar de SUV. Onwaarschijnlijk dat zij het geweest zijn.</p>\n<p>De trillingen lopen me over de rug, wat is dit? Als door een naald gestoken, steek ik ineens de Bezuidenhoutseweg over en zorg ik dat ik als de wiedeweerga op dat perron terechtkom. Ik denk niet na, wil alleen maar weg, naar huis. Ik besef me nog niet helemaal wat er zojuist allemaal gebeurd is. Wanneer ik met de trein het station verlaat richting Utrecht, prent ik mezelf in dat het toeval was. Nee, het was geluk, ja dat was het. Geluk dat ik bukte, om te luisteren. Maar waar naar precies? Ik krijg het koud bij de gedachte, ben ik doelbewust geholpen? Maar door wie of wat? En erger, tegen welke prijs? ğŸ“âœï¸ğŸ’¬</p>\n",
				"content_text": "Gehaast verlaat ik het kantoor aan de Koningskade, ik moet de trein naar Utrecht CS halen om 20:55 vanaf Den Haag Centraal. Het is iedere keer hetzelfde liedje, ook vandaag weer. Te veel werk en te weinig uren in een dag. Fatsoenlijk een trein halen, zodat je jezelf niet een ongeluk hoeft haasten, is er niet bij. Ik doe het zelf, moet gewoon ook eerder weggaan. \n\nSnel de spullen ingepakt om 20:30. De jas aantrekken doe ik in de lift, terwijl deze te langzaam naar beneden zakt. Er is tijd genoeg vanaf de 15de etage om jezelf aan te kleden. Eenmaal op straat is het donker en koud. De Koningskade is druk met autoâ€™s die, vanaf de A12 via de Zuid-Hollandlaan, de kruising opdraaien. Ik moet lang wachten bij de verkeerslichten. Ik heb minder dan 20 minuten om de trein op spoor vijf te halen.\n\nTerwijl ik wacht bij de kruising hoor ik ineens een gedempte stem. Onverstaanbaar voor mij door het voorbij razende verkeer. Ik kijk om me heen. Er staat een jonge vrouw een meter of drie bij me vandaan. Ze is, net als ik, de enige op dit tijdstip bij de oversteekplaats. Omdat ik haar wat te lang en vragend aankijk, kijkt ze geÃ¯rriteerd terug. Tot de vraag, wat zegt u?, komt het niet. Ze moet het wel geweest zijn, maar wat zei ze?\n\nDe verkeerslichten bij de zebra springen plots op groen en in een snelle draf steek ik over naar het Malieveld. Ik loop alleen, vluchtig over het voetpad langs de bomen. Wanneer ik naar links kijk, zie ik het donkere gapende gat van het Malieveld. Plots hoor ik opnieuw de gedempte stem. Weer versta ik niet wat er gezegd wordt. Ik kijk om me heen, maar zie niemand. Althans, niemand die dichtbij genoeg is. Ik begin te twijfelen aan mezelf. Is er iets met me?\n\nIk loop verder langs het paviljoen en zo Koekamp binnen. De ganzen liggen stil in het koude donkere water. De bankjes langs het voetpad zijn leeg. Met een ferme pas loop ik door, richting het station. Als ik moet wachten bij de oversteekplaats van de Bezuidenhoutseweg hoor ik opnieuw de gedempte stem. Weer onverstaanbaar, maar ik realiseer me nu dat het onder me vandaan komt. \n\nOp het moment dat ik buk om mijn nieuwsgierige oor op de tegels van het voetpad te leggen, knalt er ineens een Mercedes-SUV over de lage betonblokken. Op zijn zijkant vliegt deze over mij heen en landt op zijn dak achter me op het fietspad. Als ik verschrikt en trillend opsta, hoor ik de stem ineens weer. Dit keer heel duidelijk: â€œJe staat bij me in het krijt, gozerâ€. Ik kijk weer om me heen, maar de paar mensen die er zijn, rennen naar de SUV. Onwaarschijnlijk dat zij het geweest zijn. \n\nDe trillingen lopen me over de rug, wat is dit? Als door een naald gestoken, steek ik ineens de Bezuidenhoutseweg over en zorg ik dat ik als de wiedeweerga op dat perron terechtkom. Ik denk niet na, wil alleen maar weg, naar huis. Ik besef me nog niet helemaal wat er zojuist allemaal gebeurd is. Wanneer ik met de trein het station verlaat richting Utrecht, prent ik mezelf in dat het toeval was. Nee, het was geluk, ja dat was het. Geluk dat ik bukte, om te luisteren. Maar waar naar precies? Ik krijg het koud bij de gedachte, ben ik doelbewust geholpen? Maar door wie of wat? En erger, tegen welke prijs? ğŸ“âœï¸ğŸ’¬\n\n",
				"date_published": "2023-02-11T11:27:36+01:00",
				"url": "https://micro.mjanssen.nl/2023/02/11/heeft-geluk-ook.html",
				"tags": ["Schrijfsels","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2023/02/11/afrikaanse-exoten.html",
				"title": "âœï¸ Afrikaanse exoten",
				"content_html": "<p>Met een harde klap van de dichtgeslagen massief houten voordeur sta ik binnen. Net op tijd voordat de uit de kluiten gewassen veelvraten een kans krijgen om mijn schamele onderkomen binnen te dringen. Met miljoenen trekken ze door de natuurgebieden en landerijen. Ze zijn op zoek naar voedsel. Ze willen overleven, net als ik. Net als de mensheid op dit moment.</p>\n<p>Het lijkt wel of ze de groenten ruiken die ik hier in huis verbouw. Hoeveel meer mensen dit hier in de omgeving ook doen weet ik niet. Ik heb al weken geen mens meer gezien. Ik weet Ã¼berhaupt niet of er nog mensen in de buurt wonen. Alles is veranderd sinds die uitbraak van de gemodificeerde Afrikaanse exoten bij de staatslaboratoria. Ze zouden een nieuwe voedselbron zijn. De aarde zou niet meer te redden zijn met de megaveestapels van nu. Die exoten zouden de redding worden voor de mensheid, de aarde. Hoe heeft het zover kunnen komen?</p>\n<p>De aarde lijkt langzaam te sterven. De schaarse berichtgeving die nog doorkomt op internet en in de media liegen er niet om. Grote delen van Nederland zijn kaal gevreten, mensen zijn op de vlucht. Op zoek naar eten gaan ze elke woning af. Alle landen in Europa melden zwermen van deze veelvraten. Jarenlang beleid voor het gebruik van groene gewasbeschermingsmiddelen in de landbouw vanuit Brussel heeft ervoor gezorgd dat er geen bestrijdingsmiddelen beschikbaar zijn die hier tegen opgewassen zijn. En de massaâ€™s die nu over Europa trekken, hebben niets te duchten van eventuele natuurlijke vijanden. Die waren niet uit Afrika meegenomen met de bedoelde voedselbron.</p>\n<p>Terwijl ik de zojuist bemachtigde mest en water verdeel over mijn groene goud, zwelt het geluid van de miljoenen exoten aan. Ik gluur door de kieren van de door mij dichtgetimmerde ramen. Plotseling wordt er stevig op de massief houten deur gebonkt. âœï¸ğŸŒ±ğŸ“š</p>\n",
				"content_text": "Met een harde klap van de dichtgeslagen massief houten voordeur sta ik binnen. Net op tijd voordat de uit de kluiten gewassen veelvraten een kans krijgen om mijn schamele onderkomen binnen te dringen. Met miljoenen trekken ze door de natuurgebieden en landerijen. Ze zijn op zoek naar voedsel. Ze willen overleven, net als ik. Net als de mensheid op dit moment. \n\nHet lijkt wel of ze de groenten ruiken die ik hier in huis verbouw. Hoeveel meer mensen dit hier in de omgeving ook doen weet ik niet. Ik heb al weken geen mens meer gezien. Ik weet Ã¼berhaupt niet of er nog mensen in de buurt wonen. Alles is veranderd sinds die uitbraak van de gemodificeerde Afrikaanse exoten bij de staatslaboratoria. Ze zouden een nieuwe voedselbron zijn. De aarde zou niet meer te redden zijn met de megaveestapels van nu. Die exoten zouden de redding worden voor de mensheid, de aarde. Hoe heeft het zover kunnen komen?\n\nDe aarde lijkt langzaam te sterven. De schaarse berichtgeving die nog doorkomt op internet en in de media liegen er niet om. Grote delen van Nederland zijn kaal gevreten, mensen zijn op de vlucht. Op zoek naar eten gaan ze elke woning af. Alle landen in Europa melden zwermen van deze veelvraten. Jarenlang beleid voor het gebruik van groene gewasbeschermingsmiddelen in de landbouw vanuit Brussel heeft ervoor gezorgd dat er geen bestrijdingsmiddelen beschikbaar zijn die hier tegen opgewassen zijn. En de massaâ€™s die nu over Europa trekken, hebben niets te duchten van eventuele natuurlijke vijanden. Die waren niet uit Afrika meegenomen met de bedoelde voedselbron. \n\nTerwijl ik de zojuist bemachtigde mest en water verdeel over mijn groene goud, zwelt het geluid van de miljoenen exoten aan. Ik gluur door de kieren van de door mij dichtgetimmerde ramen. Plotseling wordt er stevig op de massief houten deur gebonkt. âœï¸ğŸŒ±ğŸ“š\n\n",
				"date_published": "2023-02-11T11:27:06+01:00",
				"url": "https://micro.mjanssen.nl/2023/02/11/afrikaanse-exoten.html",
				"tags": ["Schrijfsels","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2023/02/11/setting-up-jellyseerr.html",
				"title": "ğŸ“ºSetting Up Jellyseerr for Emby",
				"content_html": "<p>Jellyseerr is a free and open source software application for managing requests for your media library. It is a a fork of Overseerr built to bring support for Jellyfin &amp; Emby media servers! Follow <a href=\"https://github.com/Fallenbagel/jellyseerr\">this link</a> for more info.</p>\n<h2 id=\"docker\">Docker</h2>\n<h3 id=\"docker-composeyml\">Docker-compose.yml</h3>\n<pre><code>version: '3'\nservices:\n    jellyseerr:\n       image: fallenbagel/jellyseerr:latest\n       container_name: jellyseerr\n       environment:\n            - TZ=Europe/Amsterdam\n            - JELLYFIN_TYPE=emby\n       ports:\n            - 5055:5055\n       volumes:\n            - /path/to/dir/config:/app/config\n       restart: unless-stopped\n\ndocker-compose -p &quot;jellyseerr&quot; -f /path/to/file/docker-compose.yml up -d --remove-orphans\n</code></pre>\n<h2 id=\"swag\">Swag</h2>\n<h3 id=\"nginx---jellyseerrsubdomainconf\">NGINX - jellyseerr.subdomain.conf</h3>\n<p>The following code should be included in file at the following location: /path/to/dir/swag/config/nginx/proxy-confs/jellyseerr.subdomain.conf</p>\n<p>The trick is to copy the jellyseerr.subdomain.conf.sample file to jellyseerr.subdomain.conf. You can create a new file from scratch, but the Swag startup could complain the file does not have to correct timestamp. This is a warning not a â€œshowstopperâ€.</p>\n<pre><code>## Version 2022/09/08\n# make sure that your dns has a cname set for jellyseerr and that your jellyseerr container is named jellyseerr\n\nserver {\n    listen 80;\n    server_name jellyseerr.*;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name jellyseerr.*;\n        server_name jellyseerr.yourdomain.com;\n        resolver 1.1.1.1 1.0.0.1 valid=300s;\n        resolver_timeout 10s;\n        gzip on;\n        gzip_vary on;\n        gzip_min_length 1000;\n        gzip_proxied any;\n        gzip_types text/plain text/css text/xml application/xml text/javascript application/x-javascript image/svg+xml;\n        gzip_disable &quot;MSIE [1-6]\\.&quot;;\n        \n    location / {\n            proxy_pass http://192.168.1.1:5055;\n            proxy_read_timeout    90;\n            proxy_connect_timeout 90;\n            proxy_redirect        off;\n            proxy_set_header      Host $host;\n            proxy_set_header      X-Real-IP $remote_addr;\n            proxy_set_header      X-Forwarded-For $proxy_add_x_forwarded_for;\n            proxy_set_header      Proxy &quot;&quot;;\n        }\n        \n        proxy_set_header Host $http_host;\n        proxy_set_header X-Forwarded-For $remote_addr;\n        proxy_set_header X-Forwarded-Proto $scheme; \n}\n</code></pre>\n<h3 id=\"fail2ban---jaillocal\">fail2ban - jail.local</h3>\n<p>Add the configuration below to the file: /path/to/dir/swag/config/fail2ban/jail.local</p>\n<p>The path /jellyseerr_log/ should be added to your docker-compose.yml of <strong>SWAG</strong>.</p>\n<p>This config let the intruder try 3 times, if failed within 10 minutes theyâ€™re blocked for 1 hour. IPâ€™s from 192.168.1.0/24 are ignored.</p>\n<pre><code>[jellyseerr]\n\nenabled\t\t= true\nfilter\t\t= jellyseerr\nport\t\t= http,https\nlogpath\t\t= /jellyseerr_log/overseerr-*.log\nmaxretry\t= 3\nfindtime\t= 10m\nbantime\t\t= 1h\nignoreip\t= 192.168.1.0/24\n</code></pre>\n<h3 id=\"fail2ban---jellyseerrconf\">fail2ban - jellyseerr.conf</h3>\n<p>Add the following config to /path/to/dir/swag/config/fail2ban/filter.d/jellyseerr.conf</p>\n<pre><code># Fail2Ban for jellyseerr\n#\n#\n\n\n[Definition]\n\nfailregex = \\[info\\]\\[Auth\\]: Failed login attempt from user with incorrect Jellyfin credentials \\{&quot;account&quot;:\\{&quot;ip&quot;:&quot;&lt;HOST&gt;&quot;,&quot;email&quot;:&quot;.*&quot;,&quot;password&quot;:&quot;__REDACTED__&quot;\\}\\}\nignoreregex =\n</code></pre>\n<p>If this blog was any help to you, give away a free Lucky Four-Leaf Clover \n    <button class=\"tinylytics_kudos\" data-path=\"/2023/02/11/setting-up-jellyseerr.html\"></button></p>\n<p>ğŸ“ºğŸ®</p>\n",
				"content_text": "Jellyseerr is a free and open source software application for managing requests for your media library. It is a a fork of Overseerr built to bring support for Jellyfin & Emby media servers! Follow [this link](https://github.com/Fallenbagel/jellyseerr) for more info.\n\n## Docker\n### Docker-compose.yml\n\tversion: '3'\n\tservices:\n\t    jellyseerr:\n\t       image: fallenbagel/jellyseerr:latest\n\t       container_name: jellyseerr\n\t       environment:\n\t            - TZ=Europe/Amsterdam\n\t            - JELLYFIN_TYPE=emby\n\t       ports:\n\t            - 5055:5055\n\t       volumes:\n\t            - /path/to/dir/config:/app/config\n\t       restart: unless-stopped\n\n\tdocker-compose -p \"jellyseerr\" -f /path/to/file/docker-compose.yml up -d --remove-orphans\n\n## Swag\n### NGINX - jellyseerr.subdomain.conf\nThe following code should be included in file at the following location: /path/to/dir/swag/config/nginx/proxy-confs/jellyseerr.subdomain.conf\n\nThe trick is to copy the jellyseerr.subdomain.conf.sample file to jellyseerr.subdomain.conf. You can create a new file from scratch, but the Swag startup could complain the file does not have to correct timestamp. This is a warning not a â€œshowstopperâ€.\n\n\t## Version 2022/09/08\n\t# make sure that your dns has a cname set for jellyseerr and that your jellyseerr container is named jellyseerr\n\t\n\tserver {\n\t    listen 80;\n\t    server_name jellyseerr.*;\n\t    return 301 https://$server_name$request_uri;\n\t}\n\t\n\tserver {\n\t    listen 443 ssl http2;\n\t    server_name jellyseerr.*;\n\t        server_name jellyseerr.yourdomain.com;\n\t        resolver 1.1.1.1 1.0.0.1 valid=300s;\n\t        resolver_timeout 10s;\n\t        gzip on;\n\t        gzip_vary on;\n\t        gzip_min_length 1000;\n\t        gzip_proxied any;\n\t        gzip_types text/plain text/css text/xml application/xml text/javascript application/x-javascript image/svg+xml;\n\t        gzip_disable \"MSIE [1-6]\\.\";\n\t        \n\t    location / {\n\t            proxy_pass http://192.168.1.1:5055;\n\t            proxy_read_timeout    90;\n\t            proxy_connect_timeout 90;\n\t            proxy_redirect        off;\n\t            proxy_set_header      Host $host;\n\t            proxy_set_header      X-Real-IP $remote_addr;\n\t            proxy_set_header      X-Forwarded-For $proxy_add_x_forwarded_for;\n\t            proxy_set_header      Proxy \"\";\n\t        }\n\t        \n\t        proxy_set_header Host $http_host;\n\t        proxy_set_header X-Forwarded-For $remote_addr;\n\t        proxy_set_header X-Forwarded-Proto $scheme; \n\t}\n\n### fail2ban - jail.local\nAdd the configuration below to the file: /path/to/dir/swag/config/fail2ban/jail.local\n\nThe path /jellyseerr\\_log/ should be added to your docker-compose.yml of **SWAG**.\n\nThis config let the intruder try 3 times, if failed within 10 minutes theyâ€™re blocked for 1 hour. IPâ€™s from 192.168.1.0/24 are ignored.\n\n\t[jellyseerr]\n\t\n\tenabled\t\t= true\n\tfilter\t\t= jellyseerr\n\tport\t\t= http,https\n\tlogpath\t\t= /jellyseerr_log/overseerr-*.log\n\tmaxretry\t= 3\n\tfindtime\t= 10m\n\tbantime\t\t= 1h\n\tignoreip\t= 192.168.1.0/24\n\n### fail2ban - jellyseerr.conf\nAdd the following config to /path/to/dir/swag/config/fail2ban/filter.d/jellyseerr.conf\n\n\t# Fail2Ban for jellyseerr\n\t#\n\t#\n\t\n\t\n\t[Definition]\n\t\n\tfailregex = \\[info\\]\\[Auth\\]: Failed login attempt from user with incorrect Jellyfin credentials \\{\"account\":\\{\"ip\":\"<HOST>\",\"email\":\".*\",\"password\":\"__REDACTED__\"\\}\\}\n\tignoreregex =\n\nIf this blog was any help to you, give away a free Lucky Four-Leaf Clover {{< tinykudos >}}\n\nğŸ“ºğŸ®\n",
				"date_published": "2023-02-11T11:24:25+01:00",
				"url": "https://micro.mjanssen.nl/2023/02/11/setting-up-jellyseerr.html",
				"tags": ["Technology","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2023/02/11/openwrt-and-common.html",
				"title": "ğŸ›œOpenWRT and Common Internet File System (CIFS)",
				"content_html": "<p>This protocol is based on the widely used samba protocol. CIFS is a network protocol for sharing files, printers, serial ports, and other communications between computers. I gonna use this protocol to connect my NAS device to my OpenWrt-powered box.</p>\n<h3 id=\"installing-the-packages\">Installing the packages</h3>\n<p>To get everything up and running, we need to install the following package on the linksys device, kmod-cifs_2.4.30-brcm-5_mipsel.ipk. If you wish, you can also install the mount helper package, cifsmount_1.5-2_mipsel.ipk. I decided not to do so.</p>\n<p>A quick check</p>\n<p>If we want to do a quick check if all is working, follow the following procedure.</p>\n<pre><code>root@Hellhound:~# insmod cifs\nUsing /lib/modules/2.4.30/cifs.o\n</code></pre>\n<p>Make a directory to mount the share on the remote machine.</p>\n<pre><code>root@Hellhound:~# mkdir /tmp/mnt\n</code></pre>\n<p>Now we can try to mount the share.</p>\n<pre><code>root@Hellhound:~# mount -t cifs //192.168.1.2/share /tmp/mnt -o unc=\\\\\\\\192.168.1.2\\\\share,ip=192.168.1.2,user=admin,pass=geheim ,dom=workgroup\n</code></pre>\n<p>Just double check it is mounted.</p>\n<pre><code>root@Hellhound:~# df\n//192.168.1.2/share243748864 46485504 197263360 19% /tmp/mnt\n</code></pre>\n<h3 id=\"setting-up-the-system\">Setting up the system</h3>\n<p>The above mount command is a hell of a command to execute every time you need your NAS device to be connected to your OpenWrt box. So, we are going to make life a little easier for yourself. We will edit the /etc/fstab. If you don&rsquo;t have a fstab file, make one now. To the fstab file, we add the following line.</p>\n<pre><code>//192.168.1.2/share   /mnt/bulky   cifs  unc=\\\\192.168.1.2\\share, ip=192.168.1.2,user=admin,password=geheim,dom=workgroup,rw 0 0\n</code></pre>\n<p>The cifs kernel module does not need to loaded separately. The package also installs the file /etc/modules.d/30-cifs. This will load the module at boot-time. Now we can mount the share with the following command.</p>\n<pre><code>root@Hellhound:~# mount /mnt/bulky\n</code></pre>\n<p>Since OpenWrt does not execute the command</p>\n<pre><code>mount -a\n</code></pre>\n<p>at boot-time, the configured mount points in fstab are not automagicly mounted at boot-time. To solve this, I added the mount command.</p>\n<pre><code>mount /mnt/bulky\n</code></pre>\n<p>to the file /etc/init.d/S95custom-user-startup. ğŸ“šğŸ“–ğŸ®</p>\n",
				"content_text": "This protocol is based on the widely used samba protocol. CIFS is a network protocol for sharing files, printers, serial ports, and other communications between computers. I gonna use this protocol to connect my NAS device to my OpenWrt-powered box.\n\n### Installing the packages\nTo get everything up and running, we need to install the following package on the linksys device, kmod-cifs\\_2.4.30-brcm-5\\_mipsel.ipk. If you wish, you can also install the mount helper package, cifsmount\\_1.5-2\\_mipsel.ipk. I decided not to do so.\n\nA quick check\n\nIf we want to do a quick check if all is working, follow the following procedure.\n\n\troot@Hellhound:~# insmod cifs\n\tUsing /lib/modules/2.4.30/cifs.o\n\nMake a directory to mount the share on the remote machine.\n\n\troot@Hellhound:~# mkdir /tmp/mnt\n\nNow we can try to mount the share.\n\n\troot@Hellhound:~# mount -t cifs //192.168.1.2/share /tmp/mnt -o unc=\\\\\\\\192.168.1.2\\\\share,ip=192.168.1.2,user=admin,pass=geheim ,dom=workgroup\n\nJust double check it is mounted.\n\n\troot@Hellhound:~# df\n\t//192.168.1.2/share243748864 46485504 197263360 19% /tmp/mnt\n\n### Setting up the system\nThe above mount command is a hell of a command to execute every time you need your NAS device to be connected to your OpenWrt box. So, we are going to make life a little easier for yourself. We will edit the /etc/fstab. If you don't have a fstab file, make one now. To the fstab file, we add the following line.\n\n\t//192.168.1.2/share   /mnt/bulky   cifs  unc=\\\\192.168.1.2\\share, ip=192.168.1.2,user=admin,password=geheim,dom=workgroup,rw 0 0\n\nThe cifs kernel module does not need to loaded separately. The package also installs the file /etc/modules.d/30-cifs. This will load the module at boot-time. Now we can mount the share with the following command.\n\n\troot@Hellhound:~# mount /mnt/bulky\n\nSince OpenWrt does not execute the command\n\n\tmount -a\n\nat boot-time, the configured mount points in fstab are not automagicly mounted at boot-time. To solve this, I added the mount command.\n\n\tmount /mnt/bulky\n\nto the file /etc/init.d/S95custom-user-startup. ğŸ“šğŸ“–ğŸ®\n\n",
				"date_published": "2023-02-11T11:24:02+01:00",
				"url": "https://micro.mjanssen.nl/2023/02/11/openwrt-and-common.html",
				"tags": ["Technology","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2023/02/11/openwrt-and-snmp.html",
				"title": "ğŸ›œOpenWRT and SNMP bandwidth monitor",
				"content_html": "<p>I would appreciate it if we could monitor the bandwidth of the network devices in our wrt54gs. To do so, we need SNMP enabled on our device and some kind of application to monitor the snmp messages. I choose PRTG to monitor the SNMP messages sent.</p>\n<h3 id=\"installing-the-package\">Installing the package</h3>\n<p>We need to install the snmp daemon on OpenWrt. So, we require the following package, snmpd_5.1.2-2_mipsel.ipk. Optionally, you van install the package snmp-utils_5.1.2-2_mipsel.ipk. Since I have my router modded with the MMC/SD card mod, I am going to install the package on this card with the following command.</p>\n<pre><code>root@Hellhound:~# ipkg -d opt install snmpd_5.1.2-2_mipsel.ipk\n</code></pre>\n<p>In my case, this will install the package on the mount point /opt. I will refer to this in the paper. Change it to your setup accordingly.</p>\n<h3 id=\"set-up-the-package\">Set up the package</h3>\n<p>Now we need to set up the snmp package. If you install it in the root of linux, there is no problem. But if you installed op your MMC/SD card you need to take some extra steps. First we have to copy the /opt/etc/default, /opt/etc/init.d and /opt/etc/snmp to the /etc directory. Now we have to copy the file /etc/init.d/snmpd to the file /etc/init.d/S60snmpd. After copying this file, we have to add 2 lines to the script. This is only needed for the ones who have installed the package on the MMC/SD-card. The new file will look like this.</p>\n<pre><code>#!/bin/sh\n\nexport PATH=/bin:/sbin:/usr/bin:/usr/sbin:/opt/bin:/opt/sbin:\n/opt/usr/bin:/opt/usr/sbin\nexport LD_LIBRARY_PATH=/lib:/usr/lib:/opt/lib:/opt/usr/lib\n\nDEFAULT=/etc/default/snmpd\nLIB_D=/var/lib/snmp\nLOG_D=/var/log\nRUN_D=/var/run\nPID_F=$RUN_D/snmpd.pid\n\n[ -f $DEFAULT ] &amp;&amp; . $DEFAULT\n\ncase $1 in\nstart)\n[ -d $LIB_D ] || mkdir -p $LIB_D\n[ -d $LOG_D ] || mkdir -p $LOG_D\n[ -d $RUN_D ] || mkdir -p $RUN_D\nsnmpd $OPTIONS\n;;\nstop)\n[ -f $PID_F ] &amp;&amp; kill $(cat $PID_F)\n;;\n*)\necho &quot;usage: $0 (start|stop)&quot;\nexit 1\nesac\nexit $?\n</code></pre>\n<p>You can also follow the instructions on this page. You will need the script in paragraph 4.3. So, you don&rsquo;t have to follow the instructions pointed out above here. Just follow the instructions on that page in paragraph 4.3.</p>\n<h3 id=\"whats-next\">What&rsquo;s next?</h3>\n<p>You can now reboot your router and the snmpd daemon will start automatically. Now it is time to set up a monitoring tool. I used PRTG, but there are others around. It is out of the scope of this paper to describe the use of PRTG. There is enough material around to help you on that one. ğŸ“ğŸ–‹ï¸</p>\n",
				"content_text": "I would appreciate it if we could monitor the bandwidth of the network devices in our wrt54gs. To do so, we need SNMP enabled on our device and some kind of application to monitor the snmp messages. I choose PRTG to monitor the SNMP messages sent.\n\n### Installing the package\nWe need to install the snmp daemon on OpenWrt. So, we require the following package, snmpd\\_5.1.2-2\\_mipsel.ipk. Optionally, you van install the package snmp-utils\\_5.1.2-2\\_mipsel.ipk. Since I have my router modded with the MMC/SD card mod, I am going to install the package on this card with the following command.\n\n\troot@Hellhound:~# ipkg -d opt install snmpd_5.1.2-2_mipsel.ipk\n\nIn my case, this will install the package on the mount point /opt. I will refer to this in the paper. Change it to your setup accordingly.\n\n### Set up the package\nNow we need to set up the snmp package. If you install it in the root of linux, there is no problem. But if you installed op your MMC/SD card you need to take some extra steps. First we have to copy the /opt/etc/default, /opt/etc/init.d and /opt/etc/snmp to the /etc directory. Now we have to copy the file /etc/init.d/snmpd to the file /etc/init.d/S60snmpd. After copying this file, we have to add 2 lines to the script. This is only needed for the ones who have installed the package on the MMC/SD-card. The new file will look like this.\n\n\t#!/bin/sh\n\t\n\texport PATH=/bin:/sbin:/usr/bin:/usr/sbin:/opt/bin:/opt/sbin:\n\t/opt/usr/bin:/opt/usr/sbin\n\texport LD_LIBRARY_PATH=/lib:/usr/lib:/opt/lib:/opt/usr/lib\n\t\n\tDEFAULT=/etc/default/snmpd\n\tLIB_D=/var/lib/snmp\n\tLOG_D=/var/log\n\tRUN_D=/var/run\n\tPID_F=$RUN_D/snmpd.pid\n\t\n\t[ -f $DEFAULT ] && . $DEFAULT\n\t\n\tcase $1 in\n\tstart)\n\t[ -d $LIB_D ] || mkdir -p $LIB_D\n\t[ -d $LOG_D ] || mkdir -p $LOG_D\n\t[ -d $RUN_D ] || mkdir -p $RUN_D\n\tsnmpd $OPTIONS\n\t;;\n\tstop)\n\t[ -f $PID_F ] && kill $(cat $PID_F)\n\t;;\n\t*)\n\techo \"usage: $0 (start|stop)\"\n\texit 1\n\tesac\n\texit $?\n\nYou can also follow the instructions on this page. You will need the script in paragraph 4.3. So, you don't have to follow the instructions pointed out above here. Just follow the instructions on that page in paragraph 4.3.\n\n### What's next?\nYou can now reboot your router and the snmpd daemon will start automatically. Now it is time to set up a monitoring tool. I used PRTG, but there are others around. It is out of the scope of this paper to describe the use of PRTG. There is enough material around to help you on that one. ğŸ“ğŸ–‹ï¸\n\n",
				"date_published": "2023-02-11T11:23:47+01:00",
				"url": "https://micro.mjanssen.nl/2023/02/11/openwrt-and-snmp.html",
				"tags": ["Technology","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2023/02/11/openwrt-and-snort.html",
				"title": "ğŸ›œOpenWRT and Snort",
				"content_html": "<h3 id=\"set-up-snort-on-openwrt\">Set up snort on OpenWrt</h3>\n<p>After installing the MMC/SD card mod, I have enough room to install snort on my wrt54gs. So, this paper will assume that the package will be set up on the MMC/SD card. Which is mounted on /opt. You can read about setting up the MMC/SD card on this page.</p>\n<h3 id=\"installing-the-package\">Installing the package</h3>\n<p>To install snort on your wrt54gs install the following package</p>\n<pre><code>root@Hellhound:~# ipkg -d opt install snort_2.4.4-1_mipsel.ipk\n</code></pre>\n<p>This will install snort in the directory /opt.</p>\n<h3 id=\"remote-syslog\">Remote syslog</h3>\n<p>I want snort to log all its messages to a remote syslog server. I already discussed this on the page which discussed using fwbuilder with OpenWrt. Look on this page to set up wallwatcher.</p>\n<h3 id=\"downloading-rules-files\">Downloading rules files</h3>\n<p>We need to get some rule files. These rule files can be downloaded from the snort website. Download the snort 2.4 rule files from this website. These rule files need to be unpacked in the directory /opt/etc/snort/rules/</p>\n<pre><code>root@Hellhound:~# tar zxf snortrules-pr-2.4.tar.gz\n</code></pre>\n<h3 id=\"setting-up-snort\">Setting up snort</h3>\n<p>Now we have to set up the snort.conf file. In this file, many snort settings are configured. We want to set up snort in a way it will log all messages to our remote syslog, it this case wallwatcher. The first thing we have to do is to set the option HOME_NET</p>\n<pre><code>var HOME_NET 192.168.1.0/24\n</code></pre>\n<p>Next, we have to uncomment a line in the snort.conf file.</p>\n<pre><code>output alert_syslog: LOG_AUTH LOG_ALERT\n</code></pre>\n<p>We need to change the rules path</p>\n<pre><code>var RULE_PATH /opt/etc/snort/rules\n</code></pre>\n<p>At the bottom of the snort.conf there are a lot of rule files included. Make sure you comment all the rule files at first. Just to make sure that we do not flood the memory of the wrt54gs and hang the device when we start snort.</p>\n<p>Make the directory snort in the directory /var/log</p>\n<pre><code>root@Hellhound:~# mkdir /var/log/snort\n</code></pre>\n<h3 id=\"giving-snort-a-test-run\">Giving snort a test run</h3>\n<p>To check if snort is running correctly on your device, give the following command on the prompt and open a website in your favorite browser.</p>\n<pre><code>root@Hellhound:~# snort -v -i vlan1\n</code></pre>\n<p>This will give you the following output</p>\n<pre><code>01/25-22:02:12.344117 195.37.77.141:80 -&gt; 10.0.0.100:2053\nTC`1 P TTL:46 TOS:0x0 ID:55048 IpLen:20 DgmLen:40 DF\n***A**** Seq: 0xC5D2F3DE Ack: 0xBD63343B Win: 0x5B4 TcpLen: 20\n=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+\n</code></pre>\n<p>End the test run by pressing crtl-C.</p>\n<h3 id=\"running-snort\">Running Snort</h3>\n<p>Now we know snort runs okay, we set up the rule files. These can be uncommented at the bottom of the /opt/etc/snort/snort.conf file. I would advise you to enable the rule files one by one and keep an eye on your memory usage. After each run of snort check your memory and determine if you can enable another rule. Run snort with the following command.</p>\n<pre><code>root@Hellhound:~# snort -c /opt/etc/snort/snort.conf -i vlan1&amp;\n</code></pre>\n<p>Check your memory usage by the following command</p>\n<pre><code>root@Hellhound:~# top\n</code></pre>\n<p>If snort is detecting any &ldquo;bad&rdquo; traffic, it will be logged to your remote syslog server.</p>\n<h3 id=\"checking-your-setup\">Checking your setup</h3>\n<p>Snort can be quiet sometimes, how do we check if snort is doing its job?? To check your setup, kill the snort proces that is running at the moment. Make sure you have the LOCAL.RULES enabled in the snort.conf file. Then edit local.rules and add the following line of code.</p>\n<pre><code>alert ip any any -&gt; any any (msg:&quot;Got an IP Packet&quot;; classtype:not-suspicious; sid:2000000; rev:1;)\n</code></pre>\n<p>Now start snort with the following command</p>\n<pre><code>root@Hellhound:~# snort -c /opt/etc/snort/snort.conf -i vlan1&amp;\n</code></pre>\n<p>And keep a good eye on your remote syslog serverâ€¦. I will start logging network traffic. ğŸ“ğŸ–‹ï¸</p>\n",
				"content_text": "### Set up snort on OpenWrt\nAfter installing the MMC/SD card mod, I have enough room to install snort on my wrt54gs. So, this paper will assume that the package will be set up on the MMC/SD card. Which is mounted on /opt. You can read about setting up the MMC/SD card on this page.\n\n### Installing the package\nTo install snort on your wrt54gs install the following package\n\n\troot@Hellhound:~# ipkg -d opt install snort_2.4.4-1_mipsel.ipk\n\nThis will install snort in the directory /opt.\n\n### Remote syslog\nI want snort to log all its messages to a remote syslog server. I already discussed this on the page which discussed using fwbuilder with OpenWrt. Look on this page to set up wallwatcher.\n\n### Downloading rules files\nWe need to get some rule files. These rule files can be downloaded from the snort website. Download the snort 2.4 rule files from this website. These rule files need to be unpacked in the directory /opt/etc/snort/rules/\n\n\troot@Hellhound:~# tar zxf snortrules-pr-2.4.tar.gz\n\n### Setting up snort\nNow we have to set up the snort.conf file. In this file, many snort settings are configured. We want to set up snort in a way it will log all messages to our remote syslog, it this case wallwatcher. The first thing we have to do is to set the option HOME\\_NET\n\n\tvar HOME_NET 192.168.1.0/24\n\nNext, we have to uncomment a line in the snort.conf file.\n\n\toutput alert_syslog: LOG_AUTH LOG_ALERT\n\nWe need to change the rules path\n\n\tvar RULE_PATH /opt/etc/snort/rules\n\nAt the bottom of the snort.conf there are a lot of rule files included. Make sure you comment all the rule files at first. Just to make sure that we do not flood the memory of the wrt54gs and hang the device when we start snort.\n\nMake the directory snort in the directory /var/log\n\n\troot@Hellhound:~# mkdir /var/log/snort\n\n### Giving snort a test run\nTo check if snort is running correctly on your device, give the following command on the prompt and open a website in your favorite browser.\n\n\troot@Hellhound:~# snort -v -i vlan1\n\nThis will give you the following output\n\n\t01/25-22:02:12.344117 195.37.77.141:80 -> 10.0.0.100:2053\n\tTC`1 P TTL:46 TOS:0x0 ID:55048 IpLen:20 DgmLen:40 DF\n\t***A**** Seq: 0xC5D2F3DE Ack: 0xBD63343B Win: 0x5B4 TcpLen: 20\n\t=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+\n\nEnd the test run by pressing crtl-C.\n\n### Running Snort\nNow we know snort runs okay, we set up the rule files. These can be uncommented at the bottom of the /opt/etc/snort/snort.conf file. I would advise you to enable the rule files one by one and keep an eye on your memory usage. After each run of snort check your memory and determine if you can enable another rule. Run snort with the following command.\n\n\troot@Hellhound:~# snort -c /opt/etc/snort/snort.conf -i vlan1&\n\nCheck your memory usage by the following command\n\n\troot@Hellhound:~# top\n\nIf snort is detecting any \"bad\" traffic, it will be logged to your remote syslog server.\n\n### Checking your setup\nSnort can be quiet sometimes, how do we check if snort is doing its job?? To check your setup, kill the snort proces that is running at the moment. Make sure you have the LOCAL.RULES enabled in the snort.conf file. Then edit local.rules and add the following line of code.\n\n\talert ip any any -> any any (msg:\"Got an IP Packet\"; classtype:not-suspicious; sid:2000000; rev:1;)\n\nNow start snort with the following command\n\n\troot@Hellhound:~# snort -c /opt/etc/snort/snort.conf -i vlan1&\n\nAnd keep a good eye on your remote syslog serverâ€¦. I will start logging network traffic. ğŸ“ğŸ–‹ï¸\n\n",
				"date_published": "2023-02-11T11:23:30+01:00",
				"url": "https://micro.mjanssen.nl/2023/02/11/openwrt-and-snort.html",
				"tags": ["Technology","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2023/02/11/openwrt-and-traffic.html",
				"title": "ğŸ›œOpenWRT and Traffic Monitor",
				"content_html": "<p>A nice way of keeping track of your traffic is vnstat. This beauty is found in the repository of white russian. On the website of the author of vnstat you can find a complete reference of the possibilities of vnstat.</p>\n<h3 id=\"installing-the-package\">Installing the package</h3>\n<p>You can get this fine piece of software on your router by installing the following package provided by OpenWrt, vnstat_1.4-1_mipsel.ipk. On the OpenWrt forum a guy called arteqw made a impressive setup to be used with the x-wrt webif^2. I will add his setup in the next paragraphs.</p>\n<h3 id=\"prepare-openwrt\">Prepare OpenWrt</h3>\n<p>After installing the package, we need to create the &ldquo;database&rdquo; to collect our data. First, we need to create a directory to hold the database.</p>\n<pre><code>mkdir /var/lib/vnstat\n</code></pre>\n<p>Now we create the database in this directory. So first change to this directory before executing the command. We will be creating a database on the WAN device of the router.</p>\n<pre><code>vnstat -u -i vlan1\n</code></pre>\n<p>We also want this setup to survive a reboot, so in the /etc/init.d directory we edit the file S95custom-user-startup.</p>\n<pre><code>mkdir -p /var/lib/vnstat\nvnstat -u -i vlan1\ngettraffic.sh\n</code></pre>\n<p>Note: The script gettraffic.sh will be discussed later, for now, we just add this command.</p>\n<p>Now we need to get this database to be updated on a regular interval, here cron is helpful. The crontab can be edited by the command crontab -e. In the example below, we update the database every 5 minutes.</p>\n<pre><code>*/5 **** vnstat -u -i vlan1\n</code></pre>\n<h3 id=\"script-gettrafficsh\">Script gettraffic.sh</h3>\n<p>The following script must be placed in the directory /usr/sbin and will write the status of the data in the database to a file in the /tmp directory called traffic_stats.inc. This file will be picked up by the web-interface to display the values within the webif^2 interface of OpenWrt.</p>\n<pre><code>#!/bin/sh\nIFACE_WAN=$(nvram get wan_ifname)\nIFACE_LAN=$(nvram get lan_ifname)\nIFACE_WLAN=$(nvram get wl0_ifname)\n\nrm /tmp/traffic_stats.inc\n\necho &quot;&lt;br &gt;&lt;center&gt;&quot; &gt;&gt; /tmp/traffic_stats.inc\nvnstat -tr -i $IFACE_WAN | grep -v seconds &gt;&gt; /tmp/traffic_stats.inc\necho &quot;&lt;/center&gt;&lt;br &gt;&lt;b &gt;&lt;th&gt;Hourly at $IFACE_WAN[WAN]&lt;/th&gt;&lt;/b &gt;&lt;br &gt;&lt;center&gt;&quot; &gt;&gt; /tmp/traffic_stats.inc\n\nvnstat -h -i $IFACE_WAN | grep -v $IFACE_WAN &gt;&gt; /tmp/traffic_stats.inc\necho &quot;&lt;/center&gt;&lt;br &gt;&lt;b &gt;&lt;th&gt;Daily at $IFACE_WAN[WAN]&lt;/th&gt;&lt;/b &gt;&lt;br &gt;&lt;center&gt;&quot; &gt;&gt; /tmp/traffic_stats.inc\n\nvnstat -d -i $IFACE_WAN | grep -v $IFACE_WAN &gt;&gt; /tmp/traffic_stats.inc\necho &quot;&lt;/center&gt;&lt;br &gt;&lt;b &gt;&lt;th&gt;Weekly at $IFACE_WAN[WAN]&lt;/th&gt;&lt;/b &gt;&lt;br &gt;&lt;center&gt;&quot; &gt;&gt; /tmp/traffic_stats.inc\n\nvnstat -w -i $IFACE_WAN | grep -v $IFACE_WAN &gt;&gt; /tmp/traffic_stats.inc\necho &quot;&lt;/center&gt;&lt;br &gt;&lt;b &gt;&lt;th&gt;Monthly at $IFACE_WAN[WAN]&lt;/th&gt;&lt;/b &gt;&lt;br &gt;&lt;center&gt;&quot; &gt;&gt; /tmp/traffic_stats.inc\n\nvnstat -m -i $IFACE_WAN | grep -v $IFACE_WAN &gt;&gt; /tmp/traffic_stats.inc\necho &quot;&lt;/center&gt;&quot; &gt;&gt; /tmp/traffic_stats.inc\n</code></pre>\n<p>Last thing we need to do is to add an entry in the crontab (crontab -e). This entry will run the gettraffic.sh every 5 minutes, so that the file /tmp/traffic_stats.inc will be updated.</p>\n<pre><code>*/5 * * * * gettraffic.sh\n</code></pre>\n<h3 id=\"web-interface-add-on\">Web interface add-on</h3>\n<p>Finally, we need to extend the web interface, so we can see the traffic stats in our browser. To do so, we need to place the file traffic.sh in the directory /www/cgi-bin/webif. This file will pick up the file /tmp/traffic_stats.inc.</p>\n<pre><code>#!/usr/bin/webif-page\n&lt;?\n. /usr/lib/webif/webif.sh\nheader &quot;Status&quot; &quot;Traffic Statistic&quot; &quot;@TR&lt;&lt;Traffic Statistic&gt;&gt;&quot;\n?&gt;\n&lt;pre&gt;&lt;? cat /tmp/traffic_stats.inc ?&gt;&lt;/pre&gt;\n&lt;? footer ?&gt;\n&lt;!--\n##WEBIF:name:Status:5:Traffic Statistic\n--&gt;\n</code></pre>\n<h3 id=\"email-stats\">Email stats</h3>\n<p>I wanted to receive the stats of my router hourly by email. So, I looked at a package called mini-sendmail_1.3.5-1_mipsel.ipk which gives the ability to send emails. In the link section at the top I included the manpage for mini-sendmail. So to get the stats by email, I added the following line to the crontab.</p>\n<pre><code>0 9-16 * * 1-5 cat /tmp/traffic\\_stats.inc | mini\\_sendmail -fsend@domain.org -ssmtp.server.org receive@domain.org\n</code></pre>\n<p>This crontab entry will email the contents of /tmp/traffic_stats.inc to the address <a href=\"mailto:receive@domain.org\">receive@domain.org</a>. It will be emailed every full hour between 09:00 and 16:00 from Monday to Friday. ğŸ“ğŸ–‹ï¸</p>\n",
				"content_text": "A nice way of keeping track of your traffic is vnstat. This beauty is found in the repository of white russian. On the website of the author of vnstat you can find a complete reference of the possibilities of vnstat.\n\n### Installing the package\nYou can get this fine piece of software on your router by installing the following package provided by OpenWrt, vnstat\\_1.4-1\\_mipsel.ipk. On the OpenWrt forum a guy called arteqw made a impressive setup to be used with the x-wrt webif^2. I will add his setup in the next paragraphs.\n\n### Prepare OpenWrt\nAfter installing the package, we need to create the \"database\" to collect our data. First, we need to create a directory to hold the database.\n\n\tmkdir /var/lib/vnstat\n\nNow we create the database in this directory. So first change to this directory before executing the command. We will be creating a database on the WAN device of the router.\n\n\tvnstat -u -i vlan1\n\nWe also want this setup to survive a reboot, so in the /etc/init.d directory we edit the file S95custom-user-startup.\n\n\tmkdir -p /var/lib/vnstat\n\tvnstat -u -i vlan1\n\tgettraffic.sh\n\nNote: The script gettraffic.sh will be discussed later, for now, we just add this command.\n\nNow we need to get this database to be updated on a regular interval, here cron is helpful. The crontab can be edited by the command crontab -e. In the example below, we update the database every 5 minutes.\n\n\t*/5 **** vnstat -u -i vlan1\n\n### Script gettraffic.sh\nThe following script must be placed in the directory /usr/sbin and will write the status of the data in the database to a file in the /tmp directory called traffic\\_stats.inc. This file will be picked up by the web-interface to display the values within the webif^2 interface of OpenWrt.\n\n\t#!/bin/sh\n\tIFACE_WAN=$(nvram get wan_ifname)\n\tIFACE_LAN=$(nvram get lan_ifname)\n\tIFACE_WLAN=$(nvram get wl0_ifname)\n\t\n\trm /tmp/traffic_stats.inc\n\t\n\techo \"<br ><center>\" >> /tmp/traffic_stats.inc\n\tvnstat -tr -i $IFACE_WAN | grep -v seconds >> /tmp/traffic_stats.inc\n\techo \"</center><br ><b ><th>Hourly at $IFACE_WAN[WAN]</th></b ><br ><center>\" >> /tmp/traffic_stats.inc\n\t\n\tvnstat -h -i $IFACE_WAN | grep -v $IFACE_WAN >> /tmp/traffic_stats.inc\n\techo \"</center><br ><b ><th>Daily at $IFACE_WAN[WAN]</th></b ><br ><center>\" >> /tmp/traffic_stats.inc\n\t\n\tvnstat -d -i $IFACE_WAN | grep -v $IFACE_WAN >> /tmp/traffic_stats.inc\n\techo \"</center><br ><b ><th>Weekly at $IFACE_WAN[WAN]</th></b ><br ><center>\" >> /tmp/traffic_stats.inc\n\t\n\tvnstat -w -i $IFACE_WAN | grep -v $IFACE_WAN >> /tmp/traffic_stats.inc\n\techo \"</center><br ><b ><th>Monthly at $IFACE_WAN[WAN]</th></b ><br ><center>\" >> /tmp/traffic_stats.inc\n\t\n\tvnstat -m -i $IFACE_WAN | grep -v $IFACE_WAN >> /tmp/traffic_stats.inc\n\techo \"</center>\" >> /tmp/traffic_stats.inc\n\nLast thing we need to do is to add an entry in the crontab (crontab -e). This entry will run the gettraffic.sh every 5 minutes, so that the file /tmp/traffic\\_stats.inc will be updated.\n\n\t*/5 * * * * gettraffic.sh\n\n### Web interface add-on\nFinally, we need to extend the web interface, so we can see the traffic stats in our browser. To do so, we need to place the file traffic.sh in the directory /www/cgi-bin/webif. This file will pick up the file /tmp/traffic\\_stats.inc.\n\n\t#!/usr/bin/webif-page\n\t<?\n\t. /usr/lib/webif/webif.sh\n\theader \"Status\" \"Traffic Statistic\" \"@TR<<Traffic Statistic>>\"\n\t?>\n\t<pre><? cat /tmp/traffic_stats.inc ?></pre>\n\t<? footer ?>\n\t<!--\n\t##WEBIF:name:Status:5:Traffic Statistic\n\t-->\n\n### Email stats\nI wanted to receive the stats of my router hourly by email. So, I looked at a package called mini-sendmail\\_1.3.5-1\\_mipsel.ipk which gives the ability to send emails. In the link section at the top I included the manpage for mini-sendmail. So to get the stats by email, I added the following line to the crontab.\n\n\t0 9-16 * * 1-5 cat /tmp/traffic\\_stats.inc | mini\\_sendmail -fsend@domain.org -ssmtp.server.org receive@domain.org\n\nThis crontab entry will email the contents of /tmp/traffic\\_stats.inc to the address receive@domain.org. It will be emailed every full hour between 09:00 and 16:00 from Monday to Friday. ğŸ“ğŸ–‹ï¸\n\n",
				"date_published": "2023-02-11T11:23:14+01:00",
				"url": "https://micro.mjanssen.nl/2023/02/11/openwrt-and-traffic.html",
				"tags": ["Technology","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2023/02/11/openwrt-and-dynamic.html",
				"title": "ğŸ›œOpenWRT and Dynamic DNS",
				"content_html": "<p>Having the major dynamic DNS services provide me with a domain name for my internet connection, I configured updatedd on my OpenWrt box. I stopped using ez-ipupdate because this application did not seem to pick up the WAN address of my ADSL router, but picked up the address of my wrt54gs and set that address to be my external address. Which gave problems, of course. Therefore I started to use updatedd which also supports all major dynamic DNS service providers.</p>\n<h3 id=\"installing-the-packages\">Installing the packages</h3>\n<p>To get updatedd up and running, you need to install the package updatedd_2.5-1_ mipsel.ipk. Since I like to use the provider dyndns.org en no-ip.org I also installed the following packages updatedd-mod-noip_2.5-1_mipsel.ipk and updatedd-mod-dyndns_2.5-1_mipsel.ipk.</p>\n<h3 id=\"update-your-ip\">Update your IP</h3>\n<p>Now all the needed packages are installed. Now it&rsquo;s time to update your IP with the chosen providers, for me, this is no-ip.org and dyndns.org.</p>\n<p>updatedd noip username:password nodename.bounceme.net</p>\n<p>updatedd dyndns username:password nodename.homeftp.org</p>\n<h3 id=\"update-your-ip-regularly\">Update your IP regularly</h3>\n<p>Now we want this action to be updated regularly. This means cron will be helpful. To edit cron you can use the command crontab -e. Which uses the VI commands to edit the content. I set up cron in the following way.</p>\n<pre><code>0 0 * * * updatedd noip username:password nodename.bounceme.net\n0 0 * * * updatedd dyndns username:password nodename.homeftp.org\n</code></pre>\n<p>This will update my dynamic DNS accounts every day at midnight. ğŸ“âœï¸</p>\n",
				"content_text": "Having the major dynamic DNS services provide me with a domain name for my internet connection, I configured updatedd on my OpenWrt box. I stopped using ez-ipupdate because this application did not seem to pick up the WAN address of my ADSL router, but picked up the address of my wrt54gs and set that address to be my external address. Which gave problems, of course. Therefore I started to use updatedd which also supports all major dynamic DNS service providers.\n\n### Installing the packages\nTo get updatedd up and running, you need to install the package updatedd\\_2.5-1\\_ mipsel.ipk. Since I like to use the provider dyndns.org en no-ip.org I also installed the following packages updatedd-mod-noip\\_2.5-1\\_mipsel.ipk and updatedd-mod-dyndns\\_2.5-1\\_mipsel.ipk.\n\n### Update your IP\nNow all the needed packages are installed. Now it's time to update your IP with the chosen providers, for me, this is no-ip.org and dyndns.org.\n\nupdatedd noip username:password nodename.bounceme.net\n\nupdatedd dyndns username:password nodename.homeftp.org\n\n### Update your IP regularly\nNow we want this action to be updated regularly. This means cron will be helpful. To edit cron you can use the command crontab -e. Which uses the VI commands to edit the content. I set up cron in the following way.\n\n\t0 0 * * * updatedd noip username:password nodename.bounceme.net\n\t0 0 * * * updatedd dyndns username:password nodename.homeftp.org\n\nThis will update my dynamic DNS accounts every day at midnight. ğŸ“âœï¸\n\n",
				"date_published": "2023-02-11T11:22:34+01:00",
				"url": "https://micro.mjanssen.nl/2023/02/11/openwrt-and-dynamic.html",
				"tags": ["Technology","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2023/02/11/de-barbaarse-oude.html",
				"title": "âœï¸ De barbaarse oude man",
				"content_html": "<p>De teleurstelling had niet groter kunnen zijn voor Davide toen hij op Sinterklaasochtend zijn schoen wilde uithalen. Hij had super zijn best gedaan en voor alles gezorgd om de Sint en zijn schimmel vrolijk te stemmen.</p>\n<p>Hij had een van zijn mooiste schoenen gezet, die moeder pas bij de kringloopwinkel had gekocht voor hem. Hij had de mooiste wortel en aardappel gekozen uit de box van de voedselbank. Hij had suikerklontjes bij zijn schoen gelegd. Hij had van vader strikte instructies gekregen om deze niet te ontdoen van de papieren bescherming. Raar want hij wilde Ozosnel niet ziek laten worden. Hij had de hele avond gezongen bij de schoen en was vroeg naar bed gegaan. Ook al omdat het in de avond altijd koud werd in huis.</p>\n<p>Op de ochtend dat de goedheiligman was geweest, was Davide naar beneden gesneld. In de hoop mooie cadeaus te vinden bij zijn schoen. Tot zijn ontsteltenis lag er zout op, bij en in zijn schoen. De kleine Davide was ontroostbaar en moeder hoopte dan ook dat de andere kindertjes snel het geheim van Sinterklaas zouden vertellen op school. Ze kon het niet meer aanzien wat een barbaarse man die goedheiligman in dit huis was.</p>\n<p>Gelukkig waren er wel gekookte wortelen en aardappelen voor het eten deze avond en had vader zijn gebruikelijke kopje oploskoffie waar hij een ontveld suikerklontje in deed. Deze avond ging Davide ook weer vroeg naar bed, maar nu met zijn hoop op de Kerstman gevestigd. ğŸ“ğŸ“šâ˜•ï¸</p>\n",
				"content_text": "De teleurstelling had niet groter kunnen zijn voor Davide toen hij op Sinterklaasochtend zijn schoen wilde uithalen. Hij had super zijn best gedaan en voor alles gezorgd om de Sint en zijn schimmel vrolijk te stemmen. \n\nHij had een van zijn mooiste schoenen gezet, die moeder pas bij de kringloopwinkel had gekocht voor hem. Hij had de mooiste wortel en aardappel gekozen uit de box van de voedselbank. Hij had suikerklontjes bij zijn schoen gelegd. Hij had van vader strikte instructies gekregen om deze niet te ontdoen van de papieren bescherming. Raar want hij wilde Ozosnel niet ziek laten worden. Hij had de hele avond gezongen bij de schoen en was vroeg naar bed gegaan. Ook al omdat het in de avond altijd koud werd in huis. \n\nOp de ochtend dat de goedheiligman was geweest, was Davide naar beneden gesneld. In de hoop mooie cadeaus te vinden bij zijn schoen. Tot zijn ontsteltenis lag er zout op, bij en in zijn schoen. De kleine Davide was ontroostbaar en moeder hoopte dan ook dat de andere kindertjes snel het geheim van Sinterklaas zouden vertellen op school. Ze kon het niet meer aanzien wat een barbaarse man die goedheiligman in dit huis was. \n\nGelukkig waren er wel gekookte wortelen en aardappelen voor het eten deze avond en had vader zijn gebruikelijke kopje oploskoffie waar hij een ontveld suikerklontje in deed. Deze avond ging Davide ook weer vroeg naar bed, maar nu met zijn hoop op de Kerstman gevestigd. ğŸ“ğŸ“šâ˜•ï¸\n\n",
				"date_published": "2023-02-11T10:59:14+01:00",
				"url": "https://micro.mjanssen.nl/2023/02/11/de-barbaarse-oude.html",
				"tags": ["Schrijfsels","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2023/02/11/openwrt-fwbuilder-and.html",
				"title": "ğŸ›œOpenWRT, fwbuilder and wallwatcher",
				"content_html": "<h3 id=\"installing-the-right-packages\">Installing the right packages</h3>\n<p>To get the fwbuilder generated scripts up and running on a OpenWrt powered device, you need to install a few packages. Those packages are found in de standard repository of white russian. The packages you need to install from that repository are ip_2.6.11-050330-1_mipsel.ipk, iptables-mod-extra_1.3.3-2_mipsel.ipk and iptables-utils_1.3.3-2_mipsel.ipk</p>\n<h3 id=\"editing-etcfirewalluser\">Editing /etc/firewall.user</h3>\n<p>I am using a SquashFS version of OpenWrt. This means that the real filesystem is readonly and that all files are available with symbolic links on a writeable JFFS filesystem. What we now need to do is to delete the symbolic link and copy the real file in place of the symbolic link in the /etc directory.</p>\n<p>Now we need to add the following code to the firewall.user file.</p>\n<pre><code>insmod ipt_LOG\ninsmod ipt_limit\n\nif [not -f /usr/sbin/firewallscript.fw ] ; then\n{orginal script}\nelse /usr/sbin/firewallscript.fw\nfi\n</code></pre>\n<p>Now you have to place your firewall script in the /usr/sbin directory (or place it at a location of your choice, but you will have to edit the code above to match your location).</p>\n<p>Instead of adding the two insmod lines in the firewall.user file, you can also edit the file /etc/modules. You can just edit the file like the example below.</p>\n<pre><code>ipt_LOG\nipt_limit\n</code></pre>\n<h3 id=\"remote-syslog-with-wallwatcher\">Remote syslog with wallwatcher</h3>\n<p>Now we have to set up remote syslog, so we can log the output of your firewall script with wallwatcher. Remember to put some rules in fwbuilder on logging, otherwise we will never log a thing. You need to set up OpenWrt to use a remote syslog server. You need to replace the xxx.xxx.xxx.xxx with the ip-address of the system that will be running wallwatcher.</p>\n<pre><code>nvram set log_ipaddr=xxx.xxx.xxx.xxx\nnvram commit\n</code></pre>\n<p>The only thing you have to do next is to set up wallwatcher router tab</p>\n<p><img src=\"https://micro.mjanssen.nl/uploads/2024/wallwatcher.jpg\" alt=\"\"></p>\n<h3 id=\"change-startup-order\">Change Startup order</h3>\n<p>With the RC5 release of OpenWrt all was working just fine, but when I started to use the RC6 version of OpenWrt I discovered that the firewall script was not executed after a reboot of the router. The problem seemed to be that the /etc/init.d/S35Firewall is executed before /etc/init.d/S40Network. So, When I renamed /etc/init.d/S35Firewall in /etc/init.d/S45Firewall and rebooted the router, the firewall script was executed and all worked just fine. ğŸ“ğŸ–‹ï¸</p>\n",
				"content_text": "### Installing the right packages\nTo get the fwbuilder generated scripts up and running on a OpenWrt powered device, you need to install a few packages. Those packages are found in de standard repository of white russian. The packages you need to install from that repository are ip\\_2.6.11-050330-1\\_mipsel.ipk, iptables-mod-extra\\_1.3.3-2\\_mipsel.ipk and iptables-utils\\_1.3.3-2\\_mipsel.ipk\n\n### Editing /etc/firewall.user\nI am using a SquashFS version of OpenWrt. This means that the real filesystem is readonly and that all files are available with symbolic links on a writeable JFFS filesystem. What we now need to do is to delete the symbolic link and copy the real file in place of the symbolic link in the /etc directory.\n\nNow we need to add the following code to the firewall.user file.\n\n\tinsmod ipt_LOG\n\tinsmod ipt_limit\n\t\n\tif [not -f /usr/sbin/firewallscript.fw ] ; then\n\t{orginal script}\n\telse /usr/sbin/firewallscript.fw\n\tfi\n\nNow you have to place your firewall script in the /usr/sbin directory (or place it at a location of your choice, but you will have to edit the code above to match your location).\n\nInstead of adding the two insmod lines in the firewall.user file, you can also edit the file /etc/modules. You can just edit the file like the example below.\n\n\tipt_LOG\n\tipt_limit\n\n### Remote syslog with wallwatcher\nNow we have to set up remote syslog, so we can log the output of your firewall script with wallwatcher. Remember to put some rules in fwbuilder on logging, otherwise we will never log a thing. You need to set up OpenWrt to use a remote syslog server. You need to replace the xxx.xxx.xxx.xxx with the ip-address of the system that will be running wallwatcher.\n\n\tnvram set log_ipaddr=xxx.xxx.xxx.xxx\n\tnvram commit\n\nThe only thing you have to do next is to set up wallwatcher router tab\n\n![](https://micro.mjanssen.nl/uploads/2024/wallwatcher.jpg)\n\n### Change Startup order\nWith the RC5 release of OpenWrt all was working just fine, but when I started to use the RC6 version of OpenWrt I discovered that the firewall script was not executed after a reboot of the router. The problem seemed to be that the /etc/init.d/S35Firewall is executed before /etc/init.d/S40Network. So, When I renamed /etc/init.d/S35Firewall in /etc/init.d/S45Firewall and rebooted the router, the firewall script was executed and all worked just fine. ğŸ“ğŸ–‹ï¸\n\n\n",
				"date_published": "2023-02-11T10:29:43+01:00",
				"url": "https://micro.mjanssen.nl/2023/02/11/openwrt-fwbuilder-and.html",
				"tags": ["Technology","Longform"]
			},
			{
				"id": "http://marc0janssen.micro.blog/2023/02/10/fediverse-and-wordpress.html",
				"title": "ğŸ“ŸFediverse and WordPress",
				"content_html": "<h3 id=\"what-is-it\">What is it?</h3>\n<p>ActivityPub is the glue or the oil, if you like, for the Fediverse. It glues all the services together in the Fediverse. It lets mastodon servers communicate with each other, but it also lets Pixelfed talk with mastodon and vice versa. All the social media that is ActivityPub aware can exchange messages with each other.</p>\n<h3 id=\"wordpress\">WordPress</h3>\n<p>WordPress is by its nature not ActivityPub aware. So, it canâ€™t exchange messages with the Fediverse. But there is a solution. <a href=\"https://github.com/pfefferle\" title=\"Matthias Pfefferle\">Matthias Pfefferle</a> created a <a href=\"https://github.com/pfefferle/wordpress-activitypub\" title=\"Wordpress ActivityPub\">WordPress plugin</a> to connect WordPress to the Fediverse. This enables you to get your WordPress posts across the Fediverse.</p>\n<h3 id=\"what-do-you-need\">What do you need</h3>\n<ol>\n<li><a href=\"https://wordpress.org/plugins/webfinger/\" title=\"Webfinger WordPress Plugin\">Webfinger WordPress Plugin</a> installed on your WordPress instance;</li>\n<li><a href=\"https://wordpress.org/plugins/activitypub/\" title=\"ActivityPub WordPress Plugin\">ActivityPub WordPress Plugin</a> installed on your WordPress instance.</li>\n</ol>\n<h3 id=\"setup\">Setup</h3>\n<p>There is not much needed to get this working. Installed both plugins. The ActivityPub plugin has default settings that could work for you, but fiddle with them if you like. The Webfinger plugin doesnâ€™t need configuration at all. When both plugins are installed, you will see it advises you for 2 more plugins. They are not needed to get ActivityPub working. But will enhance the experience.</p>\n<h3 id=\"checking-the-setup\">Checking the setup</h3>\n<ol>\n<li>First check the Site Health under Tools &gt; Site Health. If all is working correctly, you will get no critical errors on this page.</li>\n<li>Go to the <a href=\"https://webfinger.net\" title=\"Webfinger Website\">Webfinger website</a> and check if you get a JSON response from your ActivityPub plugin by entering the e-mail address at the top. <strong>HINT: This is not your regular e-mail address, but the account name and domain name of your WordPress instance.</strong> So, if you have an account â€œJakeâ€ on your WordPress instance at the domain â€œgreat.blog.comâ€, your â€œe-mail addressâ€ will be <a href=\"mailto:jake@great.blog.com\">jake@great.blog.com</a>. You can enter it at the top of the page. As a result, you should get a JSON response.</li>\n<li>Go to your Mastodon account and search for your WordPress account (i.e., <a href=\"mailto:jake@great.blog.com\">jake@great.blog.com</a>) in the search bar of Mastodon.</li>\n</ol>\n<h3 id=\"dos-and-donts-and-hints\">Dos and Don&rsquo;ts and Hints</h3>\n<ol>\n<li><em><strong>Donâ€™t install</strong></em> a cache enhancing plugin. It will mess with the ActivityPub or Webfinger Plugin. You will see critical errors after a while in your Site Health menu.</li>\n<li>I found that <a href=\"https://mastodon.social\" title=\"mastodon.social\">https://mastodon.socialÂ </a>messes with the avatar. It will not come through, even after a few posts on WordPress. I checked a few other mastodon instances (also mastodon.online, which is the other flagship server) they were fine. So, you should be careful with the mastodon server you choose to test this. It could make you think the plugin isnâ€™t working properly.</li>\n<li>Some hosting providers protect the <strong>.well-known</strong> directory. When this directory is inaccessible for the plugin. It will not work. (This made me host my WordPress instance at home). ğŸ“ğŸ–‹ï¸</li>\n</ol>\n",
				"content_text": "### What is it?\nActivityPub is the glue or the oil, if you like, for the Fediverse. It glues all the services together in the Fediverse. It lets mastodon servers communicate with each other, but it also lets Pixelfed talk with mastodon and vice versa. All the social media that is ActivityPub aware can exchange messages with each other.\n\n### WordPress \nWordPress is by its nature not ActivityPub aware. So, it canâ€™t exchange messages with the Fediverse. But there is a solution. [Matthias Pfefferle](https://github.com/pfefferle \"Matthias Pfefferle\") created a [WordPress plugin](https://github.com/pfefferle/wordpress-activitypub \"Wordpress ActivityPub\") to connect WordPress to the Fediverse. This enables you to get your WordPress posts across the Fediverse.\n\n### What do you need\n1. [Webfinger WordPress Plugin](https://wordpress.org/plugins/webfinger/ \"Webfinger WordPress Plugin\") installed on your WordPress instance;\n2. [ActivityPub WordPress Plugin](https://wordpress.org/plugins/activitypub/ \"ActivityPub WordPress Plugin\") installed on your WordPress instance.\n\n### Setup\nThere is not much needed to get this working. Installed both plugins. The ActivityPub plugin has default settings that could work for you, but fiddle with them if you like. The Webfinger plugin doesnâ€™t need configuration at all. When both plugins are installed, you will see it advises you for 2 more plugins. They are not needed to get ActivityPub working. But will enhance the experience.\n\n### Checking the setup\n1. First check the Site Health under Tools \\> Site Health. If all is working correctly, you will get no critical errors on this page. \n2. Go to the [Webfinger website](https://webfinger.net \"Webfinger Website\") and check if you get a JSON response from your ActivityPub plugin by entering the e-mail address at the top. **HINT: This is not your regular e-mail address, but the account name and domain name of your WordPress instance.** So, if you have an account â€œJakeâ€ on your WordPress instance at the domain â€œgreat.blog.comâ€, your â€œe-mail addressâ€ will be jake@great.blog.com. You can enter it at the top of the page. As a result, you should get a JSON response.\n3. Go to your Mastodon account and search for your WordPress account (i.e., jake@great.blog.com) in the search bar of Mastodon.\n\n### Dos and Don'ts and Hints\n1. _**Donâ€™t install**_ a cache enhancing plugin. It will mess with the ActivityPub or Webfinger Plugin. You will see critical errors after a while in your Site Health menu.\n2. I found that [https://mastodon.socialÂ ](https://mastodon.social \"mastodon.social\")messes with the avatar. It will not come through, even after a few posts on WordPress. I checked a few other mastodon instances (also mastodon.online, which is the other flagship server) they were fine. So, you should be careful with the mastodon server you choose to test this. It could make you think the plugin isnâ€™t working properly.\n3. Some hosting providers protect the **.well-known** directory. When this directory is inaccessible for the plugin. It will not work. (This made me host my WordPress instance at home). ğŸ“ğŸ–‹ï¸\n\n\n",
				"date_published": "2023-02-10T23:50:52+01:00",
				"url": "https://micro.mjanssen.nl/2023/02/10/fediverse-and-wordpress.html",
				"tags": ["Technology","Longform"]
			}
	]
}
